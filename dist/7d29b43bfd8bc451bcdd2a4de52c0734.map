{"version":3,"sources":["js/math.js","js/ClipBox.js","../camera/Camera.js","../camera/CameraController.js","../camera/CameraExt.js","js/camera/CameraFocus.js","../camera/CameraShake.js","js/Entity.js","js/Splash.js","js/player/PlayerController.js","js/player/InteractionController.js","js/player/createPlayerEnv.js","../util.js","js/Traits.js","js/levels/demo.js","js/levels/defineLevel.js","js/levels/one.js","js/levels/two.js","js/levels/three.js","js/levels/index.js","js/LevelManager.js","js/TileCreation.js","js/layers.js","../Compositor.js","js/EntityCollider.js","js/Level.js","js/Sound.js","js/SoundContext.js","js/SpriteSheet.js","js/loaders.js","js/loadLevel.js","../Timer.js","js/editor/Mouse.js","js/editor/SpecTools.js","js/editor/Interaction.js","js/defineGameObject.js","js/chars/enemy_skins/enemy_cactus.js","js/chars/enemy_skins/enemy_target.js","js/chars/Enemy.js","js/chars/Unicorn.js","js/other/Ufo.js","js/pickables/ManaPot.bubbles.js","js/pickables/ManaPot.pylon.js","js/pickables/ManaPot.js","js/pickables/Portal.js","js/pickables/Rainbow.js","js/pickables/SpeedBooster.js","js/weapon/Bullet.js","js/other/Door.js","js/loadEntities.js","Picker.js","js/editor/Selection.js","js/Congratulations.js","js/Game.js","js/editor/Editor.js","../../node_modules/preact/dist/preact.esm.js","js/editor/Sidebar.js","index.js"],"names":["lerp","clamp","Matrix","constructor","grid","offset","get","x","y","col","undefined","set","value","remove","width","length","Symbol","iterator","tile","Vec2","clone","distance","vec","dist","Math","sqrt","pow","zero","v0","v1","t","rand","int","min","max","floor","float","random","val","ClipBox","pos","size","overlaps","box","bottom","top","left","right","contains","height","Camera","getBounds","CameraController","camera","extensions","cam","loadExtensions","map","ExtKlass","ext","name","update","deltaTime","time","alcohol","earthquake","forEach","arguments","CameraExt","controller","options","NoticeState","IDLE","STARTED","REACHED","RESTORED","CameraFocus","followEntity","noticeEntity","noticeState","noticeTime","noticeResolver","damping","defaultDamping","camOffset","defaultCamOffset","reachDistance","level","frozen","checkNotice","following","follow","entity","stopNotice","entityX","entityY","abs","notice","xOffset","NOTICE_STARTED","run","stop","Promise","res","onNoticeReach","setTimeout","onNoticeRestore","distToNotice","distToFollow","resume","ShakeType","DRUNK","EARTH","CameraShake","alcoFreq","alcoAmp","alcoRand","alcoDamping","shakingAmp","focus","shakeType","resetFocus","runShake","drunk","earth","newRand","sinusoid","sin","a","b","c","d","Sides","TOP","BOTTOM","LEFT","RIGHT","Trait","NAME","tasks","finalize","task","setEntity","queue","push","collides","us","them","obstruct","Entity","vel","bounds","lifetime","traits","idx","addTrait","trait","removeTrait","traitName","findIndex","splice","candidate","side","match","draw","voice","splash","text","timeout","color","background","textDiv","document","querySelector","blockDiv","resolve","style","innerHTML","classList","toggle","PlayerController","game","checkpoint","player","levelManager","on","FINISHED","onLevelFinished","bind","FAILED","onLevelFailed","totalScore","score","mana","kills","deaths","fireballsSelector","getElementById","scoreSelector","updateUiCounts","setPlayer","picker","onPick","striker","onStrike","killer","onKill","killable","onDead","pickable","bullet","selector","count","ceil","canStrikeFireballs","alive","dead","haveMana","canBoost","commitScore","resetScore","resetMana","entities","has","add","boosted","cancelBoost","paused","stuckDetector","lastPlayerX","samePosTime","stuck","restartLevel","isLastLevel","InteractionController","shiftPressed","setupHandlers","entityFactory","playerController","playerEnv","currentLevel","eventName","window","addEventListener","e","keyHandler","handleKeyEvent","code","jumpHandler","strikeFireballHandler","shiftKey","boostChecker","unicorn","jump","inAir","boost","repeat","down","type","fireball","skinName","ownerEntity","strike","keyState","start","cancel","createPlayerEnv","playerControl","interactionControl","debounce","func","wait","immediate","context","args","clearTimeout","apply","EventEmitter","getEmitter","instance","emitter","emitters","decorator","target","prototype","call","emit","events","Map","event","handler","handlers","all","WeakMap","Physics","applyGravity","tileCollider","checkX","checkY","gravity","AutoJump","willCollide","willCollideX","Solid","obstructs","y1","y2","x2","x1","Stackable","Impassable","activated","activate","deactivate","Run","speed","realSpeed","lastSpeed","originSpeed","onGround","Jump","falling","jumping","ready","duration","engageTime","requestTime","gracePeriod","speedBoost","velocity","enabled","fallingDown","jumpingUp","Killable","removeAfter","deadTime","kill","revive","delete","Killer","victim","Pickable","picked","pickTime","pick","Picker","Striker","reloadDuration","canStrike","strikeTime","isStriking","bulletBehavior","striked","N","getEntities","choose","Array","from","getRanges","h","mul","ranges","platformWidth","range","spec","images","gradient","camPos","step","step2","sounds","url","require","tileSprite","imageURL","tileW","tileH","frames","rect","tiles","initPlayButton","playBtn","visibility","onPlayClick","onPlayHover","onPlayUnhover","onKeyDown","removeEventListener","nextLevel","canvasSelector","init","loadLevel","checkFinish","startLevel","playLoop","volume","cameraController","timer","comp","stopLevel","sound","entries","defineLevel","spawn","onStart","afterUpdate","sky","back","front","onAfterUpdate","firstJumpReached","firstJumpX","nearFirstJump","id","createLevelOptions","howToSplash","howToSplasher","checkDoor1","targetIds","doorId","door","namedEntities","behavior","opened","allTargetsDead","every","open","distanceReached","nearDistance","LevelState","FINISH_ANIMATION","LevelEvents","LevelManager","loadLastLevel","showDemoLevel","lastLevel","localStorage","getItem","parseInt","levels","levelIdx","levelState","showSplash","finishDistance","fallDistance","levelSelector","runLevel","setItem","includes","checkFinished","checkFailed","distToFinish","animationEnd","onFinish","ufo","napEntity","death","fall","levelFailed","onFail","TileResolver","matrix","tileSize","toIndex","toIndexRange","pos1","pos2","pMax","getByIndex","indexX","indexY","getTilePos","searchByPosition","posX","posY","searchByRange","matches","TileCollider","createBackgroundLayer","createStaticBackgroundLayer","createSpriteLayer","createDebugLayer","resolver","tileGrid","buffer","createElement","getContext","redraw","clearRect","startX","endX","startY","endY","drawTile","drawBackgroundLayer","yOffset","drawImage","backgroundSprites","getGradientSteps","SkyImage","BackImage","FrontImage","drawGradient","createLinearGradient","steps","addColorStop","fillStyle","fillRect","drawImages","skyMargin","widthMetric","SkyCoordX","BackCoordX","FrontCoordX","SkyCoordY","BackCoordY","FrontCoordY","i","drawStaticBackgroundLayer","spriteBuffer","spriteBufferContext","drawSpriteLayer","editor","drawEntityBounds","camBounds","selectedEntity","selection","selectedTile","beginPath","strokeStyle","lineWidth","stroke","closePath","drawLayer","drawDebugLayer","Compositor","layers","addLayer","layer","EntityCollider","check","subject","getSideY","getSideX","Level","totalTime","freeze","Set","entityCollider","setTileGrid","setDistance","Sound","buf","createSource","isPlaying","timeoutId","source","gainNode","playOnce","rate","playbackRate","gain","loop","startPlaying","playing","SingleSoundContext","AudioContext","onMouseMove","state","loadBuffer","fetch","then","resp","arrayBuffer","decodeAudioData","loadSounds","soundsMap","buffers","createBufferSource","createGain","connect","destination","SoundContext","SpriteSheet","image","animations","defineAnim","animation","define","createAnim","loadImage","loadImages","loadSpriteSheet","frameLen","resolveFrame","frameIndex","frameName","Image","src","urlMap","names","Object","keys","urls","values","reduce","result","sheetSpec","sprites","frameSpec","animSpec","soundSpec","assign","createLevelLoader","setupTileGrid","levelSpec","createTileGrid","setupBackgrounds","backgroundImages","backgroundLayer","staticBackgroundLayer","setupEntities","tileSpec","createEntity","spriteLayer","setupSounds","expandTiles","expandSpan","xStart","xLen","yStart","yLen","xEnd","yEnd","expandRange","skinDeclared","slice","expandRanges","Timer","rafId","accumulatedTime","lastTime","updateProxy","enqueue","requestAnimationFrame","cancelAnimationFrame","MouseEvents","CLICK","RIGHTCLICK","DRAG","MOVE","WHEEL","DragState","START","DRAGGING","STOP","Mouse","downTime","downPos","dragging","initHandlers","toGamePos","canvas","handleMove","handleDown","handleUp","handleWheel","stopPropagation","preventDefault","offsetX","offsetY","Date","valueOf","handleDrag","handleClick","delta","drag","dragState","which","deltaX","deltaY","updateTileGrid","updateEntity","removeEntity","saveLocal","specUpdates","entitySpec","filter","sort","specUpdate","body","JSON","stringify","method","headers","json","SpecTools","InteractionMode","SELECT","TILE","ENTITY","Interaction","mode","mouse","onClick","onRightClick","onDrag","onMove","onWheel","onKeyPress","createEntityName","createEntitySkinName","createTileSkin","setMode","setCreateEntityName","entityName","setCreateTileSkin","setCreateEntitySkinName","pause","restart","setCamPos","pickEntity","pickTile","tryDrawTiles","tryDragCamera","tryDragEntity","drawTiles","removeTile","createTile","moveCamera","startPos","selectEntity","selectInPosition","Infinity","entityCreator","tileIndex","pickTileIndex","selectTile","clear","saveToFile","success","defineGameObject","getDrawFn","sprite","routeAnim","defaultOptions","spriteSpecs","soundSpecs","drawBounds","afterCreate","soundSets","create","skinSprite","find","spriteSpec","skinSounds","console","warn","availableSkins","s","BehaviorEnemy","attackDuration","cancelAttackAfter","inAttack","startAttackTime","attackTime","loadEnemy","idleAnim","attackAnim","deathAnim","enemy","UNICORN_SPRITE","UNICORN_SOUNDS","runAnim","jumpAnim","fallAnim","castAnim","runSound","dieSound","loadUnicorn","UFO_SPRITE","BehaviorUfo","catched","catchTime","spawned","catch","canCatch","ufoCenter","napCenter","abduct","ufoCenterX","alignTarget","UFO_SOUNDS","loadUfo","MANA_BUBBLES_SPRITE","MANA_PYLON_SPRITE","SOUNDS","Behavior","solid","loadManaPot","PORTAL","BehaviorPortal","destintaion","dest","loadPortal","portalAnim","portal","RAINBOW_SPRITE","RAINBOW_SOUNDS","BehaviorRainbow","loadRainbow","sparkAnim","rainbow","SPEED_BOOSTER","BehaviorSpeedBooster","boostTime","restoreSpeed","SPEED_SOUNDS","loadSpeedBooster","boosterAnim","speedbooster","FIREBALL_SPRITE","FIREBALL_SOUNDS","BehaviorBullet","destroyed","destroy","loadBullet","DOOR","BehaviorDoor","openedTime","openDuration","impassable","close","loadDoor","openAnim","loadEntities","entityFactories","addFactory","factory","tileResolver","disableTraits","physics","tileIndexes","pickTilePos","tilePos","Selection","empty","getSpec","doCongratulations","soundsPromise","pc","html","Game","loadResources","onLoad","onGameOver","Editor","interaction","storedLevelIdx","addDebugLayer","debugLayer","startEditing","origUpdate","onUpdate","VNode","stack","EMPTY_CHILDREN","nodeName","attributes","children","lastSimple","child","simple","pop","String","p","key","vnode","extend","obj","props","defer","cloneElement","IS_NON_DIMENSIONAL","items","enqueueRender","component","_dirty","debounceRendering","rerender","list","renderComponent","isSameNodeType","node","hydrating","splitText","_componentConstructor","isNamedNode","normalizedNodeName","toLowerCase","getNodeProps","defaultProps","createNode","isSvg","createElementNS","removeNode","parentNode","removeChild","setAccessor","old","className","cssText","test","__html","useCapture","replace","substring","eventProxy","_listeners","setProperty","removeAttribute","ns","removeAttributeNS","setAttributeNS","setAttribute","mounts","diffLevel","isSvgMode","flushMounts","afterMount","componentDidMount","diff","dom","mountAll","parent","componentRoot","ownerSVGElement","ret","idiff","appendChild","out","prevSvgMode","_component","nodeValue","createTextNode","replaceChild","recollectNodeTree","vnodeName","buildComponentFromVNode","firstChild","fc","vchildren","nextSibling","innerDiffNode","dangerouslySetInnerHTML","diffAttributes","isHydrating","originalChildren","childNodes","keyed","keyedLen","len","childrenLen","vlen","j","f","vchild","_child","__key","trim","insertBefore","unmountOnly","unmountComponent","ref","removeChildren","lastChild","next","previousSibling","attrs","components","collectComponent","createComponent","Ctor","inst","render","Component","doRender","nextBase","setComponentProps","opts","_disable","__ref","base","componentWillMount","componentWillReceiveProps","prevContext","prevProps","syncComponentUpdates","isChild","previousProps","previousState","prevState","previousContext","isUpdate","initialBase","initialChildComponent","skip","rendered","cbase","shouldComponentUpdate","componentWillUpdate","getChildContext","childComponent","toUnmount","childProps","_parentComponent","baseParent","componentRef","unshift","componentDidUpdate","_renderCallbacks","originalComponent","oldDom","isDirectOwner","isOwner","beforeUnmount","componentWillUnmount","inner","setState","callback","forceUpdate","merge","preact","renderSidebar","Sidebar","LevelSelector","onSelect","dataset","display","l","cursor","padding","backgroundColor","Save","save","btnStyle","marginRight","fontSize","marginTop","textAlign","Controls","justifyContent","Mode","modeStyle","selected","modeLabels","ModeItem","label","SelectionMode","Spec","rows","table","TileMode","tileSkinNames","EntityMode","nameSkinCombs","acc","skins","skin","isSelected","sidebarSelector"],"mappings":"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","file":"7d29b43bfd8bc451bcdd2a4de52c0734.map","sourcesContent":["export class Matrix {\n    constructor() {\n        this.grid = [];\n        this.offset = 100;\n    }\n\n    get(x, y) {\n        x += this.offset;\n        y += this.offset;\n\n        const col = this.grid[x];\n        if (col) {\n            return col[y];\n        }\n        return undefined;\n    }\n\n    set(x, y, value) {\n        x += this.offset;\n        y += this.offset;\n\n        if (!this.grid[x]) {\n            this.grid[x] = [];\n        }\n\n        this.grid[x][y] = value;\n    }\n\n    remove(x, y) {\n        x += this.offset;\n        y += this.offset;\n\n        delete this.grid[x][y];\n    }\n\n    width() {\n        return this.grid.length - this.offset;\n    }\n\n    *[Symbol.iterator]() {\n        for (let x = 0; x < this.grid.length; x++) {\n            if (this.grid[x]) {\n                for (let y = 0; y < this.grid[x].length; y++) {\n                    const tile = this.grid[x][y];\n                    if (tile) {\n                        yield ({ \n                            tile ,\n                            x: x - this.offset, \n                            y: y - this.offset\n                        })\n                    }\n                }\n            }\n        }\n    }\n}\n\nexport class Vec2 {\n    constructor(x, y) {\n        this.set(x, y);\n    }\n\n    set(x, y) {\n        this.x = x;\n        this.y = y;\n    }\n\n    clone() {\n        return new Vec2(this.x, this.y);\n    }\n\n    distance(vec) {\n        const dist = Math.sqrt(Math.pow(vec.x - this.x, 2) + Math.pow(vec.y - this.y, 2));\n        return dist;\n    }\n    \n    static zero = new Vec2(0, 0);\n}\n\nexport function lerp(v0, v1, t) {\n    return v0 * (1 - t) + v1 * t;\n}\n\nexport const rand = {\n    int: (min, max) => Math.floor(rand.float(min, ++max)),\n    float: (min, max) => Math.random() * (max - min) + min\n};\n\nexport function clamp(val, min, max) {\n    return val > max ? max : val < min ? min : val;\n}\n","export class ClipBox {\n    constructor(pos, size, offset) {\n        this.pos = pos;\n        this.size = size;\n        this.offset = offset;\n    }\n\n    overlaps(box) {\n        return (\n            this.bottom > box.top &&\n            this.top < box.bottom &&\n            this.left < box.right &&\n            this.right > box.left\n        );\n    }\n\n    contains(pos) {\n        return (\n            this.bottom >= pos.y &&\n            this.top <= pos.y &&\n            this.left <= pos.x &&\n            this.right >= pos.x\n        );\n    }\n\n    clone() {\n        return new ClipBox(this.pos.clone(), this.size.clone(), this.offset.clone());\n    }\n\n    get width() {\n        return this.size.x;\n    }\n\n    get height() {\n        return this.size.y;\n    }\n\n    get bottom() {\n        return this.pos.y + this.size.y + this.offset.y;\n    }\n\n    set bottom(y) {\n        this.pos.y = y - (this.size.y + this.offset.y);\n    }\n\n    get top() {\n        return this.pos.y + this.offset.y;\n    }\n\n    set top(y) {\n        this.pos.y = y - this.offset.y;\n    }\n\n    get left() {\n        return this.pos.x + this.offset.x;\n    }\n\n    set left(x) {\n        this.pos.x = x - this.offset.x;\n    }\n\n    get right() {\n        return this.pos.x + this.size.x + this.offset.x;\n    }\n\n    set right(x) {\n        this.pos.x = x - (this.size.x + this.offset.x);\n    }\n}\n","import { Vec2 } from '../math';\nimport { ClipBox } from '../ClipBox';\n\nexport class Camera {\n    constructor() {\n        this.pos = new Vec2(0, 0);\n        this.size = new Vec2(1024, 600);\n    }\n\n    getBounds() {\n        return new ClipBox(this.pos, this.size, Vec2.zero);\n    }\n}\n","export class CameraController {\n    constructor(camera, extensions) {\n        this.cam = camera;\n        this.extensions = this.loadExtensions(extensions);\n    }\n\n    loadExtensions(extensions) {\n        return extensions.map(ExtKlass => {\n            const ext = new ExtKlass(this);\n            this[ext.name] = ext;\n            return ext;\n        });\n    }\n\n    update(deltaTime, time, { alcohol = false, earthquake = false } = {}) {\n        this.extensions.forEach(ext => ext.update(...arguments));\n    }\n}\n\n","export class CameraExt {\n    constructor(name, controller) {\n        this.name = name;\n        this.controller = controller;\n    }\n\n    get cam() {\n        return this.controller.cam;\n    }\n\n    update(deltaTime, time, options = {}) {}\n}\n","import { CameraExt } from './CameraExt';\nimport { lerp, Vec2 } from '../math';\n\nconst NoticeState = {\n    IDLE: Symbol('IDLE'),\n    STARTED: Symbol('STARTED'),\n    REACHED: Symbol('REACHED'),\n    RESTORED: Symbol('RESTORED')\n}\n\nexport class CameraFocus extends CameraExt {\n    constructor(controller) {\n        super('focus', controller);\n\n        this.followEntity = undefined;\n        this.noticeEntity = undefined;\n\n        this.noticeState = NoticeState.IDLE;\n\n        this.noticeTime = undefined;\n        this.noticeResolver = undefined;\n\n        this.damping = this.defaultDamping;\n        this.camOffset = this.defaultCamOffset;\n        this.reachDistance = 500;\n    }\n\n    get defaultDamping() {\n        return 0.3;\n    }\n\n    get defaultCamOffset() {\n        return new Vec2(0, 100);\n    }\n\n    update(deltaTime, time, level) {\n        if(level.frozen) {\n            return;\n        }\n\n        this.checkNotice(deltaTime, time);\n        this.following(deltaTime, time);\n    }\n\n    follow(entity) {\n        if (this.noticeState !== NoticeState.IDLE) {\n            this.stopNotice();\n        }\n\n        this.followEntity = entity;\n        this.entity = entity;\n\n        this.cam.pos.x = entity.pos.x;\n        this.cam.pos.y = 0\n    }\n\n    following(deltaTime, time) {\n        if (!this.entity) {\n            return;\n        }\n\n        let entityX = this.entity.pos.x - this.camOffset.x;\n        let entityY = this.entity.pos.y;\n\n        if (Math.abs(this.cam.pos.x - entityX) > 0.1) {\n            entityX = lerp(this.cam.pos.x, entityX, 1 / this.damping * deltaTime);\n        }\n\n        if (Math.abs(this.cam.pos.y - entityY) > 0.1) {\n            entityY = lerp(this.cam.pos.y, entityY, 1 / this.damping * deltaTime);\n        }\n\n        this.cam.pos.x = entityX;\n        this.cam.pos.y = Math.min(entityY, 0);\n    }\n\n    notice(noticeEntity, time, xOffset) {\n        this.noticeState = NoticeState.NOTICE_STARTED;\n\n        this.noticeEntity = noticeEntity;\n        this.noticeTime = time;\n        this.entity = noticeEntity;\n        this.followEntity.run.stop();\n\n        if(xOffset) {\n            this.camOffset.x = xOffset;\n        }\n\n        return new Promise(res => {\n            this.noticeResolver = res;\n        });\n    }\n\n    onNoticeReach() {\n        this.noticeState = NoticeState.REACHED;\n\n        setTimeout(() => {\n            this.entity = this.followEntity;\n        }, this.noticeTime);\n    }\n\n    onNoticeRestore(time) {\n        this.stopNotice();        \n    }\n\n    checkNotice(deltaTime, time) {\n        if (this.noticeState === NoticeState.STARTED) {\n            const distToNotice = Math.abs(this.entity.pos.x - this.cam.pos.x);\n            if (distToNotice < this.reachDistance) {\n                this.onNoticeReach();\n            }\n        }\n\n        if (this.noticeState === NoticeState.REACHED) {\n            const distToFollow = Math.abs(this.followEntity.pos.x - this.cam.pos.x);\n            if (distToFollow < this.reachDistance) {\n                this.onNoticeRestore(time);\n            }\n        }\n    }\n\n    stopNotice() {\n        this.noticeState = NoticeState.IDLE;\n        this.followEntity.run.resume();\n        this.camOffset = this.defaultCamOffset;\n        \n        this.noticeResolver();\n\n        this.noticeTime = undefined;\n        this.noticeResolver = undefined;\n    }\n}\n","import { rand, lerp } from '../math';\nimport { CameraExt } from './CameraExt';\n\nexport const ShakeType = {\n    DRUNK: Symbol('DRUNK'),\n    EARTH: Symbol('EARTH')\n};\n\nexport class CameraShake extends CameraExt {\n    constructor(controller) {\n        super('shake', controller);\n\n        this.alcoFreq = 1;\n        this.alcoAmp = 1;\n        this.alcoRand = 1;\n        this.alcoDamping = 1;\n\n        this.shakingAmp = 50;\n    }\n\n    get entity() {\n        return this.controller.focus.entity;\n    }\n\n    get camOffset() {\n        return this.controller.focus.camOffset;\n    }\n\n    update(deltaTime, time, { shakeType } = { }) {\n        if (!shakeType) {\n            this.resetFocus();\n            return;\n        }\n        this.runShake(shakeType, deltaTime, time);\n    }\n\n    runShake(shakeType, deltaTime, time) {\n        switch (shakeType) {\n            case ShakeType.DRUNK:\n                this.drunk(deltaTime, time);\n                break;\n            case ShakeType.EARTH:\n                this.earth(deltaTime, time);\n            default:\n                break;\n        }\n    }\n\n    resetFocus() {\n        this.controller.focus.damping = this.controller.focus.defaultDamping;\n        this.controller.focus.camOffset = this.controller.focus.defaultCamOffset;\n    }\n\n    drunk(deltaTime, time) {\n        this.controller.focus.damping = this.alcoDamping;\n\n        const newRand = this.alcoRand * rand.float(0, 1);\n        this.alcoRand = lerp(this.alcoRand, newRand, deltaTime);\n\n        this.cam.pos.y =\n            sinusoid(\n                time / 1000,\n                0,\n                Math.sin(this.alcoRand) * this.alcoAmp,\n                Math.sin(this.alcoRand) * this.alcoFreq,\n                0\n            ) * 100;\n        this.camOffset.x =\n            Math.sin(time / 1000) + Math.sin(this.alcoRand) * 500;\n    }\n\n    earth(deltaTime, time) {\n        this.cam.pos.x =\n            this.entity.pos.x -\n            this.camOffset.x +\n            rand.float(0, this.shakingAmp);\n\n        this.cam.pos.y = rand.float(0, this.shakingAmp);\n    }\n}\n\n\nfunction sinusoid(t, a, b, c, d) {\n    return a + b * Math.sin(c * t + d);\n}\n","import {Vec2} from './math';\nimport {ClipBox} from './ClipBox';\n\nexport const Sides = {\n    TOP: Symbol('TOP'),\n    BOTTOM: Symbol('BOTTOM'),\n    LEFT: Symbol('LEFT'),\n    RIGHT: Symbol('RIGHT'),\n};\n\nexport class Trait {\n    constructor(name) {\n        this.NAME = name;\n        this.tasks = [];\n        this.entity = undefined;\n    }\n\n    finalize() {\n        this.tasks.forEach(task => task());\n        this.tasks.length = 0;\n    }\n\n    setEntity(entity) {\n        this.entity = entity;\n    }\n\n    queue(task) {\n        this.tasks.push(task);\n    }\n\n    collides(us, them) {\n\n    }\n\n    obstruct() {\n\n    }\n\n    update() {\n\n    }\n}\n\nexport class Entity {\n    constructor(name) {\n        this.name = name;\n        this.pos = new Vec2(0, 0);\n        this.vel = new Vec2(0, 0);\n        this.size = new Vec2(0, 0);\n        this.offset = new Vec2(0, 0);\n        this.bounds = new ClipBox(this.pos, this.size, this.offset);\n        this.lifetime = 0;\n\n        this.traits = [];\n\n        this.idx = undefined;\n    }\n\n    addTrait(trait) {\n        trait.setEntity(this);\n        \n        this.traits.push(trait);\n        this[trait.NAME] = trait;\n    }\n\n    removeTrait(traitName) {\n        const idx = this.traits.findIndex(trait => trait.NAME === traitName);\n        \n        if(idx === -1) {\n            return;\n        }\n\n        this.traits.splice(idx, 1);\n        this[traitName] = undefined;\n    }\n\n    collides(candidate, side) {\n        this.traits.forEach(trait => {\n            trait.collides(this, candidate, side);\n        });\n    }\n\n    obstruct(side, match) {\n        this.traits.forEach(trait => {\n            trait.obstruct(this, side, match);\n        });\n    }\n\n    draw() {\n\n    }\n\n    voice(entity) {\n\n    }\n\n    finalize() {\n        this.traits.forEach(trait => {\n            trait.finalize();\n        });\n    }\n\n    update(deltaTime, level) {\n        this.voice && this.voice(this);\n        \n        this.traits.forEach(trait => {\n            trait.update(this, deltaTime, level);\n        });\n\n        this.lifetime += deltaTime;\n    }\n}\n","export function splash(text, {timeout = 1000, size = 100, color = 'white', background = 'transparent'} = {}) {\n    const textDiv = document.querySelector('.splash-text');\n    const blockDiv = document.querySelector('.splash-block');\n    \n    return new Promise(resolve => {        \n        blockDiv.style = `background-color: ${background}`;\n\n        textDiv.style = `font-size: ${size}pt; color: ${color};`;\n        textDiv.innerHTML = text;\n        textDiv.classList.toggle('splash-text--hide', false);            \n        textDiv.classList.toggle('splash-text--show', true);\n\n        setTimeout(() => {\n            textDiv.classList.toggle('splash-text--show', false);            \n            textDiv.classList.toggle('splash-text--hide', true);            \n            setTimeout(() => {\n                resolve();                 \n            }, 300);\n        }, timeout);\n    })\n}\n","import { Trait } from '../Entity';\nimport { LevelEvents } from '../LevelManager';\nimport { Vec2 } from '../math';\nimport { splash } from '../Splash';\n\nexport class PlayerController extends Trait {\n    constructor(game) {\n        super('playerController');\n        this.game = game;\n        this.checkpoint = new Vec2(0, 0);\n        this.player = undefined;\n\n        this.game.levelManager.on(LevelEvents.FINISHED, this.onLevelFinished.bind(this));\n        this.game.levelManager.on(LevelEvents.FAILED, this.onLevelFailed.bind(this));\n\n        this.totalScore = 0;\n        this.score = 0;\n        this.mana = 0;\n        this.kills = 0;\n        this.deaths = 0;\n\n        this.fireballsSelector = document.getElementById('current-fireballs');\n        this.scoreSelector = document.getElementById('unicorn-score');\n\n        this.updateUiCounts(this.fireballsSelector, this.mana);\n    }\n\n    setPlayer(entity) {\n        this.player = entity;\n\n        this.player.picker.on('pick', this.onPick.bind(this));\n        this.player.striker.on('strike', this.onStrike.bind(this));\n        this.player.killer.on('kill', this.onKill.bind(this));\n        this.player.killable.on('dead', this.onDead.bind(this));\n    }\n\n    onPick(picker, pickable) {\n        if (pickable.name === 'rainbow') {\n            this.score += 50;\n            this.updateUiCounts(this.scoreSelector, this.totalScore + this.score);\n        }\n        if (pickable.name === 'manaPot') {\n            this.mana += 2;\n            this.updateUiCounts(this.fireballsSelector, this.mana);\n        }\n    }\n\n    onStrike(bullet) {\n        if (bullet.name === 'bullet') {\n            this.mana--;\n        }\n        this.updateUiCounts(this.fireballsSelector, this.mana);\n    }\n\n    onKill() {\n        this.kills++;\n    }\n\n    onDead() {\n        this.deaths++;\n    }\n\n    updateUiCounts(selector, count) {\n        setTimeout(() => {\n            selector.innerHTML = Math.ceil(count);\n        }, 0);\n    }\n\n    canStrikeFireballs() {\n        const alive = this.player && !this.player.killable.dead;\n        const haveMana = this.mana > 0;\n\n        if (!haveMana) {\n            splash('no mana', {\n                timeout: 1000,\n                size: 30\n            });\n        }\n\n        return alive && haveMana;\n    }\n\n    canBoost() {\n        const alive = this.player && !this.player.killable.dead;\n        const haveMana = this.mana > 0;\n\n        if (alive && this.mana === 0) {\n            splash('no mana', {\n                timeout: 1000,\n                size: 30\n            });\n        }\n\n        return alive && haveMana;\n    }\n\n    commitScore() {\n        this.totalScore += this.score;\n        this.resetScore();\n    }\n\n    resetScore() {\n        this.score = 0;\n        this.updateUiCounts(this.scoreSelector, this.totalScore + this.score);\n    }\n\n    resetMana() {\n        this.mana = 0;\n        this.updateUiCounts(this.fireballsSelector, this.mana);\n    }\n\n    update(entity, deltaTime, level) {\n        if (!this.player) {\n            return;\n        }\n\n        if (!this.player.killable.dead && !level.entities.has(this.player)) {\n            this.player.pos.set(this.checkpoint.x, this.checkpoint.y);\n            level.entities.add(this.player);\n            return;\n        }\n\n        if (this.player.run.boosted) {\n            this.mana -= deltaTime;\n\n            if (this.mana <= 0) {\n                this.player.run.cancelBoost();\n                this.mana = 0;\n            }\n\n            this.updateUiCounts(this.fireballsSelector, this.mana);\n        }\n\n        if(!level.paused) {\n            this.stuckDetector(entity, deltaTime, level);\n        }\n    }\n\n    stuckDetector(entity, deltaTime, level) {\n        if(this.lastPlayerX === this.player.pos.x) {\n            this.samePosTime += deltaTime;\n        } else {\n            this.samePosTime = 0;\n            this.stuck = false;\n        }\n\n        if (!this.stuck && this.samePosTime > 2) {\n            this.stuck = true;\n            this.game.levelManager.restartLevel();\n            return;\n        }\n\n        this.lastPlayerX = this.player.pos.x;\n    }\n\n    onLevelFinished({ isLastLevel }) {\n        this.commitScore();\n        this.resetMana();\n    }\n\n    onLevelFailed() {\n        this.resetScore();\n        this.resetMana();\n    }\n}\n","import { Trait } from '../Entity';\n\nexport class InteractionController extends Trait {\n    constructor(game) {\n        super('interactionController');\n\n        this.game = game;\n        this.shiftPressed = false;\n\n        this.setupHandlers();\n    }\n\n    get entityFactory() {\n        return this.game.entityFactory;\n    }\n\n    get playerController() {\n        return this.game.playerEnv.playerController;\n    }\n\n    get currentLevel() {\n        return this.game.levelManager.level;\n    }\n\n    setupHandlers() {\n        ['keydown', 'keyup'].forEach(eventName => {\n            window.addEventListener(eventName, e => {\n                this.keyHandler(e);\n            });\n        });\n    }\n\n    keyHandler(e) {\n        if (!this.playerController.player) {\n            return;\n        }\n\n        this.handleKeyEvent(e);\n\n        switch (e.code) {\n            case 'Space':\n                this.jumpHandler(e);\n                break;\n            case 'KeyF':\n                this.strikeFireballHandler(e);\n            default:\n                break;\n        }\n    }\n\n    handleKeyEvent(e) {\n        const shiftPressed = e.shiftKey;\n        this.shiftPressed = shiftPressed;\n    }\n\n    boostChecker() {\n        const unicorn = this.playerController.player;\n\n        if (unicorn.killable.dead || unicorn.jump.inAir) {\n            unicorn.run.cancelBoost();\n            return;\n        }\n\n        if (\n            this.shiftPressed &&\n            this.playerController.canBoost() &&\n            !unicorn.run.boosted\n        ) {\n            unicorn.run.boost(30000);\n        }\n\n        if (!this.shiftPressed && unicorn.run.boosted) {\n            unicorn.run.cancelBoost();\n        }\n    }\n\n    strikeFireballHandler(e) {\n        if (e.repeat) {\n            return;\n        }\n\n        const down = e.type === 'keydown';\n\n        if (!down || !this.playerController.canStrikeFireballs()) {\n            return;\n        }\n\n        const unicorn = this.playerController.player;\n        const fireball = this.entityFactory.bullet({\n            skinName: 'default',\n            ownerEntity: unicorn\n        });\n        unicorn.striker.strike(fireball, this.currentLevel);\n    }\n\n    jumpHandler(e) {\n        const unicorn = this.playerController.player;\n        const keyState = e.type === 'keydown' ? 1 : 0;\n\n        if (unicorn.killable.dead) {\n            return;\n        }\n\n        if (keyState > 0) {\n            unicorn.jump.start();\n        } else {\n            unicorn.jump.cancel();\n        }\n    }\n\n    update() {\n        if (!this.playerController.player) {\n            return;\n        }\n\n        this.boostChecker();\n    }\n}\n","import { Entity } from '../Entity';\nimport { PlayerController } from './PlayerController';\nimport { InteractionController } from './InteractionController';\n\nexport function createPlayerEnv(game) {\n    const playerEnv = new Entity('player');\n\n    const playerControl = new PlayerController(game);\n    playerControl.checkpoint.set(96, 64);\n    playerEnv.addTrait(playerControl);\n\n    const interactionControl = new InteractionController(game);\n    playerEnv.addTrait(interactionControl);\n\n    return playerEnv;\n}\n","export function debounce(func, wait, immediate) {\n    let timeout;\n    return function() {\n        const context = this,\n            args = arguments;\n        clearTimeout(timeout);\n        timeout = setTimeout(function() {\n            timeout = undefined;\n            if (!immediate) func.apply(context, args);\n        }, wait);\n        if (immediate && !timeout) func.apply(context, args);\n    };\n}\n\nexport class EventEmitter {\n    static emitters = new WeakMap();\n\n    static getEmitter(instance) {\n        let emitter = EventEmitter.emitters.get(instance);\n\n        if (!emitter) {\n            emitter = new EventEmitter();\n            EventEmitter.emitters.set(instance, emitter);\n        }\n\n        return emitter;\n    }\n\n    static decorator(target) {\n        target.prototype.on = function on(...args) {\n            const emitter = EventEmitter.getEmitter(this);\n            emitter.on.call(emitter, ...args);\n        }\n\n        target.prototype.emit = function emit(...args) {\n            const emitter = EventEmitter.getEmitter(this);\n            emitter.emit.call(emitter, ...args);\n        }\n    }\n\n    constructor(instance) {\n        this.events = new Map();\n    }\n\n    on(event, handler) {\n        let handlers = this.events.get(event);\n\n        if (handlers) {\n            handlers.push(handler);\n        } else {\n            handlers = [handler];\n            this.events.set(event, handlers);\n        }\n    }\n\n    async emit(event, ...args) {\n        const handlers = this.events.get(event);\n\n        if (!handlers) {\n            return;\n        }\n\n        for (const handler of handlers) {\n            handler(...args);\n        }\n\n        await Promise.all(handlers.map(handler => handler.bind(handler, ...args)));\n    }\n}\n","import { Trait } from './Entity';\nimport { Sides } from './Entity';\nimport { lerp } from './math';\nimport { EventEmitter } from './util';\n\nexport class Physics extends Trait {\n    constructor({ applyGravity } = { applyGravity: true }) {\n        super('physics');\n\n        this.applyGravity = applyGravity;\n    }\n\n    update(entity, deltaTime, level) {\n        entity.pos.x += entity.vel.x * deltaTime;\n        level.tileCollider.checkX(entity);\n\n        entity.pos.y += entity.vel.y * deltaTime;\n        level.tileCollider.checkY(entity);\n\n        if (this.applyGravity) {\n            entity.vel.y += level.gravity * deltaTime;\n        }\n    }\n}\n\nexport class AutoJump extends Trait {\n    constructor() {\n        super('autojump');\n    }\n\n    update(entity, deltaTime, level) {\n        const distance = entity.vel.x * 0.3;\n        const willCollide = level.tileCollider.willCollideX(entity, distance);\n\n        if (willCollide) {\n            entity.jump.start();\n            setTimeout(() => entity.jump.cancel(), 300);\n        }\n    }\n}\n\nexport class Solid extends Trait {\n    constructor() {\n        super('solid');\n        this.obstructs = true;\n    }\n\n    obstruct(entity, side, match) {\n        if (!this.obstructs) {\n            return;\n        }\n\n        if (side === Sides.BOTTOM) {\n            entity.bounds.bottom = match.y1;\n            entity.vel.y = 0;\n        } else if (side === Sides.TOP) {\n            entity.bounds.top = match.y2;\n            entity.vel.y = 0;\n        } else if (side === Sides.LEFT) {\n            entity.bounds.left = match.x2;\n            entity.vel.x = 0;\n        } else if (side === Sides.RIGHT) {\n            entity.bounds.right = match.x1;\n            entity.vel.x = 0;\n        }\n    }\n}\n\nexport class Stackable extends Trait {\n    constructor() {\n        super('stackable');\n    }\n\n    collides(us, them, side) {\n        if (us.name !== them.name) {\n            return;\n        }\n\n        if (this.killable && this.killable.dead) {\n            return;\n        }\n\n        if (us.vel.y > 0 && side === Sides.BOTTOM) {\n            us.bounds.bottom = them.bounds.top;\n            us.vel.y = 0;\n        } else if (us.vel.y < 0 && side === Sides.TOP) {\n            us.bounds.top = them.bounds.bottom;\n            us.vel.y = 0;\n        } else if (us.vel.x > 0 && side === Sides.RIGHT) {\n            us.bounds.right = them.bounds.left;\n            us.vel.x = 0;\n        } else if (us.vel.x < 0 && side === Sides.LEFT) {\n            us.bounds.left = them.bounds.right;\n            us.vel.x = 0;\n        }\n    }\n}\n\nexport class Impassable extends Trait {\n    constructor() {\n        super('impassable');\n        this.activated = true;\n    }\n\n    activate() {\n        this.queue(() => (this.activated = true));\n    }\n\n    deactivate() {\n        this.queue(() => (this.activated = false));\n    }\n\n    collides(us, them, side) {\n        if (!this.activated) {\n            return;\n        }\n\n        if (side === Sides.BOTTOM) {\n            them.bounds.top = us.bounds.bottom;\n            them.vel.y = 0;\n        } else if (side === Sides.TOP) {\n            them.bounds.bottom = us.bounds.top;\n            them.vel.y = 0;\n        } else if (side === Sides.RIGHT) {\n            them.bounds.left = us.bounds.right;\n            them.vel.x = 0;\n        } else if (side === Sides.LEFT) {\n            them.bounds.right = us.bounds.left;\n            them.vel.x = 0;\n        }\n\n        them.obstruct(them, side);\n    }\n}\n\nexport class Run extends Trait {\n    constructor({ speed = 15000 }) {\n        super('run');\n\n        this.speed = speed;\n        this.realSpeed = this.speed;\n        this.lastSpeed = this.speed;\n        this.originSpeed = undefined;\n\n        this.damping = 1;\n        this.distance = 0;\n        this.onGround = false;\n        this.boosted = false;\n    }\n\n    stop() {\n        if (this.originSpeed) {\n            this.resume();\n        }\n\n        this.originSpeed = this.speed;\n        this.speed = 1;\n    }\n\n    resume() {\n        if (!this.originSpeed) {\n            return;\n        }\n\n        this.speed = this.originSpeed;\n        this.originSpeed = undefined;\n    }\n\n    boost(speed) {\n        if (this.boosted) {\n            return;\n        }\n\n        this.originSpeed = this.speed;\n        this.speed = this.originSpeed + speed;\n        this.boosted = true;\n    }\n\n    cancelBoost() {\n        if (!this.boosted) {\n            return;\n        }\n\n        this.speed = this.originSpeed;\n        this.originSpeed = undefined;\n        this.boosted = false;\n    }\n\n    update(entity, deltaTime) {\n        this.realSpeed = this.speed;\n\n        if (Math.abs(this.lastSpeed - this.speed) > 0) {\n            this.realSpeed = lerp(\n                this.lastSpeed,\n                this.speed,\n                1 / this.damping * deltaTime\n            );\n        }\n\n        entity.vel.x = this.realSpeed * deltaTime;\n        this.distance += Math.abs(entity.vel.x) * deltaTime;\n        this.lastSpeed = this.realSpeed;\n    }\n}\n\nexport class Jump extends Trait {\n    constructor() {\n        super('jump');\n\n        this.falling = false;\n        this.jumping = false;\n\n        this.ready = 0;\n        this.duration = 0.8;\n        this.engageTime = 0;\n        this.requestTime = 0;\n        this.gracePeriod = 0.1;\n        this.speedBoost = 0.3;\n        this.velocity = 200;\n\n        this.enabled = true;\n    }\n\n    get fallingDown() {\n        return this.ready < 0 && this.falling;\n    }\n\n    get jumpingUp() {\n        return this.ready < 0 && this.jumping;\n    }\n\n    get inAir() {\n        return this.fallingDown || this.jumpingUp;\n    }\n\n    start() {\n        if (!this.enabled) {\n            return;\n        }\n\n        this.requestTime = this.gracePeriod;\n    }\n\n    cancel() {\n        if (!this.enabled) {\n            return;\n        }\n        this.engageTime = 0;\n        this.requestTime = 0;\n    }\n\n    obstruct(entity, side) {\n        if (side === Sides.BOTTOM) {\n            this.ready = 1;\n            this.falling = false;\n        } else if (side === Sides.TOP) {\n            this.cancel();\n        }\n    }\n\n    update(entity, deltaTime) {\n        if (this.ready < 0 && entity.vel.y < 0) {\n            this.jumping = true;\n            this.falling = false;\n        } else if (this.ready < 0 && entity.vel.y > 0) {\n            this.jumping = false;\n            this.falling = true;\n        }\n\n        if (this.requestTime > 0) {\n            if (this.ready > 0) {\n                this.engageTime = this.duration;\n                this.requestTime = 0;\n            }\n\n            this.requestTime -= deltaTime;\n        }\n\n        if (this.engageTime > 0) {\n            entity.vel.y = -(this.velocity + Math.abs(entity.vel.x) * this.speedBoost);\n            this.engageTime -= deltaTime;\n            if (this.engageTime < 0) {\n                this.engageTime = 0;\n            }\n        }\n\n        this.ready--;\n    }\n}\n\n@EventEmitter.decorator\nexport class Killable extends Trait {\n    constructor({ removeAfter } = {}) {\n        super('killable');\n        this.dead = false;\n        this.deadTime = 0;\n        this.removeAfter = removeAfter !== undefined ? removeAfter : 0.3;\n    }\n\n    kill() {\n        if(this.dead) {\n            return;\n        }\n        \n        this.emit('dead');\n        this.queue(() => (this.dead = true));\n    }\n\n    revive() {\n        this.dead = false;\n        this.deadTime = 0;\n    }\n\n    update(entity, deltaTime, level) {\n        if (this.dead) {\n            entity.vel.x = entity.vel.x * 0.3;\n\n            this.deadTime += deltaTime;\n            if (this.deadTime > this.removeAfter) {\n                this.queue(() => {\n                    level.entities.delete(entity);\n                });\n            }\n\n            return;\n        }\n    }\n}\n\n@EventEmitter.decorator\nexport class Killer extends Trait {\n    constructor() {\n        super('killer');\n    }\n\n    kill(victim) {\n        this.emit('kill', victim);\n    }\n}\n\n@EventEmitter.decorator\nexport class Pickable extends Trait {\n    constructor({ onPick } = {}) {\n        super('pickable');\n        this.picked = false;\n        this.pickTime = 0;\n        this.removeAfter = 0.3;\n\n        onPick && this.on('pick', onPick);\n    }\n\n    pick() {\n        this.emit('pick');\n        this.queue(() => (this.picked = true));\n    }\n\n    update(entity, deltaTime, level) {\n        if (this.picked) {\n            this.pickTime += deltaTime;\n            if (this.pickTime > this.removeAfter) {\n                this.queue(() => {\n                    level.entities.delete(entity);\n                });\n            }\n        }\n    }\n}\n\n@EventEmitter.decorator\nexport class Picker extends Trait {\n    constructor() {\n        super('picker');\n    }\n\n    collides(us, them) {\n        if (!them.pickable || them.pickable.picked) {\n            return;\n        }\n\n        this.emit('pick', us, them)\n    }\n}\n\n@EventEmitter.decorator\nexport class Striker extends Trait {\n    constructor() {\n        super('striker');\n\n        this.reloadDuration = 0.1;\n        this.canStrike = true;\n        this.strikeTime = 0;\n    }\n\n    isStriking() {\n        return this.strikeTime > 0 && this.strikeTime < this.reloadDuration;\n    }\n\n    strike(bullet, level) {\n        if (!this.canStrike) {\n            return;\n        }\n\n        bullet.pos.x = this.entity.pos.x + 100;\n        bullet.pos.y = this.entity.pos.y + 40;\n        bullet.vel.x = 1000;\n        level.entities.add(bullet);\n\n        this.canStrike = false;\n        this.strikeTime = 0;\n\n        bullet.bulletBehavior.striked();\n        this.emit('strike', bullet);\n    }\n\n    update(entity, deltaTime, level) {\n        if (this.canStrike) {\n            return;\n        }\n\n        this.strikeTime += deltaTime;\n\n        if (this.strikeTime > this.reloadDuration) {\n            this.canStrike = true;\n            this.strikeTime = 0;\n        }\n    }\n}\n","import { rand, clamp } from '../math';\nimport { createPlayerEnv } from '../player/createPlayerEnv';\nimport { AutoJump, Physics } from '../Traits';\n\nconst N = 100;\n\nfunction getEntities() {\n    const choose = ['speedBooster'];\n    // const choose = ['rainbow', 'speedBooster', 'portal'];\n    // const choose = ['portal'];\n\n    const entities = Array.from(Array(N)).map((val, idx) => ({\n        name: choose[rand.int(0, choose.length - 1)],\n        pos: [idx * rand.int(1000, 2000) + 500, -1000]\n    }));\n\n    return entities;\n}\n\nfunction getRanges() {\n    let h = 5;\n    let mul = 1;\n    let x = 0;\n\n    const ranges = Array.from(Array(N)).map(() => {\n        mul = h === -3 ? 1 : mul;\n        mul = h === 9 ? -1 : mul;\n\n        const platformWidth = rand.int(15, 30);\n\n        const range = [x, platformWidth, h, 1];\n        h = h + mul;\n        x = x + platformWidth + 1;\n\n        return range;\n    });\n\n    return ranges;\n}\n\nconst ranges = getRanges();\nconst entities = getEntities();\n\nconst spec = {\n    background: {\n        images: {},\n        gradient: camPos => {\n            const step = ['#ffffff', 0];\n            const step2 = ['#ffffff', 1];\n            return [step, step2];\n        }\n    },\n    sounds: [\n        {\n            url: require('../../sounds/music/demo.wav'),\n            name: 'music'\n        }\n    ],\n    tileSprite: {\n        imageURL: require('../../img/tiles/trak2_wall1a.png'),\n        tileW: 60,\n        tileH: 60,\n        frames: [\n            {\n                name: 'default',\n                rect: [0, 0, 60, 60]\n            }\n        ]\n    },\n    tiles: ranges,\n    entities\n};\n\nfunction initPlayButton(game) {\n    const playBtn = document.querySelector('.play-btn');\n    playBtn.style.visibility = 'visible';\n\n    playBtn.addEventListener('click', onPlayClick);\n    playBtn.addEventListener('mouseover', onPlayHover);\n    playBtn.addEventListener('mouseout', onPlayUnhover);\n    window.addEventListener('keydown', onKeyDown);\n\n    async function start() {\n        document.querySelector('.play-block').remove();\n        window.removeEventListener('keydown', onKeyDown);\n\n        await game.levelManager.nextLevel();\n        game.canvasSelector.classList.toggle('blur', false);\n    }\n\n    function onPlayClick() {\n        start();\n    }\n\n    function onPlayHover() {\n        game.canvasSelector.classList.toggle('blur', true);\n    }\n\n    function onPlayUnhover() {\n        game.canvasSelector.classList.toggle('blur', false);\n    }\n\n    function onKeyDown(e) {\n        if (e.code === 'Space') {\n            start();\n        }\n    }\n}\n\nasync function init(game) {\n    const level = await game.loadLevel(spec);\n\n    const unicorn = game.entityFactory.unicorn({ speed: 20000 });\n    unicorn.addTrait(new AutoJump());\n\n    const playerEnv = createPlayerEnv(game);\n    level.entities.add(playerEnv);\n    level.entities.forEach(entity => entity.addTrait(new Physics()));\n\n    initPlayButton(game);\n\n    function checkFinish() {\n        if (unicorn.pos.x > level.distance) {\n            unicorn.pos.x = 64;\n            unicorn.pos.y = 64;\n        }\n    }\n\n    function startLevel() {\n        level.sounds.get('music').playLoop({ volume: 0.8 });\n\n        playerEnv.playerController.setPlayer(unicorn);\n        game.cameraController.focus.follow(unicorn);\n\n        game.timer.update = (deltaTime, time) => {\n            checkFinish();\n            level.update(deltaTime);\n            game.cameraController.update(deltaTime, time, level);\n            level.comp.draw(game.context, game.camera);\n        };\n    }\n\n    function stopLevel() {\n        for (const [name, sound] of level.sounds.entries()) {\n            sound.stop();\n        }\n    }\n\n    return {\n        level,\n        startLevel,\n        stopLevel\n    };\n}\n\nexport default {\n    spec,\n    init\n};\n","export function defineLevel(spec, options) {\n    async function init(game) {\n        const level = await game.loadLevel(spec);\n        const playerEnv = game.playerEnv;\n        const unicorn = game.entityFactory.unicorn();\n        level.entities.add(playerEnv);\n\n        playerEnv.playerController.checkpoint.set(spec.spawn[0], spec.spawn[1]);\n\n        function startLevel() {\n            options.onStart && options.onStart(game, level);\n\n            playerEnv.playerController.setPlayer(unicorn);\n            game.cameraController.focus.follow(unicorn);\n\n            game.timer.update = (deltaTime, time) => {\n                level.update(deltaTime);\n                game.levelManager.update(deltaTime, time, level);\n                game.cameraController.update(deltaTime, time, level);\n                level.comp.draw(game.context, game.camera);\n\n                options.afterUpdate && options.afterUpdate(game, level);\n            };\n        }\n\n        function stopLevel() {\n            for (const [name, sound] of level.sounds.entries()) {\n                sound.stop();\n            }\n        }\n\n        return {\n            level,\n            startLevel,\n            stopLevel\n        };\n    }\n\n    return {\n        spec,\n        init\n    };\n}\n","import { splash } from \"../Splash\";\nimport { Striker } from \"../Traits\";\nimport { defineLevel } from \"./defineLevel\";\nimport { clamp } from \"../math\";\n\nconst spec = {\n  name: \"warm up\",\n  spawn: [96, 64],\n  background: {\n    images: {\n      sky: require(\"../../img/backgrounds/clouds.png\"),\n      back: require(\"../../img/backgrounds/mountains.png\"),\n      front: require(\"../../img/backgrounds/forest.png\")\n    },\n    gradient: camPos => {\n      return [\n        [\"#256bcc\", 0],\n        [\"#2278c6\", clamp(0.4 - camPos.y * 0.0001, 0, 0.8)],\n        [\"#00c7a4\", 0.8]\n      ];\n    }\n  },\n  sounds: [\n    {\n      url: require(\"../../sounds/hooked-on-a-feeling.mp3\"),\n      name: \"music\"\n    }\n  ],\n  tileSprite: {\n    imageURL: require(\"../../img/tiles/y5lxj.png\"),\n    tileW: 60,\n    tileH: 60,\n    frames: [\n      {\n        name: \"grass\",\n        rect: [60 * 0, 0, 60, 60]\n      },\n      {\n        name: \"stone\",\n        rect: [60 * 1, 0, 60, 60]\n      },\n      {\n        name: \"dirt\",\n        rect: [60 * 2, 0, 60, 60]\n      },\n      {\n        name: \"default\",\n        rect: [60 * 3, 0, 60, 60]\n      },\n\n      {\n        name: \"stone2\",\n        rect: [60 * 0, 60, 60, 60]\n      },\n      {\n        name: \"wood\",\n        rect: [60 * 1, 60, 60, 60]\n      },\n      {\n        name: \"sand\",\n        rect: [60 * 2, 60, 60, 60]\n      }\n    ]\n  },\n  tiles: [\n    [\"default\", 2, 6],\n    [\"default\", 3, 6],\n    [\"default\", 4, 6],\n    [\"default\", 5, 6],\n    [\"default\", 6, 6],\n    [\"default\", 7, 6],\n    [\"default\", 8, 6],\n    [\"default\", 9, 6],\n    [\"default\", 10, 6],\n    [\"default\", 11, 6],\n    [\"default\", 12, 6],\n    [\"default\", 13, 6],\n    [\"default\", 14, 6],\n    [\"default\", 15, 6],\n    [\"default\", 16, 6],\n    [\"default\", 17, 6],\n    [\"default\", 18, 6],\n    [\"default\", 19, 6],\n    [\"default\", 26, 6],\n    [\"default\", 27, 6],\n    [\"default\", 28, 6],\n    [\"default\", 29, 6],\n    [\"default\", 30, 6],\n    [\"default\", 31, 6],\n    [\"default\", 32, 6],\n    [\"default\", 38, 4],\n    [\"default\", 39, 4],\n    [\"default\", 40, 4],\n    [\"default\", 41, 4],\n    [\"default\", 42, 4],\n    [\"default\", 43, 4],\n    [\"default\", 44, 4],\n    [\"default\", 45, 4],\n    [\"default\", 46, 4],\n    [\"default\", 47, 4],\n    [\"default\", 51, 4],\n    [\"default\", 52, 4],\n    [\"default\", 53, 4],\n    [\"default\", 55, 6],\n    [\"default\", 56, 6],\n    [\"wood\", 60, 6],\n    [\"default\", 64, 8],\n    [\"default\", 65, 8],\n    [\"default\", 66, 8],\n    [\"default\", 67, 8],\n    [\"default\", 68, 8],\n    [\"default\", 74, 5],\n    [\"default\", 75, 5],\n    [\"default\", 76, 5],\n    [\"default\", 77, 5],\n    [\"default\", 78, 5],\n    [\"default\", 79, 5],\n    [\"default\", 80, 5],\n    [\"default\", 81, 5],\n    [\"default\", 82, 5],\n    [\"default\", 87, 8],\n    [\"default\", 88, 8],\n    [\"default\", 93, 6],\n    [\"default\", 94, 6],\n    [\"default\", 95, 6],\n    [\"default\", 96, 6],\n    [\"default\", 101, 6],\n    [\"default\", 102, 6],\n    [\"default\", 103, 6],\n    [\"default\", 104, 6],\n    [\"default\", 105, 6],\n    [\"default\", 106, 6],\n    [\"default\", 107, 6],\n    [\"default\", 108, 6],\n    [\"default\", 109, 6],\n    [\"default\", 110, 6],\n    [\"default\", 111, 6],\n    [\"default\", 112, 6],\n    [\"default\", 113, 6],\n    [\"default\", 114, 6],\n    [\"default\", 115, 6],\n    [\"default\", 116, 6],\n    [\"default\", 117, 6],\n    [\"default\", 118, 6],\n    [\"default\", 119, 6],\n    [\"default\", 124, 6],\n    [\"default\", 125, 6],\n    [\"default\", 126, 6],\n    [\"default\", 127, 6],\n    [\"default\", 128, 6],\n    [\"default\", 129, 6],\n    [\"default\", 130, 6],\n    [\"default\", 131, 6],\n    [\"default\", 132, 6],\n    [\"default\", 133, 6],\n    [\"default\", 138, 4],\n    [\"default\", 139, 4],\n    [\"default\", 140, 4],\n    [\"default\", 141, 4],\n    [\"default\", 142, 4],\n    [\"default\", 143, 4],\n    [\"default\", 144, 4],\n    [\"default\", 145, 4],\n    [\"default\", 146, 4],\n    [\"default\", 147, 4],\n    [\"default\", 151, 4],\n    [\"default\", 152, 4],\n    [\"default\", 155, 6],\n    [\"default\", 156, 6],\n    [\"wood\", 160, 6],\n    [\"default\", 164, 8],\n    [\"default\", 165, 8],\n    [\"default\", 166, 8],\n    [\"default\", 167, 8],\n    [\"default\", 168, 8],\n    [\"default\", 173, 5],\n    [\"default\", 174, 5],\n    [\"default\", 175, 5],\n    [\"default\", 176, 5],\n    [\"default\", 177, 5],\n    [\"default\", 178, 5],\n    [\"default\", 179, 5],\n    [\"default\", 180, 5],\n    [\"default\", 181, 5],\n    [\"default\", 182, 5],\n    [\"default\", 187, 8],\n    [\"default\", 188, 8],\n    [\"default\", 194, 6],\n    [\"default\", 195, 6],\n    [\"dirt\", 195, 7],\n    [\"default\", 196, 6],\n    [\"dirt\", 196, 7],\n    [\"dirt\", 196, 8],\n    [\"default\", 197, 6],\n    [\"dirt\", 197, 7],\n    [\"dirt\", 197, 8],\n    [\"stone\", 197, 9],\n    [\"default\", 198, 6],\n    [\"dirt\", 198, 7],\n    [\"dirt\", 198, 8],\n    [\"stone\", 198, 9],\n    [\"default\", 199, 6],\n    [\"dirt\", 199, 7],\n    [\"dirt\", 199, 8],\n    [\"stone\", 199, 9],\n    [\"default\", 200, 6],\n    [\"dirt\", 200, 7],\n    [\"dirt\", 200, 8],\n    [\"stone\", 200, 9],\n    [\"default\", 201, 6],\n    [\"dirt\", 201, 7],\n    [\"dirt\", 201, 8],\n    [\"stone\", 201, 9],\n    [\"default\", 202, 6],\n    [\"dirt\", 202, 7],\n    [\"dirt\", 202, 8],\n    [\"stone\", 202, 9],\n    [\"default\", 203, 6],\n    [\"dirt\", 203, 7],\n    [\"dirt\", 203, 8],\n    [\"stone\", 203, 9],\n    [\"default\", 204, 6],\n    [\"dirt\", 204, 7],\n    [\"dirt\", 204, 8],\n    [\"stone\", 204, 9],\n    [\"default\", 205, 6],\n    [\"dirt\", 205, 7],\n    [\"dirt\", 205, 8],\n    [\"stone\", 205, 9],\n    [\"default\", 206, 6],\n    [\"dirt\", 206, 7],\n    [\"dirt\", 206, 8],\n    [\"stone\", 206, 9],\n    [\"default\", 207, 6],\n    [\"dirt\", 207, 7],\n    [\"dirt\", 207, 8],\n    [\"stone\", 207, 9],\n    [\"default\", 208, 6],\n    [\"dirt\", 208, 7],\n    [\"dirt\", 208, 8],\n    [\"stone\", 208, 9],\n    [\"default\", 209, 6],\n    [\"dirt\", 209, 7],\n    [\"dirt\", 209, 8],\n    [\"stone\", 209, 9],\n    [\"default\", 210, 6],\n    [\"dirt\", 210, 7],\n    [\"dirt\", 210, 8],\n    [\"stone\", 210, 9],\n    [\"default\", 211, 6],\n    [\"dirt\", 211, 7],\n    [\"dirt\", 211, 8],\n    [\"stone\", 211, 9],\n    [\"default\", 212, 6],\n    [\"dirt\", 212, 7],\n    [\"dirt\", 212, 8],\n    [\"stone\", 212, 9],\n    [\"default\", 213, 6],\n    [\"dirt\", 213, 7],\n    [\"dirt\", 213, 8],\n    [\"stone\", 213, 9],\n    [\"default\", 214, 6],\n    [\"dirt\", 214, 7],\n    [\"dirt\", 214, 8],\n    [\"stone\", 214, 9],\n    [\"default\", 215, 6],\n    [\"dirt\", 215, 7],\n    [\"dirt\", 215, 8],\n    [\"stone\", 215, 9],\n    [\"default\", 216, 6],\n    [\"dirt\", 216, 7],\n    [\"dirt\", 216, 8],\n    [\"stone\", 216, 9],\n    [\"default\", 217, 6],\n    [\"dirt\", 217, 7],\n    [\"dirt\", 217, 8],\n    [\"stone\", 217, 9],\n    [\"default\", 218, 6],\n    [\"dirt\", 218, 7],\n    [\"dirt\", 218, 8],\n    [\"stone\", 218, 9],\n    [\"default\", 219, 6],\n    [\"dirt\", 219, 7],\n    [\"dirt\", 219, 8],\n    [\"stone\", 219, 9],\n    [\"default\", 220, 6],\n    [\"dirt\", 220, 7],\n    [\"dirt\", 220, 8],\n    [\"stone\", 220, 9],\n    [\"default\", 221, 6],\n    [\"dirt\", 221, 7],\n    [\"dirt\", 221, 8],\n    [\"stone\", 221, 9],\n    [\"default\", 222, 6],\n    [\"dirt\", 222, 7],\n    [\"dirt\", 222, 8],\n    [\"stone\", 222, 9],\n    [\"default\", 223, 6],\n    [\"dirt\", 223, 7],\n    [\"dirt\", 223, 8],\n    [\"stone\", 223, 9],\n    [\"default\", 224, 6],\n    [\"dirt\", 224, 7],\n    [\"dirt\", 224, 8],\n    [\"stone\", 224, 9],\n    [\"default\", 225, 6],\n    [\"dirt\", 225, 7],\n    [\"dirt\", 225, 8],\n    [\"stone\", 225, 9],\n    [\"default\", 226, 6],\n    [\"dirt\", 226, 7],\n    [\"dirt\", 226, 8],\n    [\"default\", 227, 6],\n    [\"dirt\", 227, 7],\n    [\"default\", 228, 6]\n  ],\n  entities: [\n    { name: \"speedBooster\", pos: [769.6654805148739, 299.5] },\n    { name: \"rainbow\", pos: [1314.8304345700217, 43.5] },\n    { name: \"enemy\", skinName: \"cactus\", pos: [1796, 285.75] },\n    { name: \"enemy\", skinName: \"cactus\", pos: [2580, 0] },\n    { name: \"rainbow\", pos: [3183.8893762925363, -147.088566603083] },\n    { name: \"enemy\", skinName: \"cactus\", pos: [3968, 405.75] },\n    { name: \"rainbow\", pos: [4610, -7] },\n    { name: \"enemy\", skinName: \"cactus\", pos: [4620, 0] },\n    { name: \"rainbow\", pos: [5604, 37] },\n    { name: \"enemy\", skinName: \"cactus\", pos: [6519.332364340603, 285] },\n    { name: \"speedBooster\", pos: [6663.277780038607, 302.5] },\n    { name: \"rainbow\", pos: [7388, 0] },\n    { name: \"enemy\", skinName: \"cactus\", pos: [7721.990176118361, 286] },\n    { name: \"enemy\", skinName: \"cactus\", pos: [9995.156915549245, 408] }\n  ]\n};\n\nexport default defineLevel(spec, {\n  onStart: (game, level) => {\n    // level.sounds.get('music').playOnce();\n  },\n  afterUpdate: onAfterUpdate()\n});\n\nfunction onAfterUpdate() {\n  let firstJumpReached = false;\n\n  return (game, level) => {\n    const player = game.playerEnv.playerController.player;\n    const firstJumpX = 500;\n\n    const nearFirstJump = Math.abs(player.pos.x - firstJumpX) < 10;\n    if (!firstJumpReached && nearFirstJump) {\n      firstJumpReached = true;\n      splash(\"press space to jump\", { size: 50, timeout: 2000 });\n    }\n  };\n}\n","import { splash } from \"../Splash\";\nimport { Striker } from \"../Traits\";\nimport { defineLevel } from \"./defineLevel\";\nimport { clamp } from \"../math\";\n\nconst spec = {\n  name: \"shooting\",\n  spawn: [96, 64],\n  background: {\n    images: {\n      sky: require(\"../../img/backgrounds/clouds.png\"),\n      back: require(\"../../img/backgrounds/mountains.png\"),\n      front: require(\"../../img/backgrounds/forest.png\")\n    },\n    gradient: camPos => {\n      return [\n        [\"#256bcc\", 0],\n        [\"#2278c6\", clamp(0.4 - camPos.y * 0.0001, 0, 0.8)],\n        [\"#00c7a4\", 0.8]\n      ];\n    }\n  },\n  sounds: [\n    {\n      url: require(\"../../sounds/hooked-on-a-feeling.mp3\"),\n      name: \"music\"\n    }\n  ],\n  tileSprite: {\n    imageURL: require(\"../../img/tiles/y5lxj.png\"),\n    tileW: 60,\n    tileH: 60,\n    frames: [\n      {\n        name: \"grass\",\n        rect: [60 * 0, 0, 60, 60]\n      },\n      {\n        name: \"stone\",\n        rect: [60 * 1, 0, 60, 60]\n      },\n      {\n        name: \"dirt\",\n        rect: [60 * 2, 0, 60, 60]\n      },\n      {\n        name: \"default\",\n        rect: [60 * 3, 0, 60, 60]\n      },\n\n      {\n        name: \"stone2\",\n        rect: [60 * 0, 60, 60, 60]\n      },\n      {\n        name: \"wood\",\n        rect: [60 * 1, 60, 60, 60]\n      },\n      {\n        name: \"sand\",\n        rect: [60 * 2, 60, 60, 60]\n      }\n    ]\n  },\n  tiles: [\n    [\"default\", 1, 7],\n    [\"default\", 2, 7],\n    [\"default\", 3, 7],\n    [\"default\", 4, 7],\n    [\"default\", 5, 7],\n    [\"default\", 6, 7],\n    [\"default\", 7, 7],\n    [\"default\", 8, 7],\n    [\"default\", 9, 7],\n    [\"default\", 10, 7],\n    [\"default\", 11, 7],\n    [\"default\", 12, 7],\n    [\"default\", 13, 7],\n    [\"default\", 14, 7],\n    [\"default\", 15, 7],\n    [\"default\", 16, 7],\n    [\"wood\", 17, 6],\n    [\"default\", 17, 7],\n    [\"wood\", 18, 5],\n    [\"wood\", 18, 6],\n    [\"default\", 18, 7],\n    [\"wood\", 24, 5],\n    [\"wood\", 24, 6],\n    [\"wood\", 24, 7],\n    [\"default\", 24, 8],\n    [\"wood\", 25, 6],\n    [\"wood\", 25, 7],\n    [\"default\", 25, 8],\n    [\"wood\", 26, 7],\n    [\"default\", 26, 8],\n    [\"default\", 27, 8],\n    [\"default\", 28, 8],\n    [\"default\", 29, 8],\n    [\"default\", 30, 8],\n    [\"default\", 31, 8],\n    [\"default\", 32, 8],\n    [\"default\", 33, 8],\n    [\"default\", 34, 8],\n    [\"default\", 35, 8],\n    [\"default\", 36, 8],\n    [\"default\", 37, 8],\n    [\"default\", 38, 8],\n    [\"default\", 39, 8],\n    [\"wood\", 46, 7],\n    [\"wood\", 47, 7],\n    [\"wood\", 48, 7],\n    [\"wood\", 49, 7],\n    [\"wood\", 50, 7],\n    [\"wood\", 51, 7],\n    [\"wood\", 52, 7],\n    [\"wood\", 53, 6],\n    [\"wood\", 53, 7],\n    [\"wood\", 54, 6],\n    [\"wood\", 55, 6],\n    [\"wood\", 56, 6],\n    [\"wood\", 57, 6],\n    [\"wood\", 58, 6],\n    [\"wood\", 59, 6],\n    [\"wood\", 60, 5],\n    [\"wood\", 60, 6],\n    [\"wood\", 61, 5],\n    [\"wood\", 62, 5],\n    [\"wood\", 63, 5],\n    [\"wood\", 64, 5],\n    [\"wood\", 65, 5],\n    [\"wood\", 66, 4],\n    [\"wood\", 66, 5],\n    [\"wood\", 67, 4],\n    [\"wood\", 68, 4],\n    [\"wood\", 69, 4],\n    [\"wood\", 70, 4],\n    [\"wood\", 71, 4],\n    [\"wood\", 72, 4],\n    [\"wood\", 73, 4],\n    [\"wood\", 74, 4],\n    [\"wood\", 75, 4],\n    [\"wood\", 76, 4],\n    [\"wood\", 77, 4],\n    [\"wood\", 78, 4],\n    [\"wood\", 79, 4],\n    [\"wood\", 80, -10],\n    [\"wood\", 80, -9],\n    [\"wood\", 80, -8],\n    [\"wood\", 80, -7],\n    [\"wood\", 80, -6],\n    [\"wood\", 80, -5],\n    [\"wood\", 80, -4],\n    [\"wood\", 80, -3],\n    [\"wood\", 80, 4],\n    [\"wood\", 81, 4],\n    [\"wood\", 82, -10],\n    [\"wood\", 82, -9],\n    [\"wood\", 82, -8],\n    [\"wood\", 82, -7],\n    [\"wood\", 82, -6],\n    [\"wood\", 82, -5],\n    [\"wood\", 82, -4],\n    [\"wood\", 82, -3],\n    [\"wood\", 82, 4],\n    [\"default\", 83, -4],\n    [\"wood\", 83, -3],\n    [\"wood\", 83, 4],\n    [\"default\", 84, -3],\n    [\"wood\", 84, -2],\n    [\"wood\", 84, 4],\n    [\"wood\", 84, 5],\n    [\"wood\", 84, 6],\n    [\"wood\", 84, 7],\n    [\"wood\", 84, 8],\n    [\"wood\", 84, 9],\n    [\"default\", 85, -3],\n    [\"wood\", 85, -2],\n    [\"default\", 85, 5],\n    [\"dirt\", 85, 6],\n    [\"dirt\", 85, 7],\n    [\"stone\", 85, 8],\n    [\"stone\", 85, 9],\n    [\"default\", 86, -3],\n    [\"wood\", 86, -2],\n    [\"default\", 86, 6],\n    [\"dirt\", 86, 7],\n    [\"stone\", 86, 8],\n    [\"stone\", 86, 9],\n    [\"default\", 87, -2],\n    [\"wood\", 87, -1],\n    [\"default\", 87, 6],\n    [\"dirt\", 87, 7],\n    [\"stone\", 87, 8],\n    [\"stone\", 87, 9],\n    [\"default\", 88, -1],\n    [\"wood\", 88, 0],\n    [\"default\", 88, 6],\n    [\"dirt\", 88, 7],\n    [\"stone\", 88, 8],\n    [\"stone\", 88, 9],\n    [\"default\", 89, 0],\n    [\"wood\", 89, 1],\n    [\"default\", 89, 6],\n    [\"dirt\", 89, 7],\n    [\"stone\", 89, 8],\n    [\"stone\", 89, 9],\n    [\"default\", 90, 1],\n    [\"wood\", 90, 2],\n    [\"default\", 90, 6],\n    [\"dirt\", 90, 7],\n    [\"stone\", 90, 8],\n    [\"stone\", 90, 9],\n    [\"default\", 91, 1],\n    [\"wood\", 91, 2],\n    [\"default\", 91, 6],\n    [\"dirt\", 91, 7],\n    [\"stone\", 91, 8],\n    [\"stone\", 91, 9],\n    [\"default\", 92, 6],\n    [\"dirt\", 92, 7],\n    [\"stone\", 92, 8],\n    [\"stone\", 92, 9],\n    [\"default\", 93, 6],\n    [\"dirt\", 93, 7],\n    [\"stone\", 93, 8],\n    [\"stone\", 93, 9],\n    [\"dirt\", 94, 7],\n    [\"stone2\", 94, 8],\n    [\"stone\", 94, 9],\n    [\"stone2\", 95, 8],\n    [\"stone2\", 95, 9],\n    [\"stone2\", 96, 9],\n    [\"stone2\", 97, 9],\n    [\"stone2\", 98, 9],\n    [\"stone2\", 99, 9],\n    [\"stone2\", 100, 9],\n    [\"stone2\", 101, 9],\n    [\"wood\", 102, 4],\n    [\"stone2\", 102, 9],\n    [\"wood\", 103, 4],\n    [\"wood\", 103, 5],\n    [\"stone2\", 103, 9],\n    [\"stone2\", 104, 9],\n    [\"stone2\", 105, 9],\n    [\"stone2\", 106, 9],\n    [\"stone2\", 107, 9],\n    [\"stone2\", 108, 9],\n    [\"stone2\", 109, 9],\n    [\"stone2\", 110, 9],\n    [\"default\", 118, 5],\n    [\"default\", 119, 5],\n    [\"default\", 120, 5],\n    [\"default\", 121, 5],\n    [\"dirt\", 121, 6],\n    [\"default\", 122, 6],\n    [\"dirt\", 122, 7],\n    [\"default\", 123, 7],\n    [\"dirt\", 123, 8],\n    [\"default\", 124, 8],\n    [\"default\", 125, 8],\n    [\"default\", 126, 8],\n    [\"default\", 127, 8],\n    [\"default\", 128, 8],\n    [\"default\", 129, 8],\n    [\"default\", 130, 8],\n    [\"default\", 131, 8],\n    [\"default\", 132, 8],\n    [\"default\", 133, 8],\n    [\"wood\", 134, 2],\n    [\"default\", 134, 8],\n    [\"default\", 135, 8],\n    [\"default\", 136, 8],\n    [\"default\", 137, 8],\n    [\"default\", 138, 8],\n    [\"default\", 139, 8],\n    [\"default\", 140, 8],\n    [\"default\", 141, 8],\n    [\"default\", 142, 8],\n    [\"default\", 143, 8],\n    [\"default\", 144, 8],\n    [\"default\", 145, 8],\n    [\"stone2\", 146, 5],\n    [\"stone2\", 146, 8],\n    [\"dirt\", 146, 9],\n    [\"stone2\", 147, 4],\n    [\"stone2\", 147, 5],\n    [\"stone2\", 147, 8],\n    [\"dirt\", 147, 9],\n    [\"stone2\", 148, 4],\n    [\"stone2\", 148, 8],\n    [\"dirt\", 148, 9],\n    [\"wood\", 149, 3],\n    [\"stone2\", 149, 4],\n    [\"stone2\", 149, 8],\n    [\"dirt\", 149, 9],\n    [\"wood\", 150, 3],\n    [\"stone2\", 150, 4],\n    [\"stone2\", 150, 8],\n    [\"dirt\", 150, 9],\n    [\"stone2\", 151, 4],\n    [\"stone2\", 151, 8],\n    [\"dirt\", 151, 9],\n    [\"wood\", 152, 3],\n    [\"stone2\", 152, 4],\n    [\"stone2\", 152, 8],\n    [\"dirt\", 152, 9],\n    [\"stone2\", 153, 4],\n    [\"stone2\", 153, 8],\n    [\"dirt\", 153, 9],\n    [\"stone2\", 154, 3],\n    [\"stone2\", 154, 4],\n    [\"stone2\", 154, 8],\n    [\"dirt\", 154, 9],\n    [\"wood\", 155, 2],\n    [\"stone2\", 155, 3],\n    [\"stone2\", 155, 4],\n    [\"stone2\", 155, 8],\n    [\"dirt\", 155, 9],\n    [\"stone2\", 156, 3],\n    [\"stone2\", 156, 4],\n    [\"stone2\", 156, 8],\n    [\"dirt\", 156, 9],\n    [\"stone2\", 157, 4],\n    [\"stone2\", 157, 8],\n    [\"dirt\", 157, 9],\n    [\"stone2\", 158, 4],\n    [\"stone2\", 158, 8],\n    [\"dirt\", 158, 9],\n    [\"wood\", 159, 3],\n    [\"stone2\", 159, 4],\n    [\"stone2\", 159, 8],\n    [\"dirt\", 159, 9],\n    [\"stone2\", 160, 4],\n    [\"stone2\", 160, 5],\n    [\"stone2\", 160, 8],\n    [\"dirt\", 160, 9],\n    [\"stone2\", 161, 5],\n    [\"stone2\", 161, 8],\n    [\"dirt\", 161, 9],\n    [\"grass\", 162, 8],\n    [\"dirt\", 162, 9],\n    [\"stone2\", 163, 8],\n    [\"dirt\", 163, 9],\n    [\"grass\", 164, 8],\n    [\"dirt\", 164, 9],\n    [\"stone2\", 165, 8],\n    [\"dirt\", 165, 9],\n    [\"wood\", 166, 7],\n    [\"grass\", 166, 8],\n    [\"dirt\", 166, 9],\n    [\"stone2\", 167, 8],\n    [\"dirt\", 167, 9],\n    [\"grass\", 168, 8],\n    [\"dirt\", 168, 9],\n    [\"stone2\", 169, 8],\n    [\"dirt\", 169, 9],\n    [\"grass\", 170, 8],\n    [\"dirt\", 170, 9],\n    [\"stone2\", 171, 8],\n    [\"dirt\", 171, 9],\n    [\"wood\", 172, 7],\n    [\"stone2\", 172, 8],\n    [\"dirt\", 172, 9],\n    [\"wood\", 173, 6],\n    [\"wood\", 173, 7],\n    [\"grass\", 173, 8],\n    [\"dirt\", 173, 9],\n    [\"wood\", 174, 7],\n    [\"grass\", 174, 8],\n    [\"dirt\", 174, 9],\n    [\"stone2\", 175, 8],\n    [\"dirt\", 175, 9],\n    [\"grass\", 176, 8],\n    [\"dirt\", 176, 9],\n    [\"stone2\", 177, 8],\n    [\"dirt\", 177, 9],\n    [\"grass\", 178, 8],\n    [\"dirt\", 178, 9],\n    [\"stone2\", 179, 8],\n    [\"dirt\", 179, 9],\n    [\"grass\", 180, 8],\n    [\"dirt\", 180, 9],\n    [\"wood\", 181, 7],\n    [\"default\", 181, 8],\n    [\"dirt\", 181, 9],\n    [\"wood\", 182, 7],\n    [\"default\", 182, 8],\n    [\"dirt\", 182, 9],\n    [\"default\", 183, 8],\n    [\"dirt\", 183, 9],\n    [\"default\", 184, 8],\n    [\"dirt\", 184, 9],\n    [\"default\", 185, 8],\n    [\"dirt\", 185, 9],\n    [\"default\", 186, 8],\n    [\"dirt\", 186, 9],\n    [\"default\", 187, 8],\n    [\"dirt\", 187, 9],\n    [\"default\", 188, 8],\n    [\"dirt\", 188, 9],\n    [\"default\", 189, 8],\n    [\"dirt\", 189, 9],\n    [\"default\", 190, 8],\n    [\"dirt\", 190, 9],\n    [\"default\", 191, 8],\n    [\"dirt\", 191, 9],\n    [\"default\", 192, 8],\n    [\"dirt\", 192, 9],\n    [\"default\", 193, 8],\n    [\"dirt\", 193, 9],\n    [\"wood\", 198, 8],\n    [\"wood\", 199, 7],\n    [\"wood\", 203, 7],\n    [\"wood\", 204, 6],\n    [\"wood\", 207, 6],\n    [\"wood\", 208, 5],\n    [\"wood\", 211, 5],\n    [\"wood\", 212, 4],\n    [\"wood\", 214, 5],\n    [\"wood\", 215, 4],\n    [\"wood\", 218, 5],\n    [\"wood\", 219, 4],\n    [\"wood\", 220, 4],\n    [\"wood\", 221, 4],\n    [\"wood\", 222, 4],\n    [\"wood\", 223, 4],\n    [\"wood\", 224, 4],\n    [\"wood\", 225, 4],\n    [\"wood\", 226, 4],\n    [\"wood\", 227, 4],\n    [\"wood\", 228, 4],\n    [\"wood\", 229, 4],\n    [\"wood\", 230, 4],\n    [\"wood\", 231, 4],\n    [\"wood\", 232, 4],\n    [\"wood\", 233, 4],\n    [\"wood\", 234, 4],\n    [\"wood\", 235, 4],\n    [\"wood\", 236, 4],\n    [\"wood\", 237, 4],\n    [\"wood\", 238, 4],\n    [\"wood\", 239, 4],\n    [\"wood\", 240, 4],\n    [\"wood\", 241, 4],\n    [\"wood\", 242, 4],\n    [\"wood\", 243, 4],\n    [\"wood\", 244, 4],\n    [\"wood\", 245, 3],\n    [\"wood\", 245, 4],\n    [\"wood\", 246, 3],\n    [\"wood\", 247, 2],\n    [\"wood\", 247, 3],\n    [\"wood\", 247, 4],\n    [\"wood\", 247, 5],\n    [\"wood\", 247, 6],\n    [\"wood\", 247, 7],\n    [\"wood\", 247, 8],\n    [\"wood\", 247, 9],\n    [\"wood\", 247, 10]\n  ],\n  entities: [\n    { name: \"manaPot\", pos: [1266.0000186093064, 15] },\n    { name: \"enemy\", pos: [2319.1666666666615, 381.5], skinName: \"target\" },\n    { name: \"manaPot\", pos: [2747, 347], skinName: \"default\" },\n    { name: \"manaPot\", pos: [2892, 346] },\n    { name: \"manaPot\", pos: [3017.408459114388, 346] },\n    { name: \"manaPot\", pos: [3283.9999999999914, 285] },\n    { name: \"manaPot\", pos: [3430.9999999999914, 287] },\n    { name: \"manaPot\", pos: [3627, 226], skinName: \"default\" },\n    { name: \"manaPot\", pos: [3732.050762163021, 228] },\n    { name: \"manaPot\", pos: [3825.050762163021, 228] },\n    { name: \"speedBooster\", pos: [4028.498282284062, 177.5] },\n    { name: \"speedBooster\", pos: [4781.498282284062, 62.5] },\n    { name: \"enemy\", skinName: \"cactus\", pos: [4858.074896158258, 165.5] },\n    { name: \"enemy\", skinName: \"cactus\", pos: [4859, 45.91666666666667] },\n    { name: \"enemy\", skinName: \"cactus\", pos: [4859, -14.5] },\n    { name: \"enemy\", skinName: \"cactus\", pos: [4859, -398.5] },\n    { name: \"enemy\", skinName: \"cactus\", pos: [4859, 108.5] },\n    { name: \"enemy\", skinName: \"cactus\", pos: [4859.074896158258, -210] },\n    { name: \"enemy\", skinName: \"cactus\", pos: [4860, -463.08333333333337] },\n    { name: \"enemy\", skinName: \"cactus\", pos: [4860, -74.5] },\n    { name: \"enemy\", skinName: \"cactus\", pos: [4860.074896158258, -143.5] },\n    { name: \"enemy\", skinName: \"cactus\", pos: [4860.074896158258, -275] },\n    { name: \"enemy\", skinName: \"cactus\", pos: [4860.074896158258, -335] },\n    { name: \"enemy\", pos: [4860.597505721113, -579.5], skinName: \"cactus\" },\n    { name: \"enemy\", skinName: \"cactus\", pos: [4861, -641.75] },\n    { name: \"enemy\", skinName: \"cactus\", pos: [4861, -519.5] },\n    { name: \"rainbow\", pos: [4952.685545762244, 35.5] },\n    { name: \"enemy\", skinName: \"cactus\", pos: [5618.503676392036, 289] },\n    { name: \"enemy\", skinName: \"cactus\", pos: [5640.333333333396, 341] },\n    { name: \"enemy\", skinName: \"cactus\", pos: [5700.333333333396, 402] },\n    { name: \"enemy\", skinName: \"cactus\", pos: [5760.333333333396, 461] },\n    { name: \"enemy\", skinName: \"cactus\", pos: [5815.333333333396, 467] },\n    { name: \"enemy\", skinName: \"cactus\", pos: [5875.333333333396, 468] },\n    { name: \"enemy\", skinName: \"cactus\", pos: [5939.958719207056, 467] },\n    { name: \"enemy\", pos: [6104, 167], skinName: \"cactus\" },\n    { name: \"rainbow\", pos: [6826.5, 229.5], skinName: \"default\" },\n    { name: \"manaPot\", pos: [7065.899479945025, 228], skinName: \"default\" },\n    { name: \"manaPot\", pos: [7180.193362357293, 228], skinName: \"default\" },\n    {\n      name: \"enemy\",\n      pos: [8018.1666666666615, 25],\n      skinName: \"target\",\n      id: \"target-1\"\n    },\n    {\n      name: \"enemy\",\n      pos: [8324.672259524485, 385],\n      skinName: \"target\",\n      id: \"target-2\"\n    },\n    {\n      name: \"enemy\",\n      pos: [8726.672259524486, 206],\n      skinName: \"target\",\n      id: \"target-3\"\n    },\n    {\n      name: \"door\",\n      pos: [8760.666972841413, 315.5],\n      skinName: \"default\",\n      id: \"door-1\"\n    },\n    {\n      name: \"speedBooster\",\n      pos: [8801.896812757153, 399.5],\n      skinName: \"default\"\n    },\n    { name: \"enemy\", pos: [9664, 406.5], skinName: \"cactus\" },\n    { name: \"manaPot\", pos: [10194.166666849957, 166], skinName: \"default\" },\n    {\n      name: \"rainbow\",\n      pos: [10629.001220181868, 11.253143575674308],\n      skinName: \"default\"\n    },\n    { name: \"manaPot\", pos: [10978.166666849957, 415], skinName: \"default\" },\n    { name: \"manaPot\", pos: [11374.166666849957, 398], skinName: \"default\" },\n    { name: \"enemy\", pos: [12219.166666849957, 265.5], skinName: \"target\" },\n    { name: \"rainbow\", pos: [12329.157294348368, 44.5], skinName: \"default\" },\n    { name: \"enemy\", pos: [12459.166666849957, 207.5], skinName: \"target\" },\n    { name: \"enemy\", pos: [12880.166666849957, 145.5], skinName: \"target\" },\n    {\n      name: \"rainbow\",\n      pos: [13292.660758604594, -23.47985891352434],\n      skinName: \"default\"\n    }\n  ]\n};\n\nexport default defineLevel(spec, createLevelOptions());\n\nfunction createLevelOptions() {\n  const howToSplash = howToSplasher();\n\n  return {\n    onStart: (game, level) => {\n      // level.sounds.get('music').playOnce();\n    },\n    afterUpdate: (game, level) => {\n      howToSplash(game, level);\n      checkDoor1(game, level);\n    }\n  };\n}\n\nfunction howToSplasher() {\n  let firstJumpReached = false;\n\n  return (game, level) => {\n    const player = game.playerEnv.playerController.player;\n    const firstJumpX = 1200;\n\n    const nearFirstJump = Math.abs(player.pos.x - firstJumpX) < 10;\n    if (!firstJumpReached && nearFirstJump) {\n      firstJumpReached = true;\n      splash(\"press f to fire\", { size: 50, timeout: 2000 });\n    }\n  };\n}\n\nfunction checkDoor1(game, level) {\n  const targetIds = [\"target-1\", \"target-2\", \"target-3\"];\n  const doorId = \"door-1\";\n\n  const door = level.namedEntities.get(doorId);\n\n  if (door.behavior.opened) {\n    return;\n  }\n\n  const allTargetsDead = targetIds.every(id => {\n    const entity = level.namedEntities.get(id);\n    const dead = entity.killable.dead;\n    return dead;\n  });\n\n  if (allTargetsDead) {\n    door.behavior.open();\n  }\n}\n","import { splash } from \"../Splash\";\nimport { Striker } from \"../Traits\";\nimport { defineLevel } from \"./defineLevel\";\nimport { clamp } from \"../math\";\n\nconst spec = {\n  name: \"haste\",\n  spawn: [96, 64],\n  background: {\n    images: {\n      sky: require(\"../../img/backgrounds/clouds.png\"),\n      back: require(\"../../img/backgrounds/mountains.png\"),\n      front: require(\"../../img/backgrounds/forest.png\")\n    },\n    gradient: camPos => {\n      return [\n        [\"#256bcc\", 0],\n        [\"#2278c6\", clamp(0.4 - camPos.y * 0.0001, 0, 0.8)],\n        [\"#00c7a4\", 0.8]\n      ];\n    }\n  },\n  sounds: [\n    {\n      url: require(\"../../sounds/hooked-on-a-feeling.mp3\"),\n      name: \"music\"\n    }\n  ],\n  tileSprite: {\n    imageURL: require(\"../../img/tiles/y5lxj.png\"),\n    tileW: 60,\n    tileH: 60,\n    frames: [\n      {\n        name: \"grass\",\n        rect: [60 * 0, 0, 60, 60]\n      },\n      {\n        name: \"stone\",\n        rect: [60 * 1, 0, 60, 60]\n      },\n      {\n        name: \"dirt\",\n        rect: [60 * 2, 0, 60, 60]\n      },\n      {\n        name: \"default\",\n        rect: [60 * 3, 0, 60, 60]\n      },\n\n      {\n        name: \"stone2\",\n        rect: [60 * 0, 60, 60, 60]\n      },\n      {\n        name: \"wood\",\n        rect: [60 * 1, 60, 60, 60]\n      },\n      {\n        name: \"sand\",\n        rect: [60 * 2, 60, 60, 60]\n      }\n    ]\n  },\n  tiles: [\n    [\"default\", 1, 7],\n    [\"default\", 2, 7],\n    [\"default\", 3, 7],\n    [\"default\", 4, 7],\n    [\"default\", 5, 7],\n    [\"default\", 6, 7],\n    [\"default\", 7, 7],\n    [\"default\", 8, 7],\n    [\"default\", 9, 7],\n    [\"default\", 10, 7],\n    [\"default\", 11, 7],\n    [\"default\", 12, 7],\n    [\"default\", 13, 7],\n    [\"default\", 14, 7],\n    [\"default\", 15, 7],\n    [\"default\", 16, 7],\n    [\"default\", 17, 7],\n    [\"default\", 18, 7],\n    [\"default\", 19, 7],\n    [\"default\", 20, 7],\n    [\"default\", 21, 7],\n    [\"default\", 22, 7],\n    [\"default\", 23, 7],\n    [\"default\", 24, 7],\n    [\"default\", 25, 7],\n    [\"default\", 26, 7],\n    [\"default\", 40, 7],\n    [\"default\", 41, 7],\n    [\"default\", 42, 7],\n    [\"default\", 43, 7],\n    [\"default\", 44, 7],\n    [\"default\", 45, 7],\n    [\"default\", 46, 7],\n    [\"default\", 47, 7],\n    [\"default\", 48, 7],\n    [\"default\", 49, 7],\n    [\"default\", 50, 7],\n    [\"wood\", 61, 2],\n    [\"wood\", 62, 2],\n    [\"wood\", 63, 2],\n    [\"wood\", 68, 1],\n    [\"wood\", 69, 1],\n    [\"wood\", 70, 1],\n    [\"wood\", 71, 1],\n    [\"wood\", 72, 1],\n    [\"wood\", 73, 1],\n    [\"wood\", 84, 3],\n    [\"default\", 84, 4],\n    [\"dirt\", 84, 5],\n    [\"dirt\", 84, 6],\n    [\"wood\", 85, 4],\n    [\"default\", 85, 5],\n    [\"dirt\", 85, 6],\n    [\"default\", 86, 6],\n    [\"default\", 87, 6],\n    [\"default\", 88, 6],\n    [\"default\", 89, 6],\n    [\"default\", 90, 6],\n    [\"default\", 91, 6],\n    [\"default\", 92, 6],\n    [\"default\", 93, 6],\n    [\"default\", 94, 6],\n    [\"default\", 95, 6],\n    [\"default\", 96, 6],\n    [\"default\", 97, 6],\n    [\"default\", 98, 6],\n    [\"default\", 99, 6],\n    [\"default\", 100, 6],\n    [\"default\", 101, 6],\n    [\"default\", 102, 6],\n    [\"default\", 103, 6],\n    [\"default\", 104, 6],\n    [\"default\", 105, 6],\n    [\"default\", 106, 6],\n    [\"default\", 107, 6],\n    [\"default\", 108, 6],\n    [\"default\", 109, 6],\n    [\"default\", 110, 6],\n    [\"default\", 111, 6],\n    [\"default\", 112, 6],\n    [\"default\", 113, 6],\n    [\"default\", 114, 6],\n    [\"default\", 115, 6],\n    [\"default\", 116, 6],\n    [\"default\", 117, 6],\n    [\"default\", 118, 6],\n    [\"default\", 119, 6],\n    [\"default\", 120, 6],\n    [\"default\", 121, 6],\n    [\"default\", 122, 6],\n    [\"default\", 123, 6],\n    [\"default\", 124, 6],\n    [\"default\", 125, 6],\n    [\"default\", 126, 6],\n    [\"default\", 127, 6],\n    [\"default\", 128, 6],\n    [\"default\", 129, 6],\n    [\"stone2\", 145, 2],\n    [\"stone2\", 146, 2],\n    [\"stone2\", 147, 2],\n    [\"wood\", 154, 4],\n    [\"wood\", 155, 4],\n    [\"wood\", 156, 4],\n    [\"wood\", 157, 4],\n    [\"wood\", 158, 4],\n    [\"wood\", 165, 2],\n    [\"wood\", 166, 2],\n    [\"wood\", 167, 2],\n    [\"wood\", 168, 2],\n    [\"wood\", 169, 2],\n    [\"wood\", 176, 0],\n    [\"wood\", 177, 0],\n    [\"wood\", 178, 0],\n    [\"wood\", 179, 0],\n    [\"wood\", 183, 2],\n    [\"wood\", 184, 2],\n    [\"wood\", 185, 2],\n    [\"wood\", 186, 2],\n    [\"wood\", 187, 2],\n    [\"wood\", 191, 9],\n    [\"wood\", 192, 9],\n    [\"wood\", 193, 9],\n    [\"wood\", 197, 9],\n    [\"wood\", 198, 9],\n    [\"wood\", 199, 9],\n    [\"wood\", 200, 9],\n    [\"wood\", 201, 9],\n    [\"wood\", 202, 9],\n    [\"wood\", 207, 9],\n    [\"wood\", 212, 6],\n    [\"wood\", 216, 5],\n    [\"wood\", 220, 4],\n    [\"wood\", 224, 3],\n    [\"wood\", 228, 3],\n    [\"wood\", 232, 3],\n    [\"wood\", 236, 3],\n    [\"wood\", 238, 4],\n    [\"wood\", 240, 5],\n    [\"default\", 242, 6],\n    [\"default\", 243, 6],\n    [\"default\", 244, 6],\n    [\"default\", 245, 6],\n    [\"default\", 246, 6],\n    [\"default\", 247, 6],\n    [\"default\", 248, 6],\n    [\"default\", 249, 6],\n    [\"default\", 250, 6],\n    [\"default\", 251, 6],\n    [\"default\", 252, 6],\n    [\"default\", 253, 6],\n    [\"default\", 254, 6],\n    [\"default\", 255, 6],\n    [\"default\", 256, 6],\n    [\"default\", 257, 6],\n    [\"default\", 258, 6],\n    [\"default\", 259, 6],\n    [\"default\", 260, 6],\n    [\"default\", 261, 6],\n    [\"default\", 262, 6],\n    [\"default\", 263, 6],\n    [\"default\", 264, 6],\n    [\"default\", 267, 6],\n    [\"default\", 268, 6],\n    [\"default\", 269, 6],\n    [\"default\", 270, 6],\n    [\"default\", 271, 6],\n    [\"default\", 272, 6],\n    [\"default\", 273, 6],\n    [\"default\", 274, 6],\n    [\"default\", 275, 6],\n    [\"default\", 276, 6],\n    [\"default\", 279, 6],\n    [\"default\", 280, 6],\n    [\"default\", 281, 6],\n    [\"default\", 282, 6],\n    [\"default\", 283, 6],\n    [\"default\", 284, 6],\n    [\"default\", 285, 6],\n    [\"default\", 286, 6],\n    [\"default\", 287, 6],\n    [\"default\", 288, 6],\n    [\"default\", 289, 6],\n    [\"default\", 290, 6],\n    [\"default\", 291, 6],\n    [\"default\", 294, 6],\n    [\"default\", 295, 6],\n    [\"default\", 296, 6],\n    [\"default\", 297, 6],\n    [\"default\", 298, 6],\n    [\"default\", 299, 6],\n    [\"default\", 300, 6],\n    [\"default\", 301, 6],\n    [\"default\", 302, 6],\n    [\"default\", 304, 6],\n    [\"default\", 305, 6],\n    [\"default\", 306, 6],\n    [\"default\", 309, 6],\n    [\"default\", 310, 6],\n    [\"default\", 311, 6],\n    [\"default\", 312, 6],\n    [\"default\", 315, 6],\n    [\"default\", 316, 6],\n    [\"default\", 317, 6],\n    [\"default\", 318, 6],\n    [\"default\", 319, 6],\n    [\"default\", 320, 6],\n    [\"default\", 321, 6],\n    [\"default\", 322, 6],\n    [\"default\", 323, 6],\n    [\"default\", 324, 6],\n    [\"default\", 327, 6],\n    [\"default\", 328, 6],\n    [\"default\", 331, 6],\n    [\"default\", 332, 6],\n    [\"default\", 333, 6],\n    [\"default\", 334, 6],\n    [\"default\", 336, 6],\n    [\"default\", 337, 6],\n    [\"default\", 338, 6],\n    [\"default\", 339, 6],\n    [\"default\", 340, 6],\n    [\"default\", 341, 6],\n    [\"default\", 343, 6],\n    [\"default\", 344, 6],\n    [\"default\", 345, 6],\n    [\"default\", 346, 6],\n    [\"default\", 347, 6],\n    [\"default\", 349, 6],\n    [\"default\", 350, 6],\n    [\"default\", 351, 6],\n    [\"default\", 352, 6],\n    [\"default\", 353, 6],\n    [\"default\", 354, 6],\n    [\"default\", 355, 6],\n    [\"default\", 356, 6],\n    [\"default\", 357, 6],\n    [\"default\", 358, 6],\n    [\"default\", 359, 6],\n    [\"stone2\", 362, 4],\n    [\"stone2\", 362, 5],\n    [\"stone2\", 362, 6],\n    [\"wood\", 363, 5],\n    [\"stone2\", 363, 6],\n    [\"stone2\", 364, 6],\n    [\"wood\", 365, 5],\n    [\"stone2\", 365, 6],\n    [\"stone2\", 366, 4],\n    [\"stone2\", 366, 5],\n    [\"stone2\", 366, 6],\n    [\"wood\", 367, 5],\n    [\"stone2\", 367, 6],\n    [\"stone2\", 368, 6],\n    [\"wood\", 369, 5],\n    [\"stone2\", 369, 6],\n    [\"stone2\", 370, 4],\n    [\"stone2\", 370, 5],\n    [\"stone2\", 370, 6],\n    [\"wood\", 371, 5],\n    [\"stone2\", 371, 6],\n    [\"stone2\", 372, 6],\n    [\"wood\", 373, 5],\n    [\"stone2\", 373, 6],\n    [\"stone2\", 374, 4],\n    [\"stone2\", 374, 5],\n    [\"stone2\", 374, 6],\n    [\"wood\", 375, 5],\n    [\"stone2\", 375, 6],\n    [\"stone2\", 376, 6],\n    [\"wood\", 377, 5],\n    [\"stone2\", 377, 6],\n    [\"stone2\", 378, 4],\n    [\"stone2\", 378, 5],\n    [\"stone2\", 378, 6],\n    [\"dirt\", 383, 6],\n    [\"default\", 384, 3],\n    [\"dirt\", 384, 4],\n    [\"dirt\", 384, 6],\n    [\"default\", 385, 2],\n    [\"dirt\", 385, 3],\n    [\"dirt\", 385, 4],\n    [\"dirt\", 385, 6],\n    [\"default\", 386, 2],\n    [\"dirt\", 386, 3],\n    [\"dirt\", 386, 4],\n    [\"dirt\", 386, 6],\n    [\"default\", 388, 3],\n    [\"dirt\", 388, 4],\n    [\"dirt\", 388, 6],\n    [\"default\", 389, 2],\n    [\"dirt\", 389, 3],\n    [\"dirt\", 389, 4],\n    [\"dirt\", 389, 6],\n    [\"default\", 390, 2],\n    [\"dirt\", 390, 3],\n    [\"dirt\", 390, 6],\n    [\"default\", 391, 1],\n    [\"dirt\", 391, 2],\n    [\"dirt\", 391, 6],\n    [\"default\", 392, 1],\n    [\"dirt\", 392, 2],\n    [\"dirt\", 392, 3],\n    [\"dirt\", 392, 4],\n    [\"dirt\", 392, 5],\n    [\"dirt\", 392, 6],\n    [\"default\", 393, 1],\n    [\"dirt\", 393, 2],\n    [\"dirt\", 393, 3],\n    [\"dirt\", 393, 4],\n    [\"dirt\", 393, 5],\n    [\"dirt\", 393, 6],\n    [\"default\", 394, 0],\n    [\"dirt\", 394, 1],\n    [\"dirt\", 394, 2],\n    [\"dirt\", 394, 3],\n    [\"dirt\", 394, 4],\n    [\"dirt\", 394, 6],\n    [\"default\", 395, 0],\n    [\"dirt\", 395, 1],\n    [\"dirt\", 395, 6],\n    [\"default\", 396, 0],\n    [\"dirt\", 396, 1],\n    [\"dirt\", 396, 4],\n    [\"dirt\", 396, 6],\n    [\"default\", 397, 0],\n    [\"dirt\", 397, 1],\n    [\"dirt\", 397, 4],\n    [\"dirt\", 397, 5],\n    [\"dirt\", 397, 6],\n    [\"default\", 398, 0],\n    [\"dirt\", 398, 1],\n    [\"dirt\", 398, 4],\n    [\"dirt\", 398, 5],\n    [\"dirt\", 398, 6],\n    [\"default\", 399, 0],\n    [\"dirt\", 399, 1],\n    [\"dirt\", 399, 4],\n    [\"dirt\", 399, 5],\n    [\"default\", 400, 0],\n    [\"dirt\", 400, 1],\n    [\"dirt\", 400, 4],\n    [\"dirt\", 400, 5],\n    [\"dirt\", 400, 6],\n    [\"dirt\", 401, 2],\n    [\"dirt\", 401, 4],\n    [\"dirt\", 401, 5],\n    [\"dirt\", 401, 6],\n    [\"dirt\", 402, 2],\n    [\"dirt\", 402, 3],\n    [\"dirt\", 402, 4],\n    [\"dirt\", 402, 5],\n    [\"dirt\", 403, 4],\n    [\"default\", 404, -1],\n    [\"dirt\", 404, 0],\n    [\"dirt\", 404, 1],\n    [\"dirt\", 404, 4],\n    [\"default\", 405, -1],\n    [\"dirt\", 405, 0],\n    [\"dirt\", 405, 4],\n    [\"default\", 406, -1],\n    [\"dirt\", 406, 0],\n    [\"dirt\", 406, 1],\n    [\"dirt\", 406, 4],\n    [\"dirt\", 407, 1],\n    [\"dirt\", 407, 2],\n    [\"dirt\", 407, 3],\n    [\"dirt\", 407, 4],\n    [\"dirt\", 408, 3],\n    [\"dirt\", 408, 4],\n    [\"default\", 409, -2],\n    [\"dirt\", 409, -1],\n    [\"dirt\", 409, 0],\n    [\"dirt\", 409, 4],\n    [\"default\", 410, -2],\n    [\"dirt\", 410, -1],\n    [\"dirt\", 410, 0],\n    [\"dirt\", 410, 4],\n    [\"default\", 411, -1],\n    [\"dirt\", 411, 0],\n    [\"dirt\", 411, 1],\n    [\"dirt\", 411, 2],\n    [\"dirt\", 411, 3],\n    [\"dirt\", 411, 4],\n    [\"dirt\", 411, 5],\n    [\"default\", 412, 0],\n    [\"dirt\", 412, 1],\n    [\"dirt\", 412, 2],\n    [\"dirt\", 412, 3],\n    [\"dirt\", 412, 6],\n    [\"default\", 413, 0],\n    [\"dirt\", 413, 1],\n    [\"dirt\", 413, 6],\n    [\"default\", 414, 0],\n    [\"dirt\", 414, 1],\n    [\"dirt\", 414, 5],\n    [\"default\", 415, 1],\n    [\"dirt\", 415, 2],\n    [\"dirt\", 415, 3],\n    [\"dirt\", 415, 4],\n    [\"dirt\", 415, 5]\n  ],\n  entities: [\n    { name: \"manaPot\", pos: [485.6330162237009, 348], skinName: \"default\" },\n    { name: \"manaPot\", pos: [605.6383789811518, 348], skinName: \"default\" },\n    {\n      name: \"speedBooster\",\n      pos: [2812.2347522228215, 355.5],\n      skinName: \"default\"\n    },\n    {\n      name: \"rainbow\",\n      pos: [4137.700972128387, -281.40700721319774],\n      skinName: \"default\"\n    },\n    {\n      name: \"manaPot\",\n      pos: [4173.970876438694, -15.806867394646929],\n      skinName: \"default\"\n    },\n    {\n      name: \"speedBooster\",\n      pos: [4355.470876438694, -1.306867394646929],\n      skinName: \"default\"\n    },\n    { name: \"manaPot\", pos: [5423.255953223659, 291], skinName: \"default\" },\n    {\n      name: \"speedBooster\",\n      pos: [5706.755953223659, 298.5],\n      skinName: \"default\"\n    },\n    { name: \"manaPot\", pos: [5873.255953223659, 289], skinName: \"default\" },\n    {\n      name: \"speedBooster\",\n      pos: [6187.755953223659, 288.5],\n      skinName: \"default\"\n    },\n    { name: \"manaPot\", pos: [6463.255953223659, 282], skinName: \"default\" },\n    {\n      name: \"speedBooster\",\n      pos: [6769.755953223659, 301.5],\n      skinName: \"default\"\n    },\n    { name: \"manaPot\", pos: [7057.255953223659, 286], skinName: \"default\" },\n    {\n      name: \"rainbow\",\n      pos: [9023.31340703079, -143.56851863088718],\n      skinName: \"default\"\n    },\n    {\n      name: \"rainbow\",\n      pos: [11116.838169488621, -432.3583991660562],\n      skinName: \"default\"\n    },\n    { name: \"manaPot\", pos: [13550.334932109752, 64], skinName: \"default\" },\n    { name: \"manaPot\", pos: [13795.334932109752, 70], skinName: \"default\" },\n    { name: \"manaPot\", pos: [14045.334932109752, 65], skinName: \"default\" },\n    {\n      name: \"rainbow\",\n      pos: [14492.279191459636, -110.14351629708781],\n      skinName: \"default\"\n    },\n    {\n      name: \"speedBooster\",\n      pos: [14782.741349921134, 303.5],\n      skinName: \"default\"\n    },\n    {\n      name: \"speedBooster\",\n      pos: [14979.741349921134, 305.5],\n      skinName: \"default\"\n    },\n    {\n      name: \"speedBooster\",\n      pos: [15148.741349921134, 303.5],\n      skinName: \"default\"\n    },\n    {\n      name: \"speedBooster\",\n      pos: [15301.741349921134, 301.5],\n      skinName: \"default\"\n    },\n    {\n      name: \"speedBooster\",\n      pos: [15432.741349921134, 298.5],\n      skinName: \"default\"\n    },\n    {\n      name: \"speedBooster\",\n      pos: [15588.741349921134, 299.5],\n      skinName: \"default\"\n    },\n    {\n      name: \"speedBooster\",\n      pos: [15734.741349921134, 301.5],\n      skinName: \"default\"\n    },\n    {\n      name: \"speedBooster\",\n      pos: [16009.741349921134, 292.5],\n      skinName: \"default\"\n    },\n    { name: \"enemy\", pos: [17111.241349921132, 276.5], skinName: \"cactus\" },\n    { name: \"enemy\", pos: [17836.241349921132, 281.5], skinName: \"cactus\" },\n    { name: \"enemy\", pos: [19095.241349921132, 264.5], skinName: \"target\" }\n  ]\n};\n\nexport default defineLevel(spec, createLevelOptions());\n\nfunction createLevelOptions() {\n  const howToSplash = howToSplasher();\n\n  return {\n    onStart: (game, level) => {\n      // level.sounds.get('music').playOnce();\n    },\n    afterUpdate: (game, level) => {\n      howToSplash(game, level);\n    }\n  };\n}\n\nfunction howToSplasher() {\n  const distance = 500;\n  let distanceReached = false;\n\n  return (game, level) => {\n    const player = game.playerEnv.playerController.player;\n\n    const nearDistance = Math.abs(player.pos.x - distance) < 10;\n    if (!distanceReached && nearDistance) {\n      distanceReached = true;\n      splash(\"press shift to boost\", { size: 50, timeout: 2000 });\n    }\n  };\n}\n","import demo from './demo';\nimport one from './one';\nimport two from './two';\nimport three from './three';\n\nexport default [\n    demo, \n    one, \n    two, \n    three,\n]\n","import levels from './levels';\nimport { splash } from './Splash';\nimport { EventEmitter } from './util';\n\nconst LevelState = {\n    IDLE: Symbol('IDLE'),\n\n    FAILED: Symbol('FAILED'),\n    FINISH_ANIMATION: Symbol('FINISH_ANIMATION'),\n    FINISHED: Symbol('FINISHED')\n};\n\nexport const LevelEvents = {\n    FAILED: Symbol('FAILED'),\n    FINISHED: Symbol('FINISHED')\n};\n\n@EventEmitter.decorator\nexport class LevelManager {\n    constructor(game) {\n        this.game = game;\n\n        const loadLastLevel = false;\n        const showDemoLevel = true;\n\n        let currentLevel = showDemoLevel ? 0 : 1;\n\n        if (loadLastLevel) {\n            const lastLevel = localStorage.getItem('levelIdx')\n                ? parseInt(localStorage.getItem('levelIdx'))\n                : undefined;\n\n            currentLevel = lastLevel || currentLevel;\n        }\n\n        this.levels = levels;\n        this.levelIdx = currentLevel;\n        this.levelState = LevelState.IDLE;\n\n        this.level = undefined;\n        this.stopLevel = undefined;\n\n        this.showSplash = true;\n        this.finishDistance = 1500;\n        this.fallDistance = 600;\n\n        this.levelSelector = document.getElementById('current-level');\n    }\n\n    get playerController() {\n        return this.game.playerEnv.playerController;\n    }\n\n    get player() {\n        return this.game.playerEnv.playerController.player;\n    }\n\n    async restartLevel() {\n        return this.runLevel(this.levelIdx);\n    }\n\n    async nextLevel() {\n        this.levelIdx += 1;\n        return this.runLevel(this.levelIdx);\n    }\n\n    async runLevel(levelIdx = this.levelIdx) {\n        this.stopLevel && this.stopLevel();\n        localStorage.setItem('levelIdx', levelIdx);\n\n        this.game.canvasSelector.classList.toggle('black', true);\n\n        this.levelIdx = levelIdx;\n\n        this.levelSelector.innerHTML = levelIdx;\n\n        const { init } = this.levels[levelIdx];\n        const { level, startLevel, stopLevel } = await init(this.game);\n\n        this.level = level;\n        this.stopLevel = stopLevel;\n\n        if (this.showSplash && level.name) {\n            await splash(level.name);\n        }\n        this.game.canvasSelector.classList.toggle('black', false);\n\n        startLevel();\n\n        this.levelState = LevelState.IDLE;\n\n        return level;\n    }\n\n    update(deltaTime) {\n        if (!this.level) {\n            return;\n        }\n\n        if (this.level.frozen) {\n            return;\n        }\n\n        if (this.levelState === LevelState.FINISHED) {\n            return;\n        }\n\n        if ([LevelState.FINISH_ANIMATION, LevelState.IDLE].includes(this.levelState)) {\n            this.checkFinished();\n        }\n\n        if (this.levelState === LevelState.IDLE) {\n            this.checkFailed();\n        }\n    }\n\n    checkFinished() {\n        const distToFinish = this.level.distance - this.player.pos.x;\n\n        if (distToFinish > this.finishDistance) {\n            return;\n        }\n\n        const animationEnd = this.player.pos.y + this.player.size.y < -500;\n\n        if (animationEnd) {\n            this.levelState = LevelState.FINISHED;\n            this.onFinish();\n            return;\n        }\n\n        if (this.levelState === LevelState.IDLE) {\n            this.levelState = LevelState.FINISH_ANIMATION;\n\n            this.ufo = this.game.entityFactory.ufo({ napEntity: this.player });\n            this.level.entities.add(this.ufo);\n            this.game.cameraController.focus.notice(this.ufo, 10000);\n        }\n    }\n\n    checkFailed() {\n        const death = this.player.killable.dead && !this.level.entities.has(this.player);\n        const fall = this.player.pos.y > this.fallDistance;\n        const levelFailed = death || fall;\n\n        if (fall) {\n            this.player.killable.kill();\n        }\n\n        if (levelFailed) {\n            this.onFail();\n            this.levelState = LevelState.FAILED;\n        }\n    }\n\n    onFinish() {\n        const isLastLevel = this.levelIdx === this.levels.length - 1;\n\n        this.emit(LevelEvents.FINISHED, { isLastLevel });\n    }\n\n    onFail() {\n        this.emit(LevelEvents.FAILED);\n    }\n}\n","import { Sides } from './Entity';\n\nexport class TileResolver {\n    constructor(matrix, tileSize = 60) {\n        this.matrix = matrix;\n        this.tileSize = tileSize;\n    }\n\n    toIndex(pos) {\n        if(pos >= 0) {\n            return Math.floor(pos / this.tileSize); \n        }  else {\n            return Math.ceil(pos / this.tileSize) - 1; \n        }\n    }\n\n    toIndexRange(pos1, pos2, toIndex) {\n        const pMax = Math.ceil(pos2 / this.tileSize) * this.tileSize;\n        const range = [];\n        let pos = pos1;\n        do {\n            range.push(this.toIndex(pos));\n            pos += this.tileSize;\n        } while (pos < pMax);\n        return range;\n    }\n\n    getByIndex(indexX, indexY) {\n        const tile = this.matrix.get(indexX, indexY);\n        if (tile) {\n            const x1 = indexX * this.tileSize;\n            const x2 = x1 + this.tileSize;\n            const y1 = indexY * this.tileSize;\n            const y2 = y1 + this.tileSize;\n            return {\n                ...tile,\n                indexX,\n                indexY,\n                x1,\n                x2,\n                y1,\n                y2,\n            };\n        }\n    }\n\n    getTilePos(indexX, indexY) {\n        const x1 = indexX * this.tileSize;\n        const x2 = x1 + this.tileSize;\n        const y1 = indexY * this.tileSize;\n        const y2 = y1 + this.tileSize;\n        \n        return {\n            x1,\n            x2,\n            y1,\n            y2,\n        };\n    }\n\n    searchByPosition(posX, posY) {\n        const x = this.toIndex(posX);\n        const y = this.toIndex(posY);\n        return this.getByIndex(x, y);\n    }\n\n    searchByRange(x1, x2, y1, y2) {\n        const matches = [];\n        this.toIndexRange(x1, x2).forEach(indexX => {\n            this.toIndexRange(y1, y2).forEach(indexY => {\n                const match = this.getByIndex(indexX, indexY);\n                if (match) {\n                    matches.push(match);\n                }\n            });\n        });\n        return matches;\n    }\n}\n\nexport class TileCollider {\n    constructor(matrix) {\n        this.tiles = new TileResolver(matrix);\n    }\n\n    willCollideX(entity, distance) {\n        let x;\n        if (entity.vel.x > 0) {\n            x = entity.bounds.right;\n        } else if (entity.vel.x < 0) {\n            x = entity.bounds.left;\n        } else {\n            return;\n        }\n        \n        const matches = this.tiles.searchByRange(\n            x, x + distance,\n            entity.bounds.top, entity.bounds.bottom\n        );\n\n        return matches.length > 0;\n    }\n\n    checkX(entity) {\n        let x;\n        if (entity.vel.x > 0) {\n            x = entity.bounds.right;\n        } else if (entity.vel.x < 0) {\n            x = entity.bounds.left;\n        } else {\n            return;\n        }\n\n        const matches = this.tiles.searchByRange(\n            x, x,\n            entity.bounds.top, entity.bounds.bottom);\n\n        matches.forEach(match => {\n            if (entity.vel.x > 0) {\n                if (entity.bounds.right > match.x1) {\n                    entity.obstruct(Sides.RIGHT, match);\n                }\n            } else if (entity.vel.x < 0) {\n                if (entity.bounds.left < match.x2) {\n                    entity.obstruct(Sides.LEFT, match);\n                }\n            }\n        });\n    }\n\n    checkY(entity) {\n        let y;\n        if (entity.vel.y > 0) {\n            y = entity.bounds.bottom;\n        } else if (entity.vel.y < 0) {\n            y = entity.bounds.top;\n        } else {\n            return;\n        }\n\n        const matches = this.tiles.searchByRange(\n            entity.bounds.left, entity.bounds.right,\n            y, y);\n\n        matches.forEach(match => {\n            if (entity.vel.y > 0) {\n                if (entity.bounds.bottom > match.y1) {\n                    entity.obstruct(Sides.BOTTOM, match);\n                }\n            } else if (entity.vel.y < 0) {\n                if (entity.bounds.top < match.y2) {\n                    entity.obstruct(Sides.TOP, match);\n                }\n            }\n        });\n    }\n}\n","import { clamp } from './math';\nimport { TileResolver } from './TileCreation';\n\nexport function createBackgroundLayer(level, tileSprite) {\n    const resolver = new TileResolver(level.tileGrid);\n    const buffer = document.createElement('canvas');\n\n    buffer.width = 1024 + 60;\n    buffer.height = 600 + 60;\n\n    const context = buffer.getContext('2d');\n\n    function redraw(x, y, width, height) {\n        context.clearRect(0, 0, buffer.width, buffer.height);\n\n        const startX = x;\n        const endX = x + width;\n        const startY = y;\n        const endY = y + height;\n\n        for (let x = startX; x <= endX; ++x) {\n            for (let y = startY; y <= endY; y++) {\n                const tile = level.tileGrid.get(x, y);\n                if (tile) {\n                    const skinName = tile.skinName || 'default';\n                    tileSprite.drawTile(skinName, context, x - startX, y - startY);\n                }\n            }\n        }\n    }\n\n    return function drawBackgroundLayer(context, camera) {\n        const width = resolver.toIndex(camera.size.x);\n        const height = resolver.toIndex(camera.size.y);\n        const x = resolver.toIndex(camera.pos.x);\n        const y = resolver.toIndex(camera.pos.y);\n\n        const xOffset = x < 0 ? 60 : 0;\n        const yOffset = y < 0 ? 60 : 0;\n\n        redraw(x, y, width, height);\n\n        context.drawImage(\n            buffer,\n            -camera.pos.x % 60 - xOffset,\n            -camera.pos.y % 60 - yOffset\n        );\n    };\n}\n\nexport function createStaticBackgroundLayer(level, backgroundSprites, getGradientSteps) {\n    const buffer = document.createElement('canvas');\n    buffer.width = 1024 + 60;\n    buffer.height = 600 + 60;\n\n    const context = buffer.getContext('2d');\n\n    const images = {\n        SkyImage: backgroundSprites.sky,\n        BackImage: backgroundSprites.back,\n        FrontImage: backgroundSprites.front\n    };\n\n    function drawGradient(context, camera) {\n        const gradient = context.createLinearGradient(0, 0, 0, buffer.width);\n\n        const steps = getGradientSteps(camera.pos);\n\n        for(const [color, step] of steps) {    \n            gradient.addColorStop(step, color);\n        }\n\n        context.fillStyle = gradient;\n        context.fillRect(0, 0, buffer.width, buffer.height);\n    }\n\n    function drawImages(context, camera) {\n        const SkyImage = images.SkyImage;\n        const BackImage = images.BackImage;\n        const FrontImage = images.FrontImage;\n\n        const skyMargin = 500;\n        const widthMetric = FrontImage || BackImage || SkyImage;\n        const count = Math.floor(level.distance / (widthMetric ? widthMetric.width : 1)) + 5;\n\n        const SkyCoordX = -camera.pos.x / 2.9;\n        const BackCoordX = -camera.pos.x / 1.9;\n        const FrontCoordX = -camera.pos.x / 0.9;\n\n        const SkyCoordY = -camera.pos.y * 0.05;\n        const BackCoordY = -camera.pos.y * 0.07;\n        const FrontCoordY = -camera.pos.y * 0.2;\n\n        for (let i = 0; i < count; i++) {\n            SkyImage && context.drawImage(\n                SkyImage,\n                SkyCoordX + SkyImage.width * i + i * skyMargin,\n                SkyCoordY\n            );\n            BackImage && context.drawImage(\n                BackImage,\n                BackCoordX + BackImage.width * i,\n                BackCoordY + camera.size.y - BackImage.height\n            );\n            FrontImage && context.drawImage(\n                FrontImage,\n                FrontCoordX + FrontImage.width * i,\n                FrontCoordY + camera.size.y - FrontImage.height\n            );\n        }\n    }\n\n    return function drawStaticBackgroundLayer(context, camera) {\n        drawGradient(context, camera);\n        drawImages(context, camera);\n    };\n}\n\nexport function createSpriteLayer(entities, width = 240, height = 350) {\n    const spriteBuffer = document.createElement('canvas');\n    spriteBuffer.width = width;\n    spriteBuffer.height = height;\n    const spriteBufferContext = spriteBuffer.getContext('2d');\n\n    return function drawSpriteLayer(context, camera) {\n        entities.forEach(entity => {\n            spriteBufferContext.clearRect(0, 0, width, height);\n\n            entity.draw(spriteBufferContext);\n\n            context.drawImage(\n                spriteBuffer,\n                entity.pos.x - camera.pos.x,\n                entity.pos.y - camera.pos.y\n            );\n        });\n    };\n}\n\nexport function createDebugLayer(editor) {\n    const buffer = document.createElement('canvas');\n    buffer.width = 1024 + 60;\n    buffer.height = 600 + 60;\n\n    const context = buffer.getContext('2d');\n\n    function drawEntityBounds(camera) {\n        context.clearRect(0, 0, buffer.width, buffer.height);\n\n        const camBounds = camera.getBounds();\n        const level = editor.level;\n\n        const selectedEntity = editor.selection.selectedEntity;\n        const selectedTile = editor.selection.selectedTile;\n\n        if (selectedEntity) {\n            for (const e of level.entities) {\n                if (!camBounds.overlaps(e.bounds)) {\n                    continue;\n                }\n                context.beginPath();\n                context.strokeStyle = selectedEntity === e ? 'white' : 'black';\n                context.lineWidth = selectedEntity === e ? 2 : 1;\n                context.rect(\n                    e.bounds.left - camBounds.left,\n                    e.bounds.top - camBounds.top,\n                    e.size.x,\n                    e.size.y\n                );\n                context.stroke();\n                context.closePath();\n            }\n        } else if (selectedTile) {\n            const tile = selectedTile;\n\n            context.beginPath();\n            context.strokeStyle = 'white';\n            context.lineWidth = 2;\n            context.rect(tile.x1 - camera.pos.x, tile.y1 - camera.pos.y, tile.x2 - tile.x1, tile.y2 - tile.y1);\n            context.stroke();\n            context.closePath();\n        }\n    }\n\n    function drawLayer(context, camera) {\n        drawEntityBounds(camera);\n\n        context.drawImage(buffer, 0, 0);\n    }\n\n    return function drawDebugLayer(context, camera) {\n        drawLayer(context, camera);\n    };\n}\n","export class Compositor {\n    constructor() {\n        this.layers = [];\n    }\n\n    addLayer(layer) {\n        this.layers.push(layer);\n    }\n\n    draw(context, camera) {\n        this.layers.forEach(layer => {\n            layer(context, camera);\n        });\n    }\n}\n","import { Sides } from './Entity';\n\nexport class EntityCollider {\n    constructor(entities) {\n        this.entities = entities;\n    }\n\n    check(subject) {\n        this.entities.forEach(candidate => {\n            if (subject === candidate) {\n                return;\n            }\n            \n            if (subject.bounds.overlaps(candidate.bounds)) {                \n                const side =\n                    this.getSideY(subject, candidate) ||\n                    this.getSideX(subject, candidate);\n                subject.collides(candidate, side);\n            }\n        });\n    }\n\n    getSideX(subject, candidate) {\n        if (\n            subject.bounds.left > candidate.bounds.left &&\n            subject.bounds.left < candidate.bounds.right\n        ) {\n            return Sides.LEFT;\n        }\n\n        if (\n            subject.bounds.right < candidate.bounds.right &&\n            subject.bounds.right > candidate.bounds.left\n        ) {\n            return Sides.RIGHT;\n        }\n    }\n\n    getSideY(subject, candidate) {        \n        if (\n            subject.bounds.top > candidate.bounds.top &&\n            subject.bounds.top < candidate.bounds.bottom\n        ) {\n            return Sides.TOP;\n        }\n\n        if (\n            subject.bounds.bottom < candidate.bounds.bottom &&\n            subject.bounds.bottom > candidate.bounds.top\n        ) {\n            return Sides.BOTTOM;\n        }\n    }\n}\n","import {Compositor} from './Compositor';\nimport {EntityCollider} from './EntityCollider';\nimport {TileCollider} from './TileCreation';\n\nexport class Level {\n    constructor(name) {\n        this.name = name;\n\n        this.gravity = 1500;\n        this.totalTime = 0;\n        this.distance = 0;\n        this.freeze = false;\n\n        this.comp = new Compositor();\n        this.entities = new Set();\n        this.namedEntities = new Map();\n\n        this.entityCollider = new EntityCollider(this.entities);\n        this.tileCollider = undefined;\n\n        this.tileGrid = undefined;\n    }\n\n    setTileGrid(matrix) {\n        this.tileGrid = matrix;\n        this.tileCollider = new TileCollider(matrix);        \n    }\n\n    setDistance(distance) {\n        this.distance = distance;\n    }\n\n    update(deltaTime) {\n        if(this.frozen) {\n            return;\n        }\n\n        this.entities.forEach(entity => {\n            entity.update(deltaTime, this);\n        });\n\n        this.entities.forEach(entity => {\n            this.entityCollider.check(entity);\n        });\n\n        this.entities.forEach(entity => {\n            entity.finalize();\n        });\n\n        this.totalTime += deltaTime;\n    }\n}\n","export class Sound {\n           constructor(name, buf, createSource) {\n               this.name = name;\n               this.buffer = buf;\n               this.createSource = createSource;\n\n               this.isPlaying = false;\n               this.timeoutId = undefined;\n               this.source = undefined;\n               this.gainNode = undefined;\n           }\n\n           playOnce({ rate = 1, volume = 0.3 } = {}) {\n               const { gainNode, source } = this.createSource(this.buffer);\n               this.gainNode = gainNode;\n               this.source = source;\n\n               this.source.playbackRate.value = rate;\n               this.gainNode.gain.value = volume;            \n\n               this.source.start(0);\n               this.isPlaying = true;\n           }\n\n           playLoop({ rate = 1, volume = 0.3 } = {}) {\n               const { gainNode, source } = this.createSource(this.buffer, {\n                   loop: true\n               });\n               this.gainNode = gainNode;\n               this.source = source;\n\n               this.source.playbackRate.value = rate;\n               this.gainNode.gain.value = volume;\n\n               this.source.start(0);\n               this.isPlaying = true;\n           }\n\n           startPlaying(options) {\n               const { gainNode, source } = this.createSource(this.buffer, options);\n               this.gainNode = gainNode;\n               this.source = source;\n\n               this.source.start(0);\n               this.isPlaying = true;\n           }\n\n           stop() {\n               if (this.source) {\n                   this.source.stop();\n               }\n\n               this.isPlaying = false;\n           }\n\n           playing({ rate = 1, volume = 0.3 } = {}) {\n               if (!this.isPlaying) {\n                   this.startPlaying({ loop: true, rate, volume });\n               }\n\n               this.source.playbackRate.value = rate;\n               this.gainNode.gain.value = volume;\n\n               if (this.timeoutId) {\n                   clearTimeout(this.timeoutId);\n               }\n\n               this.timeoutId = setTimeout(this.stop.bind(this), 100);\n           }\n       }\n","import { Sound } from './Sound';\n\nclass SingleSoundContext {\n    constructor() {\n        this.context = new AudioContext();\n\n        document.addEventListener('mousemove', this.onMouseMove.bind(this));\n    }\n\n    onMouseMove(e) {\n        if(this.context.state === 'suspended') {\n            this.context.resume();\n        }\n    }\n\n    loadBuffer(url) {\n        return fetch(url)\n            .then(resp => resp.arrayBuffer())\n            .then(buf => this.context.decodeAudioData(buf));\n    }\n\n    async loadSounds(sounds) {\n        const soundsMap = new Map();\n\n        const buffers = await Promise.all(\n            sounds.map(sound => this.loadBuffer(sound.url))\n        );\n\n        sounds.forEach((sound, idx) => {\n            const buf = buffers[idx];\n            soundsMap.set(sound.name, new Sound(sound.name, buf, this.createSource.bind(this)));\n        });\n\n        return soundsMap;\n    }\n\n    createSource(buf, { volume = 0.5, loop = false, rate = 1 } = {}) {\n        const source = this.context.createBufferSource();\n        const gainNode = this.context.createGain();\n\n        source.buffer = buf;\n        source.loop = loop !== undefined ? loop : false;\n        source.playbackRate.value = rate !== undefined ? rate : 1;\n        gainNode.gain.value = volume;\n\n        source.connect(gainNode);\n        gainNode.connect(this.context.destination);\n\n        return { source, gainNode };\n    }\n}\n\nexport const SoundContext = new SingleSoundContext();\n","export class SpriteSheet {\n    constructor(skinName, image, width, height) {\n        this.skinName = skinName || 'default';\n        this.image = image;\n        this.width = width;\n        this.height = height;\n        this.tiles = new Map();\n        this.animations = new Map();\n    }\n\n    defineAnim(name, animation) {\n        this.animations.set(name, animation);\n    }\n\n    define(name, x, y, width, height) {\n        const buffers = [false, true].map(() => {\n            const buffer = document.createElement('canvas');\n            buffer.width = width;\n            buffer.height = height;\n\n            const context = buffer.getContext('2d');\n\n            context.drawImage(\n                this.image,\n                x,\n                y,\n                width,\n                height,\n                0,\n                0,\n                width,\n                height);\n\n            return buffer;\n        });\n\n        this.tiles.set(name, buffers);\n    }\n\n    draw(name, context, x, y) {\n        const buffer = this.tiles.get(name)[0];\n        context.drawImage(buffer, x, y);\n    }\n\n    drawTile(name, context, x, y) {\n        this.draw(name, context, x * this.width, y * this.height);\n    }\n}\n","import { SoundContext } from './SoundContext';\nimport { SpriteSheet } from './SpriteSheet';\nimport { Sound } from './Sound';\n\nexport function createAnim(frames, frameLen) {\n    return function resolveFrame(distance) {\n        const frameIndex = Math.floor(distance / frameLen) % frames.length;\n        const frameName = frames[frameIndex];\n        return frameName;\n    };\n}\n\nexport function loadImage(url) {\n    return new Promise(resolve => {\n        const image = new Image();\n        image.addEventListener('load', () => {\n            resolve(image);\n        });\n        image.src = url;\n    });\n}\n\nexport function loadImages(urlMap) {\n    const names = Object.keys(urlMap);\n    const urls = Object.values(urlMap);\n\n    return Promise.all(urls.map(url => loadImage(url))).then(images =>\n        images.reduce((result, image, idx) => {\n            result[names[idx]] = image;\n            return result;\n        }, {})\n    );\n}\n\nexport function loadSpriteSheet(sheetSpec) {\n    return Promise.resolve(sheetSpec)\n        .then(sheetSpec =>\n            Promise.all([sheetSpec, loadImage(sheetSpec.imageURL)])\n        )\n        .then(([sheetSpec, image]) => {\n            const sprites = new SpriteSheet(\n                sheetSpec.skinName,\n                image,\n                sheetSpec.tileW,\n                sheetSpec.tileH\n            );\n\n            if (sheetSpec.frames) {\n                sheetSpec.frames.forEach(frameSpec => {\n                    sprites.define(frameSpec.name, ...frameSpec.rect);\n                });\n            }\n\n            if (sheetSpec.animations) {\n                sheetSpec.animations.forEach(animSpec => {\n                    const animation = createAnim(\n                        animSpec.frames,\n                        animSpec.frameLen\n                    );\n                    sprites.defineAnim(animSpec.name, animation);\n                });\n            }\n\n            return sprites;\n        });\n}\n\nexport function loadSounds(soundSpec) {\n    return Promise.resolve(soundSpec)\n        .then(soundSpec =>\n            Promise.all([soundSpec, SoundContext.loadSounds(soundSpec.sounds)])\n        )\n        .then(([soundSpec, sounds]) => {\n            return Object.assign(sounds, {\n                skinName: soundSpec.skinName || 'default'\n            })\n        });\n}\n","import { createBackgroundLayer, createSpriteLayer, createStaticBackgroundLayer } from './layers';\nimport { Level } from './Level';\nimport { loadImages, loadSounds, loadSpriteSheet } from './loaders';\nimport { Matrix } from './math';\n\nfunction setupTileGrid(levelSpec, level) {\n    const tileGrid = createTileGrid(levelSpec.tiles);\n    level.setTileGrid(tileGrid);\n    level.setDistance(tileGrid.width() * 60);\n}\n\nfunction setupBackgrounds(\n    levelSpec,\n    level,\n    backgroundImages,\n    getGradientSteps,\n    tileSprite\n) {\n    const backgroundLayer = createBackgroundLayer(level, tileSprite);\n    const staticBackgroundLayer = createStaticBackgroundLayer(\n        level,\n        backgroundImages,\n        getGradientSteps\n    );\n    level.comp.addLayer(staticBackgroundLayer);\n    level.comp.addLayer(backgroundLayer);\n}\n\nfunction setupEntities(levelSpec, level, entityFactory) {\n    levelSpec.entities.forEach((tileSpec, idx) => {\n        const createEntity = entityFactory[tileSpec.name];\n        const entity = createEntity(tileSpec);\n        entity.pos.set(tileSpec.pos[0], tileSpec.pos[1]);\n        entity.idx = idx;\n\n        level.entities.add(entity);\n        tileSpec.id && level.namedEntities.set(tileSpec.id, entity);\n    });\n\n    const spriteLayer = createSpriteLayer(level.entities);\n    level.comp.addLayer(spriteLayer);\n}\n\nfunction setupSounds(level, sounds) {\n    level.sounds = sounds;\n}\n\nexport function createLevelLoader(entityFactory) {\n    return function loadLevel(levelSpec) {\n        return Promise.resolve(levelSpec)\n            .then(levelSpec =>\n                Promise.all([\n                    levelSpec,\n                    loadImages(levelSpec.background.images),\n                    levelSpec.background.gradient,\n                    loadSpriteSheet(levelSpec.tileSprite),\n                    levelSpec.sounds && loadSounds(levelSpec)\n                ])\n            )\n            .then(\n                ([levelSpec, backgroundImages, getGradientSteps, tileSprite, sounds]) => {\n                    const level = new Level(levelSpec.name);\n\n                    setupTileGrid(levelSpec, level);\n                    setupBackgrounds(\n                        levelSpec,\n                        level,\n                        backgroundImages,\n                        getGradientSteps,\n                        tileSprite\n                    );\n                    setupEntities(levelSpec, level, entityFactory);\n                    setupSounds(level, sounds);\n\n                    return level;\n                }\n            );\n    };\n}\n\nfunction createTileGrid(tiles) {\n    const grid = new Matrix();\n\n    for (const { skinName, x, y } of expandTiles(tiles)) {\n        const tile = {\n            skinName: skinName || 'default'\n        };\n        grid.set(x, y, tile);\n    }\n\n    return grid;\n}\n\nfunction* expandSpan(skinName, xStart, xLen, yStart, yLen) {\n    const xEnd = xStart + xLen;\n    const yEnd = yStart + yLen;\n    for (let x = xStart; x < xEnd; ++x) {\n        for (let y = yStart; y < yEnd; ++y) {\n            yield { skinName, x, y };\n        }\n    }\n}\n\nfunction expandRange(range) {\n    const skinDeclared = typeof range[0] === 'string';\n    const skinName = skinDeclared ? range[0] : undefined;\n\n    range = skinDeclared ? range.slice(1) : range;\n\n    if (range.length === 4) {\n        const [xStart, xLen, yStart, yLen] = range;\n        return expandSpan(skinName, xStart, xLen, yStart, yLen);\n    } else if (range.length === 3) {\n        const [xStart, xLen, yStart] = range;\n        return expandSpan(skinName, xStart, xLen, yStart, 1);\n    } else if (range.length === 2) {\n        const [xStart, yStart] = range;\n        return expandSpan(skinName, xStart, 1, yStart, 1);\n    }\n}\n\nfunction* expandRanges(ranges) {\n    for (const range of ranges) {\n        yield* expandRange(range);\n    }\n}\n\nfunction* expandTiles(tiles) {\n    yield* expandRanges(tiles);\n}\n","export class Timer {\n    constructor(deltaTime = 1/60) {\n        this.rafId = undefined;\n        \n        let accumulatedTime = 0;\n        let lastTime = 0;\n        \n        this.updateProxy = (time) => {\n            accumulatedTime += (time - lastTime) / 1000;\n\n            if (accumulatedTime > 1) {\n                accumulatedTime = 1;\n            }\n\n            while (accumulatedTime > deltaTime) {\n                this.update(deltaTime, time);\n                accumulatedTime -= deltaTime;\n            }\n\n            lastTime = time;\n\n            this.enqueue();\n        }\n    }\n\n    update() {\n        \n    }\n\n    enqueue() {\n        this.rafId = requestAnimationFrame(this.updateProxy);\n    }\n\n    start() {\n        this.enqueue();\n    }\n\n    stop() {\n        cancelAnimationFrame(this.rafId);\n    }\n}\n","import { clamp, Vec2 } from '../math';\nimport { EventEmitter } from '../util';\n\nexport const MouseEvents = {\n    CLICK: Symbol('CLICK'),\n    RIGHTCLICK: Symbol('RIGHTCLICK'),\n    DRAG: Symbol('DRAG'),\n    MOVE: Symbol('MOVE'),\n    WHEEL: Symbol('WHEEL')\n};\n\nexport const DragState = {\n    START: Symbol('START'),\n    DRAGGING: Symbol('DRAGGING'),\n    STOP: Symbol('STOP')\n};\n\n@EventEmitter.decorator\nexport class Mouse {\n    constructor(editor) {\n        this.editor = editor;\n\n        this.pos = new Vec2(0, 0);\n\n        this.downTime = 0;\n        this.downPos = new Vec2(0, 0);\n\n        this.dragging = false;\n\n        this.initHandlers();\n    }\n\n    toGamePos(x, y) {\n        const cam = this.editor.camera;\n        return new Vec2(cam.pos.x + x, cam.pos.y + y);\n    }\n\n    initHandlers() {\n        const canvas = this.editor.canvasSelector;\n\n        canvas.addEventListener('mousemove', this.handleMove.bind(this));\n        canvas.addEventListener('mousedown', this.handleDown.bind(this));\n        canvas.addEventListener('mouseup', this.handleUp.bind(this));\n        canvas.addEventListener('wheel', this.handleWheel.bind(this));\n        canvas.addEventListener('contextmenu', (e) => {\n            e.stopPropagation();\n            e.preventDefault();\n            return false;\n        });\n    }\n\n    handleDown(e) {\n        e.preventDefault();\n        \n        const { offsetX, offsetY } = e;\n\n        this.downTime = new Date().valueOf();\n        this.downPos.set(offsetX, offsetY);\n    }\n\n    handleUp(e) {\n        e.preventDefault();\n        \n        const { offsetX, offsetY } = e;\n        const pos = this.toGamePos(offsetX, offsetY);\n\n        if (this.dragging) {\n            this.handleDrag(e, DragState.STOP, pos);\n            this.dragging = false;\n            this.downTime = 0;\n            return;\n        }\n\n        this.handleClick(e);\n        this.downTime = 0;\n        return;\n    }\n\n    handleMove(e) {\n        e.preventDefault();\n        \n        const { offsetX, offsetY } = e;\n        const downPos = this.toGamePos(this.downPos.x, this.downPos.y);\n        const pos = this.toGamePos(offsetX, offsetY);\n        const delta = new Vec2(pos.x - downPos.x, pos.y - downPos.y);\n\n        const drag = this.downTime > 0 && pos.distance(this.downPos) > 2;\n        if (drag) {\n            const dragState = this.dragging ? DragState.DRAGGING : DragState.START;\n            this.handleDrag(e, dragState, pos, delta);\n            this.dragging = true;\n        }\n\n        this.emit(MouseEvents.MOVE, pos);\n        this.pos = pos;\n    }\n\n    handleClick(e) {\n        e.preventDefault();\n        \n        const { offsetX, offsetY } = e;\n        const pos = this.toGamePos(offsetX, offsetY);\n\n        if (e.which === 1) {\n            this.emit(MouseEvents.CLICK, pos);\n        } else if (e.which === 3) {\n            e.preventDefault();\n            e.stopPropagation();\n            this.emit(MouseEvents.RIGHTCLICK, pos);\n        }\n\n    }\n\n    handleWheel(e) {\n        e.preventDefault();\n\n        const { deltaX, deltaY } = e;\n\n        this.emit(MouseEvents.WHEEL, new Vec2(deltaX, deltaY));\n    }\n\n    handleDrag(e, dragState, pos, delta) {\n        this.emit(MouseEvents.DRAG, dragState, pos, delta);\n    }\n}\n","export function updateTileGrid(spec, grid) {\n    spec.tiles.splice(0, spec.tiles.length);\n\n    for (const { x, y, tile } of grid) {\n        spec.tiles.push([tile.skinName || 'default', x, y]);\n    }\n}\n\nexport function updateEntity(levelSpec, idx, specUpdates) {\n    const entitySpec = levelSpec.entities[idx];\n\n    levelSpec.entities[idx] = {\n        ...entitySpec,\n        ...specUpdates\n    };\n}\n\nexport function createEntity(levelSpec, entitySpec) {\n    const idx = levelSpec.entities.length;\n    levelSpec.entities[idx] = entitySpec;\n    return idx;\n}\n\nexport function removeEntity(levelSpec, idx) {\n    delete levelSpec.entities[idx];\n}\n\nexport async function saveLocal(levelIdx, levelSpec) {\n    // remove deleted entities and sort by x\n    const entities = levelSpec.entities\n        .filter(e => !!e)\n        .sort((a, b) => (a.pos[0] < b.pos[0] ? -1 : 1));\n\n    const specUpdate = {\n        entities,\n        tiles: levelSpec.tiles\n    };\n    const body = JSON.stringify({ specUpdate, levelIdx });\n\n    const url = 'http://localhost:12345/spec';\n    const resp = await fetch(url, {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json'\n        },\n        body\n    });\n\n    const result = await resp.json();\n    return result;\n}\n","import { clamp } from '../math';\nimport { EventEmitter } from '../util';\nimport { DragState, MouseEvents } from './Mouse';\nimport * as SpecTools from './SpecTools';\n\nexport const InteractionMode = {\n    SELECT: Symbol('SELECT'),\n    TILE: Symbol('TILE'),\n    ENTITY: Symbol('ENTITY')\n};\n\n@EventEmitter.decorator\nexport class Interaction {\n    constructor(editor) {\n        this.editor = editor;\n        this.mode = InteractionMode.SELECT;\n\n        this.editor.mouse.on(MouseEvents.CLICK, this.onClick.bind(this));\n        this.editor.mouse.on(MouseEvents.RIGHTCLICK, this.onRightClick.bind(this));\n        this.editor.mouse.on(MouseEvents.DRAG, this.onDrag.bind(this));\n        this.editor.mouse.on(MouseEvents.MOVE, this.onMove.bind(this));\n        this.editor.mouse.on(MouseEvents.WHEEL, this.onWheel.bind(this));\n\n        window.addEventListener('keydown', this.onKeyPress.bind(this));\n\n        this.dragging = {};\n        this.createEntityName = undefined;\n        this.createEntitySkinName = undefined;\n        this.createTileSkin = undefined;\n    }\n\n    get level() {\n        return this.editor.level;\n    }\n\n    get cam() {\n        return this.editor.camera;\n    }\n\n    setMode(mode) {\n        this.mode = mode;\n        this.emit('change');\n    }\n\n    setCreateEntityName(entityName) {\n        this.createEntityName = entityName;\n    }\n\n    setCreateTileSkin(skinName) {\n        this.createTileSkin = skinName;\n    }\n\n    setCreateEntitySkinName(skinName) {\n        this.createEntitySkinName = skinName;\n    }\n\n    onKeyPress(e) {\n        switch (e.code) {\n            case 'KeyT':\n                this.editor.paused ? this.editor.resume() : this.editor.pause();\n                break;\n            case 'KeyR':\n                this.editor.restart();\n                break;\n            case 'KeyQ':\n                this.setMode(InteractionMode.SELECT);\n                break;\n            case 'KeyW':\n                this.setMode(InteractionMode.TILE);\n                break;\n            case 'KeyE':\n                this.setMode(InteractionMode.ENTITY);\n                break;\n            case 'ArrowRight':\n                this.setCamPos(this.cam.pos.x + 500, this.cam.pos.y);\n                break;\n            case 'ArrowLeft':\n                this.setCamPos(this.cam.pos.x - 500, this.cam.pos.y);\n                break;\n            default:\n                break;\n        }\n    }\n\n    onMove(pos) {\n        const entity = this.editor.picker.pickEntity(pos);\n        const tile = this.editor.picker.pickTile(pos);\n    }\n\n    onDrag(dragState, pos, delta) {\n        if (dragState === DragState.STOP) {\n            this.dragging = {};\n            return;\n        }\n\n        this.tryDrawTiles(dragState, pos, delta) ||\n            this.tryDragCamera(dragState, pos, delta) ||\n            this.tryDragEntity(dragState, pos, delta);\n    }\n\n    tryDrawTiles(dragState, pos) {\n        const tile = this.editor.picker.pickTile(pos);\n\n        if (!tile && this.mode !== InteractionMode.TILE) {\n            return false;\n        }\n\n        if (dragState === DragState.START) {\n            this.dragging.drawTiles = true;\n            this.dragging.remove = tile ? true : false;\n            return true;\n        }\n\n        if (!this.dragging.drawTiles) {\n            return false;\n        }\n\n        if (dragState === DragState.DRAGGING) {\n            if (this.dragging.remove && tile) {\n                this.removeTile(pos);\n            } else if (!this.dragging.remove && !tile) {\n                this.createTile(pos);\n            }\n        }\n\n        return true;\n    }\n\n    tryDragCamera(dragState, pos, delta) {\n        if (dragState === DragState.START) {\n            const entity = this.editor.picker.pickEntity(pos);\n            const tile = this.editor.picker.pickTile(pos);\n\n            if (!entity && !tile) {\n                this.dragging.moveCamera = true;\n                this.dragging.startPos = pos;\n                this.dragging.offsetX = pos.x - this.cam.pos.x;\n                this.dragging.offsetY = pos.y - this.cam.pos.y;\n                return true;\n            }\n        }\n\n        if (!this.dragging.moveCamera) {\n            return false;\n        }\n\n        if (dragState === DragState.DRAGGING) {\n            const x = this.dragging.startPos.x - this.dragging.offsetX - delta.x;\n            const y = this.dragging.startPos.y - this.dragging.offsetY - delta.y;\n\n            this.setCamPos(x, y);\n        }\n\n        return true;\n    }\n\n    tryDragEntity(dragState, pos) {\n        if (dragState === DragState.START) {\n            const entity = this.editor.picker.pickEntity(pos);\n\n            if (entity) {\n                this.editor.selection.selectEntity(entity);\n                this.dragging.entity = entity;\n                this.dragging.offsetX = pos.x - entity.pos.x;\n                this.dragging.offsetY = pos.y - entity.pos.y;\n                return true;\n            }\n        }\n\n        if (!this.dragging.entity) {\n            return false;\n        }\n\n        if (dragState === DragState.DRAGGING) {\n            const x = pos.x - this.dragging.offsetX;\n            const y = pos.y - this.dragging.offsetY;\n            this.dragging.entity.pos.x = x;\n            this.dragging.entity.pos.y = y;\n\n            SpecTools.updateEntity(this.editor.levelSpec, this.dragging.entity.idx, {\n                pos: [x, y]\n            });\n        }\n\n        this.emit('change');\n\n        return true;\n    }\n\n    onClick(pos) {\n        switch (this.mode) {\n            case InteractionMode.SELECT:\n                this.selectInPosition(pos);\n                break;\n            case InteractionMode.TILE:\n                this.createTile(pos);\n                break;\n            case InteractionMode.ENTITY:\n                this.createEntity(pos);\n            default:\n                break;\n        }\n    }\n\n    onRightClick(pos) {\n        const entity = this.editor.picker.pickEntity(pos);\n        if (entity) {\n            this.removeEntity(pos);\n        }\n\n        const tile = this.editor.picker.pickTile(pos);\n        if (tile) {\n            this.removeTile(pos);\n        }\n    }\n\n    onWheel(delta) {\n        const x = this.cam.pos.x + delta.x;\n        const y = this.cam.pos.y + delta.y;\n\n        this.setCamPos(x, y);\n    }\n\n    setCamPos(x, y) {\n        this.cam.pos.x = clamp(x, -1000, Infinity);\n        this.cam.pos.y = clamp(y, -1000, 0);\n    }\n\n    createEntity(pos) {\n        const entityCreator = this.editor.entityFactory[this.createEntityName];\n        const entity = entityCreator({ skinName: this.createEntitySkinName });\n\n        const x = pos.x - entity.size.x / 2 - entity.offset.x;\n        const y = pos.y - entity.size.y / 2 - entity.offset.y;\n\n        const idx = SpecTools.createEntity(this.editor.levelSpec, {\n            name: entity.name,\n            pos: [x, y],\n            skinName: this.createEntitySkinName\n        });\n        entity.pos.set(x, y);\n        entity.idx = idx;\n\n        this.editor.level.entities.add(entity);\n    }\n\n    removeEntity(pos) {\n        const entity = this.editor.picker.pickEntity(pos);\n        SpecTools.removeEntity(this.editor.levelSpec, entity.idx);\n        this.editor.level.entities.delete(entity);\n    }\n\n    createTile(pos) {\n        const tileIndex = this.editor.picker.pickTileIndex(pos);\n\n        if (tileIndex) {\n            const tile = { skinName: this.createTileSkin };\n            this.level.tileGrid.set(tileIndex.x, tileIndex.y, tile);\n            SpecTools.updateTileGrid(this.editor.levelSpec, this.level.tileGrid);\n        }\n    }\n\n    removeTile(pos) {\n        const tileIndex = this.editor.picker.pickTileIndex(pos);\n\n        if (tileIndex) {\n            this.level.tileGrid.remove(tileIndex.x, tileIndex.y);\n            SpecTools.updateTileGrid(this.editor.levelSpec, this.level.tileGrid);\n        }\n    }\n\n    selectInPosition(pos) {\n        const entity = this.editor.picker.pickEntity(pos);\n        if (entity) {\n            this.editor.selection.selectEntity(entity);\n            return;\n        }\n\n        const tile = this.editor.picker.pickTile(pos);\n        if (tile) {\n            this.editor.selection.selectTile(tile);\n            return;\n        }\n\n        this.editor.selection.clear();\n    }\n\n    async saveToFile() {\n        const { success } = await SpecTools.saveLocal(\n            this.editor.levelIdx,\n            this.editor.levelSpec\n        );\n\n        return success;\n    }\n}\n","import { Entity } from './Entity';\nimport { loadSpriteSheet, loadSounds } from './loaders';\n\nfunction getDrawFn(sprite, animations, bounds) {\n    const routeAnim = animations(sprite);\n\n    return function(context) {\n        sprite.draw(routeAnim(this), context, 0, 0, bounds);\n    };\n}\n\nconst defaultOptions = {\n    spriteSpecs: [],\n    soundSpecs: [],\n\n    traits: undefined,\n    animations: undefined,\n    sounds: undefined,\n\n    drawBounds: false,\n    afterCreate: undefined\n};\n\nexport function defineGameObject(name, options) {\n    const {\n        spriteSpecs,\n        soundSpecs,\n        traits,\n        animations,\n        sounds,\n        drawBounds,\n        afterCreate\n    } = {\n        ...defaultOptions,\n        ...options\n    };\n\n    return async () => {\n        const [sprites, soundSets] = await Promise.all([\n            Promise.all(spriteSpecs.map(spec => loadSpriteSheet(spec))),\n            Promise.all(soundSpecs.map(spec => loadSounds(spec)))\n        ]);\n\n        function create(options = {}) {\n            const skinName = options.skinName || 'default';\n\n            let skinSprite = sprites.find(sprite => sprite.skinName === skinName);\n            let spriteSpec = spriteSpecs.find(spec => spec.skinName === skinName);\n\n            const skinSounds = soundSets.find(sound => sound.skinName === skinName);\n\n            if(!skinSprite) {\n                console.warn(`Skin \"${name} [${skinName}]\" not found. Fallback to the first one.`);\n                skinSprite = sprites[0];\n                spriteSpec = spriteSpecs[0];\n            }\n\n            const entity = new Entity(name);\n            entity.size.set(spriteSpec.size[0], spriteSpec.size[1]);\n            entity.offset.x = spriteSpec.offset[0];\n            entity.offset.y = spriteSpec.offset[1];\n\n            traits({ ...options, sounds: skinSounds }).forEach(trait => entity.addTrait(trait));\n\n            const bounds = drawBounds ? entity.bounds.clone() : undefined;\n            entity.draw = getDrawFn(skinSprite, animations, bounds);\n\n            entity.voice = sounds ? sounds(skinSounds) : undefined;\n\n            afterCreate && afterCreate(entity);\n\n            return entity;\n        };\n\n        create.availableSkins = sprites.map(s => s.skinName || 'default');\n        \n        return create;\n    };\n}\n","export default {\n    skinName: 'cactus',\n    imageURL: require('../../../img/enemies/cactus.png'),\n    size: [50, 51],\n    offset: [5, 21],\n    frames: [\n        {\n            name: 'idle-1',\n            rect: [61 * 0, -8, 61, 73]\n        },\n        {\n            name: 'idle-2',\n            rect: [61 * 1 + 1, -8, 61, 73]\n        },\n        {\n            name: 'idle-3',\n            rect: [61 * 2 + 1, -8, 61, 73]\n        },\n        {\n            name: 'idle-4',\n            rect: [61 * 3 + 1, -8, 61, 73]\n        },\n        {\n            name: 'idle-5',\n            rect: [61 * 4 + 4, -7, 61, 73]\n        },\n        {\n            name: 'idle-6',\n            rect: [61 * 5 + 9, -7, 61, 73]\n        },\n\n        {\n            name: 'attack-1',\n            rect: [197, 215, 61, 73]\n        },\n        {\n            name: 'attack-2',\n            rect: [110, 215, 75, 73]\n        },\n        {\n            name: 'attack-3',\n            rect: [14, 215, 75, 73]\n        },\n\n        {\n            name: 'death-1',\n            rect: [197 + 63 * 0, 216, 63, 73]\n        },\n        {\n            name: 'death-2',\n            rect: [197 + 63 * 1, 216, 63, 73]\n        },\n        {\n            name: 'death-3',\n            rect: [197 + 63 * 2, 216, 63, 73]\n        },\n        {\n            name: 'death-4',\n            rect: [197 + 63 * 3, 216, 63, 73]\n        },\n        {\n            name: 'death-5',\n            rect: [197 + 63 * 4, 216, 63, 73]\n        },\n        {\n            name: 'death-6',\n            rect: [197 + 63 * 5, 216, 63, 73]\n        }\n    ],\n    animations: [\n        {\n            name: 'idle',\n            frameLen: 0.2,\n            frames: ['idle-1', 'idle-2', 'idle-3', 'idle-4', 'idle-5', 'idle-6']\n        },\n        {\n            name: 'attack',\n            frameLen: 0.1,\n            frames: ['attack-1', 'attack-2', 'attack-3']\n        },\n\n        {\n            name: 'death',\n            frameLen: 0.1,\n            frames: ['death-1', 'death-2', 'death-3', 'death-4', 'death-5', 'death-6']\n        }\n    ]\n};\n","export default {\n    imageURL: require('../../../img/enemies/targets.png'),\n    skinName: 'target',\n    size: [50, 75],\n    offset: [25, 18],\n\n    frames: [\n        {\n            name: 'idle-1',\n            rect: [91 * 0, 0, 91, 104]\n        },\n        {\n            name: 'idle-2',\n            rect: [91 * 1, 0, 91, 104]\n        },\n        {\n            name: 'idle-3',\n            rect: [91 * 2, 0, 91, 104]\n        },\n        {\n            name: 'idle-4',\n            rect: [91 * 3, 0, 91, 104]\n        },\n        {\n            name: 'idle-5',\n            rect: [91 * 4, 0, 91, 104]\n        },\n        {\n            name: 'idle-6',\n            rect: [91 * 5, 0, 91, 104]\n        },\n        {\n            name: 'idle-7',\n            rect: [91 * 5, 104 * 1, 91, 104]\n        },\n        {\n            name: 'idle-8',\n            rect: [91 * 4, 104 * 1, 91, 104]\n        },\n        {\n            name: 'idle-9',\n            rect: [91 * 3, 104 * 1, 91, 104]\n        },\n        {\n            name: 'idle-10',\n            rect: [91 * 2, 104 * 1, 91, 104]\n        },\n        {\n            name: 'idle-11',\n            rect: [91 * 1, 104 * 1, 91, 104]\n        },\n        {\n            name: 'idle-12',\n            rect: [91 * 0, 104 * 1, 91, 104]\n        },\n\n        {\n            name: 'death-1',\n            rect: [91 * 5, 104 * 3, 91, 104]\n        },\n        {\n            name: 'death-2',\n            rect: [91 * 4, 104 * 3, 91, 104]\n        },\n        {\n            name: 'death-3',\n            rect: [91 * 3, 104 * 3, 91, 104]\n        },\n        {\n            name: 'death-4',\n            rect: [91 * 2, 104 * 3, 91, 104]\n        },\n        {\n            name: 'death-5',\n            rect: [91 * 1, 104 * 3, 95, 104]\n        },\n        {\n            name: 'death-6',\n            rect: [91 * 0, 104 * 3, 95, 104]\n        }\n    ],\n    animations: [\n        {\n            name: 'idle',\n            frameLen: 0.2,\n            frames: [\n                'idle-1',\n                'idle-2',\n                'idle-3',\n                'idle-4',\n                'idle-5',\n                'idle-6',\n                'idle-7',\n                'idle-8',\n                'idle-9',\n                'idle-10',\n                'idle-11',\n                'idle-12'\n            ]\n        },\n        {\n            name: 'attack',\n            frameLen: 0.1,\n            frames: ['death-1', 'death-2', 'death-3', 'death-4', 'death-5', 'death-6']\n        },\n\n        {\n            name: 'death',\n            frameLen: 0.1,\n            frames: ['death-1', 'death-2', 'death-3', 'death-4', 'death-5', 'death-6']\n        }\n    ]\n};\n","import { Entity, Trait } from '../Entity';\nimport { loadSpriteSheet } from '../loaders';\nimport { Killable, Physics, Solid, Stackable } from '../Traits';\nimport { defineGameObject } from '../defineGameObject';\nimport ENEMY_CACTUS from './enemy_skins/enemy_cactus';\nimport ENEMY_TARGET from './enemy_skins/enemy_target';\n\nclass BehaviorEnemy extends Trait {\n    constructor() {\n        super('behavior');\n\n        this.attackDuration = 0.25;\n        this.cancelAttackAfter = 2;\n        this.inAttack = false;\n        this.startAttackTime = 0;\n        this.attackTime = 0;\n    }\n\n    update(entity, deltaTime, level) {\n        if (entity.killable.dead) {\n            entity.vel.x += 1000;\n            return;\n        }\n\n        if (!this.inAttack || this.attackTime > this.attackDuration) {\n            return;\n        }\n\n        this.attackTime = entity.lifetime - this.startAttackTime;\n    }\n\n    collides(us, them) {\n        if (!them.killable || us.killable.dead || us.name === them.name) {\n            return;\n        }\n\n        them.killable.kill();\n\n        if (!this.inAttack) {\n            this.inAttack = true;\n            this.startAttackTime = us.lifetime;\n\n            setTimeout(() => {\n                this.inAttack = false;\n                this.attackTime = 0;\n                this.startAttackTime = 0;\n            }, this.cancelAttackAfter * 1000);\n        }\n    }\n}\n\nexport const loadEnemy = defineGameObject('enemy', {\n    spriteSpecs: [ENEMY_CACTUS, ENEMY_TARGET],\n    // drawBounds: true,\n\n    afterCreate: entity => {\n        entity.killable.removeAfter = 0.6;\n    },\n\n    traits: ({ ownerEntity }) => [\n        new Physics(),\n        new Solid(),\n        new Killable(),\n        new Stackable(),\n        new BehaviorEnemy()\n    ],\n    animations: sprite => {\n        const idleAnim = sprite.animations.get('idle');\n        const attackAnim = sprite.animations.get('attack');\n        const deathAnim = sprite.animations.get('death');\n\n        return enemy => {\n            if (enemy.behavior.inAttack) {\n                return attackAnim(enemy.behavior.attackTime);\n            }\n\n            if (enemy.killable.dead) {\n                return deathAnim(enemy.killable.deadTime);\n            }\n\n            return idleAnim(enemy.lifetime);\n        };\n    }\n});\n","import { defineGameObject } from '../defineGameObject';\nimport { Entity } from '../Entity';\nimport { Jump, Killable, Physics, Picker, Run, Solid, Striker, Killer } from '../Traits';\n\nconst UNICORN_SPRITE = {\n    imageURL: require('../../img/unicorn.png'),\n    skinName: 'default',\n    size: [90, 100],\n    offset: [45, 40],\n    frames: [\n        {\n            name: 'idle',\n            rect: [172 * 23, 0, 172, 142]\n        },\n        {\n            name: 'run-1',\n            rect: [172 * 24, 0, 172, 142]\n        },\n        {\n            name: 'run-2',\n            rect: [172 * 25, 0, 172, 142]\n        },\n        {\n            name: 'run-3',\n            rect: [172 * 26, 0, 172, 142]\n        },\n        {\n            name: 'run-4',\n            rect: [172 * 27, 0, 172, 142]\n        },\n        {\n            name: 'run-5',\n            rect: [172 * 28, 0, 172, 142]\n        },\n        {\n            name: 'run-6',\n            rect: [172 * 29, 0, 172, 142]\n        },\n        {\n            name: 'run-7',\n            rect: [172 * 30, 0, 172, 142]\n        },\n        {\n            name: 'run-8',\n            rect: [172 * 31, 0, 172, 142]\n        },\n        {\n            name: 'break',\n            rect: [172 * 23, 0, 172, 142]\n        },\n        {\n            name: 'jump-1',\n            rect: [172 * 19, 0, 172, 142]\n        },\n        {\n            name: 'jump-2',\n            rect: [172 * 20, 0, 172, 142]\n        },\n        {\n            name: 'jump-3',\n            rect: [172 * 21, 0, 172, 142]\n        },\n        {\n            name: 'jump-4',\n            rect: [172 * 22, 0, 172, 142]\n        },\n        {\n            name: 'fall-1',\n            rect: [172 * 25, 0, 172, 142]\n        },\n        {\n            name: 'fall-2',\n            rect: [172 * 26, 0, 172, 142]\n        },\n        {\n            name: 'death-1',\n            rect: [172 * 8, 0, 172, 142]\n        },\n        {\n            name: 'death-2',\n            rect: [172 * 9, 0, 172, 142]\n        },\n        {\n            name: 'death-3',\n            rect: [172 * 10, 0, 172, 142]\n        },\n        {\n            name: 'death-4',\n            rect: [172 * 11, 0, 172, 142]\n        },\n        {\n            name: 'death-5',\n            rect: [172 * 12, 0, 172, 142]\n        },\n        {\n            name: 'death-6',\n            rect: [172 * 13, 0, 172, 142]\n        },\n        {\n            name: 'death-7',\n            rect: [172 * 8, 0, 172, 142]\n        },\n        {\n            name: 'death-8',\n            rect: [172 * 8, 0, 172, 142]\n        },\n        {\n            name: 'death-9',\n            rect: [172 * 8, 0, 172, 142]\n        },\n\n        {\n            name: 'cast-1',\n            rect: [172 * 0, 0, 172, 142]\n        },\n        {\n            name: 'cast-2',\n            rect: [172 * 1, 0, 172, 142]\n        },\n        {\n            name: 'cast-3',\n            rect: [172 * 2, 0, 172, 142]\n        },\n        {\n            name: 'cast-4',\n            rect: [172 * 3, 0, 172, 142]\n        },\n        {\n            name: 'cast-5',\n            rect: [172 * 4, 0, 172, 142]\n        },\n        {\n            name: 'cast-6',\n            rect: [172 * 5, 0, 172, 142]\n        }\n    ],\n\n    animations: [\n        {\n            name: 'run',\n            frameLen: 20,\n            frames: [\n                'run-1',\n                'run-2',\n                'run-3',\n                'run-4',\n                'run-5',\n                'run-6',\n                'run-7',\n                'run-8'\n            ]\n        },\n        {\n            name: 'jump',\n            frameLen: 0.2,\n            frames: ['jump-1', 'jump-2', 'jump-3', 'jump-4']\n        },\n        {\n            name: 'fall',\n            frameLen: 0.2,\n            frames: ['fall-1', 'fall-2']\n        },\n        {\n            name: 'cast',\n            frameLen: 0.1,\n            frames: [\n                // 'cast-1',\n                // 'cast-2',\n                // 'cast-3',\n                'cast-4'\n                // 'cast-5',\n                // 'cast-6',\n            ]\n        },\n        {\n            name: 'death',\n            frameLen: 0.2,\n            frames: [\n                'death-1',\n                'death-2',\n                'death-3',\n                'death-4',\n                'death-5',\n                'death-6',\n                'death-7',\n                'death-8',\n                'death-9'\n            ]\n        }\n    ]\n};\n\nconst UNICORN_SOUNDS = {\n    sounds: [\n        {\n            url: require('../../sounds/clip-clop.wav'),\n            name: 'clip-clop',\n            loop: true\n        },\n        {\n            url: require('../../sounds/horse-die.wav'),\n            name: 'die'\n        },\n        {\n            url: require('../../sounds/jump.wav'),\n            name: 'jump'\n        },\n        {\n            url: require('../../sounds/land.wav'),\n            name: 'land'\n        }\n    ]\n};\n\nfunction animations(sprite) {\n    const runAnim = sprite.animations.get('run');\n    const jumpAnim = sprite.animations.get('jump');\n    const fallAnim = sprite.animations.get('fall');\n    const deathAnim = sprite.animations.get('death');\n    const castAnim = sprite.animations.get('cast');\n\n    return unicorn => {\n        if (unicorn.killable.dead) {\n            return deathAnim(unicorn.killable.deadTime);\n        }\n\n        if (unicorn.striker.isStriking()) {\n            // return castAnim(unicorn.striker.strikeTime);\n            return castAnim(unicorn.lifetime);\n        }\n\n        if (unicorn.jump.jumpingUp) {\n            return jumpAnim(unicorn.jump.engageTime);\n        }\n\n        if (unicorn.run.lastSpeed < 1000) {\n            return 'idle';\n        }\n\n        if (unicorn.jump.fallingDown) {\n            return fallAnim(unicorn.jump.engageTime);\n        }\n\n        if (unicorn.run.distance > 0) {\n            return runAnim(unicorn.run.distance);\n        }\n\n        return 'idle';\n    };\n}\n\nfunction sounds(sounds) {\n    const runSound = sounds.get('clip-clop');\n    const dieSound = sounds.get('die');\n\n    return unicorn => {\n        if (unicorn.killable.dead) {\n            dieSound.playing({ volume: 0.1 });\n            return;\n        }\n\n        if (unicorn.jump.jumpingUp) {\n            return;\n        }\n\n        if (unicorn.jump.fallingDown) {\n            return;\n        }\n\n        if (unicorn.run.distance > 0) {\n            runSound.playing({ rate: unicorn.run.realSpeed / 10000, volume: 0.02 });\n            return;\n        }\n    };\n}\n\nexport const loadUnicorn = defineGameObject('unicorn', {\n    spriteSpecs: [UNICORN_SPRITE],\n    soundSpecs: [UNICORN_SOUNDS],\n\n    traits: ({ speed }) => [\n        new Physics(),\n        new Solid(),\n        new Run({ speed: speed || 15000 }),\n        new Jump(),\n        new Picker(),\n        new Killable({ removeAfter: 1 }),\n        new Striker(),\n        new Killer()\n    ],\n    animations,\n    sounds\n});\n","import { defineGameObject } from '../defineGameObject';\nimport { Trait } from '../Entity';\nimport { Physics, Solid } from '../Traits';\n\nconst UFO_SPRITE = {\n    size: [240, 350],\n    offset: [0, 0],\n    skinName: 'default',\n\n    imageURL: require('../../img/ufo.png'),\n    frames: [\n        {\n            name: 'idle',\n            rect: [0, 0, 240, 350]\n        }\n    ],\n    animations: [\n        {\n            name: 'idle',\n            frameLen: 0.1,\n            frames: ['idle']\n        }\n    ]\n};\n\nclass BehaviorUfo extends Trait {\n    constructor(napEntity, sounds) {\n        super('ufoBehavior');\n        this.napEntity = napEntity;\n        this.sounds = sounds;\n\n        this.catched = false;\n        this.catchTime = 0;\n\n        this.spawned = false;\n    }\n\n    spawn() {\n        this.entity.pos.x = this.napEntity.pos.x - 1500;\n        this.spawned = true;\n\n        this.sounds.get('ufo').playOnce();\n    }\n\n    catch(deltaTime) {\n        this.catched = true;\n        this.catchTime = deltaTime;\n        \n        this.napEntity.removeTrait('solid');\n        this.napEntity.removeTrait('physics');\n    }\n\n    canCatch() {\n        const ufoCenter = this.entity.bounds.left + this.entity.bounds.width / 2;\n        const napCenter = this.napEntity.bounds.left + this.napEntity.bounds.width / 2;\n        const canCatch = ufoCenter - napCenter > 0;\n        return canCatch;\n    }\n\n    abduct() {\n        const ufoCenterX = this.entity.bounds.left + this.entity.bounds.width / 2;\n\n        this.entity.vel.y -= 50;\n        \n        if(this.entity.vel.x > 100) {\n            this.entity.vel.x -= 100;\n        }\n\n        this.napEntity.pos.x = ufoCenterX - this.napEntity.bounds.width / 2;\n        this.napEntity.pos.y = this.entity.bounds.bottom - this.napEntity.bounds.height;\n    }\n\n    alignTarget() {\n        this.entity.vel.x += 100;\n        this.entity.bounds.bottom =\n            this.napEntity.bounds.top + this.napEntity.bounds.height / 2;\n    }\n\n    update(entity, deltaTime, level) {\n        if (!this.spawned && !level.frozen) {\n            this.spawn();\n        }\n\n        if (!this.catched) {\n            this.alignTarget();\n\n            this.canCatch() && this.catch(deltaTime);\n        }\n\n        if (this.catched) {\n            this.abduct();\n        }\n    }\n}\n\nconst UFO_SOUNDS = {\n    sounds: [\n        {\n            url: require('../../sounds/ufo.wav'),\n            name: 'ufo'\n        }\n    ]\n};\n\nexport const loadUfo = defineGameObject('ufo', {\n    spriteSpecs: [UFO_SPRITE],\n    soundSpecs: [UFO_SOUNDS],\n    // drawBounds: true,\n\n    traits: ({ napEntity, sounds }) => [\n        new Physics({ applyGravity: false }),\n        new BehaviorUfo(napEntity, sounds)\n    ],\n    animations: sprite => {\n        const idleAnim = sprite.animations.get('idle');\n\n        return entity => {\n            return idleAnim(entity.lifetime);\n        };\n    }\n});\n","export const MANA_BUBBLES_SPRITE = {\n    skinName: 'default',\n    size: [70, 70],\n    offset: [15, 0],\n\n    imageURL: require('../../img/pickables/mana_bubbles.png'),\n    frames: [\n        {\n            name: 'idle-1',\n            rect: [0, 300, 95, 60]\n        },\n        {\n            name: 'idle-2',\n            rect: [95 * 1, 300, 95, 60]\n        },\n        {\n            name: 'idle-3',\n            rect: [95 * 2, 300, 95, 60]\n        },\n        {\n            name: 'idle-4',\n            rect: [95 * 3, 300, 95, 60]\n        },\n        {\n            name: 'idle-5',\n            rect: [95 * 4, 300, 95, 60]\n        },\n\n        {\n            name: 'idle-6',\n            rect: [0, 400, 95, 60]\n        },\n        {\n            name: 'idle-7',\n            rect: [95 * 1, 400, 95, 60]\n        },\n        {\n            name: 'idle-8',\n            rect: [95 * 2, 400, 95, 60]\n        },\n        {\n            name: 'idle-9',\n            rect: [95 * 3, 400, 95, 60]\n        },\n        {\n            name: 'idle-10',\n            rect: [95 * 4, 400, 95, 60]\n        },\n\n        {\n            name: 'idle-11',\n            rect: [0, 500, 95, 60]\n        },\n        {\n            name: 'idle-12',\n            rect: [95 * 1, 500, 95, 60]\n        },\n        {\n            name: 'idle-13',\n            rect: [95 * 2, 500, 95, 60]\n        },\n        {\n            name: 'idle-14',\n            rect: [95 * 3, 500, 95, 60]\n        },\n        {\n            name: 'idle-15',\n            rect: [95 * 4, 500, 95, 60]\n        },\n    ],\n    animations: [\n        {\n            name: 'idle',\n            frameLen: 0.1,\n            frames: [\n                'idle-1',\n                'idle-2',\n                'idle-3',\n                'idle-4',\n                'idle-5',\n                'idle-6',\n                'idle-7',\n                'idle-8',\n                'idle-9',\n                'idle-10',\n                'idle-11',\n                'idle-12',\n                'idle-13',\n                'idle-14',\n                'idle-15',\n            ]\n        }\n    ]\n};\n","export const MANA_PYLON_SPRITE = {\n    size: [70, 70],\n    offset: [15, 0],\n\n    skinName: 'pylon',\n    imageURL: require('../../img/pickables/mana_pylon.png'),\n    frames: Array.from(new Array(10)).map((val, idx) => ({\n        name: `idle-${idx + 1}`,\n        rect: [45 * idx, 72, 45, 53]\n    })),\n    animations: [\n        {\n            name: 'idle',\n            frameLen: 0.1,\n            frames: [\n                'idle-1'\n                // 'idle-2',\n                // 'idle-3',\n                // 'idle-4',\n                // 'idle-5',\n                // 'idle-6',\n                // 'idle-7',\n                // 'idle-8',\n                // 'idle-9',\n                // 'idle-10',\n                // 'idle-11',\n                // 'idle-12',\n                // 'idle-13',\n                // 'idle-14',\n                // 'idle-15',\n            ]\n        }\n    ]\n};\n","import { defineGameObject } from '../defineGameObject';\nimport { Trait } from '../Entity';\nimport { Physics, Pickable, Solid } from '../Traits';\nimport { MANA_BUBBLES_SPRITE } from './ManaPot.bubbles';\nimport { MANA_PYLON_SPRITE } from './ManaPot.pylon';\n\nconst SOUNDS = {\n    sounds: [\n        {\n            url: require('../../sounds/picked.wav'),\n            name: 'picked'\n        }\n    ]\n};\n\nclass Behavior extends Trait {\n    constructor() {\n        super('behavior');\n    }\n\n    collides(us, them) {\n        if (us.pickable.picked || !them.picker) {\n            return;\n        }\n        us.pickable.pick();\n        us.vel.set(30, -400);\n        us.solid.obstructs = false;\n    }\n}\n\nexport const loadManaPot = defineGameObject('manaPot', {\n    spriteSpecs: [MANA_BUBBLES_SPRITE, MANA_PYLON_SPRITE],\n    soundSpecs: [SOUNDS],\n\n    // drawBounds: true,\n\n    traits: ({sounds}) => [\n        new Physics({ applyGravity: false }),\n        new Solid(),\n        new Pickable({ onPick: () => sounds.get('picked').playOnce() }),\n        new Behavior()\n    ],\n\n    animations: sprite => {\n        const idleAnim = sprite.animations.get('idle');\n\n        return entity => {\n            return idleAnim(entity.lifetime);\n        };\n    }\n});\n","import { Entity, Trait } from '../Entity';\nimport { loadSpriteSheet } from '../loaders';\nimport { Physics, Pickable, Solid } from '../Traits';\nimport { rand, Vec2 } from '../math';\nimport { defineGameObject } from '../defineGameObject';\n\nconst PORTAL = {\n    skinName: 'default',\n    size: [36, 72],\n    offset: [0, 0],\n\n    imageURL: require('../../img/pickables/portal.png'),\n    frames: [\n        {\n            name: 'portal-1',\n            rect: [36 * 0, 0, 36, 72]\n        },\n        {\n            name: 'portal-2',\n            rect: [36 * 1, 0, 36, 72]\n        },\n        {\n            name: 'portal-3',\n            rect: [36 * 2, 0, 36, 72]\n        },\n        {\n            name: 'portal-4',\n            rect: [36 * 3, 0, 36, 72]\n        },\n        {\n            name: 'portal-5',\n            rect: [36 * 4, 0, 36, 72]\n        },\n        {\n            name: 'portal-6',\n            rect: [36 * 5, 0, 36, 72]\n        }\n    ],\n    animations: [\n        {\n            name: 'portal',\n            frameLen: 0.1,\n            frames: [\n                'portal-1',\n                'portal-2',\n                'portal-3',\n                'portal-4',\n                'portal-5',\n                'portal-6'\n            ]\n        }\n    ]\n};\n\nclass BehaviorPortal extends Trait {\n    constructor({ destintaion }) {\n        super('behavior');\n        this.destintaion = destintaion;\n    }\n\n    collides(us, them) {\n        if (us.pickable.picked || !them.picker) {\n            return;\n        }\n\n        us.pickable.pick();\n        us.vel.set(30, -400);\n        us.solid.obstructs = false;\n\n        const dest = this.destintaion || new Vec2(this.pos.x + rand.int(100, 1000), -100);\n        them.pos.set(dest.x, dest.y);\n    }\n}\n\nexport const loadPortal = defineGameObject('portal', {\n    spriteSpecs: [PORTAL],\n\n    traits: ({ destintaion }) => [\n        new Physics({ applyGravity: false }),\n        new Solid(),\n        new Pickable(),\n        new BehaviorPortal({ destintaion })\n    ],\n    animations: sprite => {\n        const portalAnim = sprite.animations.get('portal');\n\n        return portal => {\n            return portalAnim(portal.lifetime);\n        };\n    }\n});\n","import { Entity, Trait } from '../Entity';\nimport { Physics, Pickable, Solid, Soundable } from '../Traits';\nimport { loadSpriteSheet } from '../loaders';\nimport { defineGameObject } from '../defineGameObject';\n\nconst RAINBOW_SPRITE = {\n    imageURL: require('../../img/pickables/rainbow.png'),\n    size: [83, 93],\n    offset: [0, 0],\n    skinName: 'default',\n\n    frames: [\n        {\n            name: 'spark-1',\n            rect: [0, 0, 83, 93]\n        },\n        {\n            name: 'spark-2',\n            rect: [83, 0, 83, 93]\n        },\n        {\n            name: 'spark-3',\n            rect: [166, 0, 83, 93]\n        },\n        {\n            name: 'spark-4',\n            rect: [249, 0, 83, 93]\n        },\n        {\n            name: 'spark-5',\n            rect: [332, 0, 83, 93]\n        },\n        {\n            name: 'spark-6',\n            rect: [415, 0, 83, 93]\n        }\n    ],\n    animations: [\n        {\n            name: 'spark',\n            frameLen: 0.2,\n            frames: ['spark-1', 'spark-2', 'spark-3', 'spark-4', 'spark-5', 'spark-6']\n        }\n    ]\n};\n\nconst RAINBOW_SOUNDS = {\n    sounds: [\n        {\n            url: require('../../sounds/picked.wav'),\n            name: 'picked'\n        }\n    ]\n};\n\nclass BehaviorRainbow extends Trait {\n    constructor() {\n        super('behavior');\n    }\n\n    collides(us, them) {\n        if (us.pickable.picked || !them.picker ) {\n            return;\n        }\n\n        us.pickable.pick();\n        us.vel.set(30, -400);\n        us.solid.obstructs = false;\n    }\n}\n\nexport const loadRainbow = defineGameObject('rainbow', {\n    spriteSpecs: [RAINBOW_SPRITE],\n    soundSpecs: [RAINBOW_SOUNDS],\n\n    traits: ({ sounds }) => [\n        new Physics({ applyGravity: false }),\n        new Solid(),\n        new Pickable({ onPick: () => sounds.get('picked').playOnce() }),\n        new BehaviorRainbow()\n    ],\n\n    animations: sprite => {\n        const sparkAnim = sprite.animations.get('spark');\n\n        return rainbow => {\n            return sparkAnim(rainbow.lifetime);\n        };\n    }\n});\n","import { Entity, Trait } from '../Entity';\nimport { loadSpriteSheet } from '../loaders';\nimport { Physics, Pickable, Solid } from '../Traits';\nimport { defineGameObject } from '../defineGameObject';\n\nconst SPEED_BOOSTER = {\n    imageURL: require('../../img/pickables/horseshoe.png'),\n    size: [45, 49],\n    offset: [0, 0],\n    skinName: 'default',\n\n    frames: [\n        {\n            name: 'horseshoe-1',\n            rect: [0, 0, 36, 49]\n        },\n        {\n            name: 'horseshoe-2',\n            rect: [37, 0, 38, 49]\n        },\n        {\n            name: 'horseshoe-3',\n            rect: [76, 0, 35, 49]\n        },\n        {\n            name: 'horseshoe-4',\n            rect: [112, 0, 37, 49]\n        },\n        {\n            name: 'horseshoe-5',\n            rect: [150, 0, 42, 49]\n        },\n        {\n            name: 'horseshoe-6',\n            rect: [193, 0, 43, 49]\n        },\n        {\n            name: 'horseshoe-7',\n            rect: [237, 0, 44, 49]\n        },\n        {\n            name: 'horseshoe-8',\n            rect: [282, 0, 45, 49]\n        },\n        {\n            name: 'horseshoe-9',\n            rect: [328, 0, 35, 49]\n        },\n        {\n            name: 'horseshoe-10',\n            rect: [368, 0, 40, 49]\n        },\n        {\n            name: 'horseshoe-11',\n            rect: [409, 0, 41, 49]\n        },\n        {\n            name: 'horseshoe-12',\n            rect: [451, 0, 45, 49]\n        }\n    ],\n    animations: [\n        {\n            name: 'horseshoe',\n            frameLen: 0.1,\n            frames: [\n                'horseshoe-1',\n                'horseshoe-2',\n                'horseshoe-3',\n                'horseshoe-4',\n                'horseshoe-5',\n                'horseshoe-6',\n                'horseshoe-7',\n                'horseshoe-8',\n                'horseshoe-9',\n                'horseshoe-10',\n                'horseshoe-11',\n                'horseshoe-12'\n            ]\n        }\n    ]\n};\n\nclass BehaviorSpeedBooster extends Trait {\n    constructor() {\n        super('behavior');\n\n        this.boost = 5000;\n        this.boostTime = 10000;\n    }\n\n    restoreSpeed(them) {\n        if (them.jump.jumpingUp || them.jump.fallingDown) {\n            them.run.queue(() => this.restoreSpeed(them));\n        } else {\n            them.run.speed -= this.boost;\n        }\n    }\n\n    collides(us, them) {\n        if (us.pickable.picked || !them.picker) {\n            return;\n        }\n        us.pickable.pick();\n        us.vel.set(30, -400);\n        us.solid.obstructs = false;\n\n        them.run.speed += this.boost;\n\n        setTimeout(() => this.restoreSpeed.call(this, them), this.boostTime);\n    }\n}\n\nconst SPEED_SOUNDS = {\n    sounds: [\n        {\n            url: require('../../sounds/picked.wav'),\n            name: 'picked'\n        }\n    ]\n};\n\nexport const loadSpeedBooster = defineGameObject('speedBooster', {\n    spriteSpecs: [SPEED_BOOSTER],\n    soundSpecs: [SPEED_SOUNDS],\n\n    traits: ({ sounds }) => [\n        new Physics({ applyGravity: false }),\n        new Solid(),\n        new Pickable({ onPick: () => sounds.get('picked').playOnce() }),\n        new BehaviorSpeedBooster()\n    ],\n\n    animations: sprite => {\n        const boosterAnim = sprite.animations.get('horseshoe');\n\n        return speedbooster => {\n            return boosterAnim(speedbooster.lifetime);\n        };\n    }\n});\n","import { defineGameObject } from '../defineGameObject';\nimport { Trait } from '../Entity';\nimport { Physics, Solid } from '../Traits';\n\nconst FIREBALL_SPRITE = {\n    skinName: 'default',\n    imageURL: require('../../img/weapon/fireball.png'),\n    size: [55, 25],\n    offset: [0, 35],\n\n    frames: [\n        {\n            name: 'idle-1',\n            rect: [0, 1182, 97, 97]\n        },\n        {\n            name: 'idle-2',\n            rect: [97 * 1 + 1, 1182, 97, 97]\n        },\n        {\n            name: 'idle-3',\n            rect: [97 * 2 + 1, 1182, 97, 97]\n        },\n        {\n            name: 'idle-4',\n            rect: [97 * 3 + 1, 1182, 97, 97]\n        },\n        {\n            name: 'idle-5',\n            rect: [97 * 4 + 1, 1182, 97, 97]\n        },\n        {\n            name: 'idle-6',\n            rect: [97 * 5 + 1, 1182, 97, 97]\n        },\n        {\n            name: 'idle-7',\n            rect: [97 * 6 + 1, 1182, 97, 97]\n        }\n    ],\n    animations: [\n        {\n            name: 'idle',\n            frameLen: 0.1,\n            frames: [\n                // 'idle-1',\n                // 'idle-2',\n                // 'idle-3',\n                'idle-4',\n                'idle-5',\n                'idle-6',\n                'idle-7'\n            ]\n        }\n    ]\n};\n\nconst FIREBALL_SOUNDS = {\n    sounds: [\n        {\n            url: require('../../sounds/fireball-cast.wav'),\n            name: 'cast'\n        },\n        {\n            url: require('../../sounds/fireball-release.wav'),\n            name: 'release'\n        }\n    ]\n};\n\nclass BehaviorBullet extends Trait {\n    constructor(ownerEntity, sounds) {\n        super('bulletBehavior');\n\n        this.ownerEntity = ownerEntity;\n        this.sounds = sounds;\n        this.destroyed = false;\n    }\n\n    destroy() {\n        this.queue(() => {\n            this.destroyed = true;\n        });\n    }\n\n    update(entity, deltaTime, level) {\n        if (this.destroyed) {\n            this.queue(() => {\n                level.entities.delete(entity);\n            });\n        }\n    }\n\n    obstruct() {\n        this.destroy();\n        this.sounds.get('release').playOnce({ volume: 0.3 });\n    }\n\n    collides(us, them) {\n        if (!them.killable || them.killable.dead || them === this.ownerEntity) {\n            return;\n        }\n\n        this.ownerEntity.killer && this.ownerEntity.killer.kill(them);\n        them.killable.kill();\n        this.destroy();\n        \n        this.sounds.get('release').playOnce({ volume: 0.3 });         \n    }\n\n    striked() {\n        this.sounds.get('cast').playOnce({ volume: 0.1, rate: 3 });\n    }\n}\n\nexport const loadBullet = defineGameObject('bullet', {\n    spriteSpecs: [FIREBALL_SPRITE],\n    soundSpecs: [FIREBALL_SOUNDS],\n\n    // drawBounds: true,\n\n    traits: ({ ownerEntity, sounds }) => [\n        new Physics({ applyGravity: false }),\n        new Solid(),\n        new BehaviorBullet(ownerEntity, sounds)\n    ],\n    animations: sprite => {\n        const idleAnim = sprite.animations.get('idle');\n\n        return portal => {\n            return idleAnim(portal.lifetime);\n        };\n    }\n});\n","import { Entity, Trait } from '../Entity';\nimport { loadSpriteSheet } from '../loaders';\nimport { Physics, Pickable, Solid, Impassable } from '../Traits';\nimport { rand, Vec2 } from '../math';\nimport { defineGameObject } from '../defineGameObject';\n\nconst DOOR = {\n    size: [120, 165],\n    offset: [0, 0],\n\n    skinName: 'default',\n\n    imageURL: require('../../img/other/doors.png'),\n    frames: [\n        {\n            name: 'idle',\n            rect: [407, 41, 120, 165]\n        },\n        {\n            name: 'open-1',\n            rect: [407, 287, 120, 165]\n        },\n        {\n            name: 'open-2',\n            rect: [407, 535, 120, 165]\n        },\n        {\n            name: 'open-3',\n            rect: [407, 700, 120, 165]\n        }\n    ],\n    animations: [\n        {\n            name: 'open',\n            frameLen: 0.1,\n            frames: ['open-1', 'open-2', 'open-3']\n        }\n    ]\n};\n\nclass BehaviorDoor extends Trait {\n    constructor() {\n        super('behavior');\n\n        this.opened = false;\n        this.openedTime = 0;\n        this.openDuration = 0.3;\n    }\n\n    open() {\n        this.queue(() => {\n            this.opened = true;\n            this.entity.impassable.deactivate();\n        });\n    }\n\n    close() {\n        this.queue(() => {\n            this.opened = false;\n            this.entity.impassable.activate();\n        });\n    }\n\n    update(entity, deltaTime, level) {\n        if(this.opened && this.openedTime < this.openDuration) {\n            this.openedTime += deltaTime;\n        }\n    }\n\n    collides(us, them, side) {\n        if(!this.opened) {\n            them.obstruct(them, side);\n        }\n    }\n}\n\nexport const loadDoor = defineGameObject('door', {\n    spriteSpecs: [DOOR],\n\n    traits: () => [\n        new Impassable(),\n        new BehaviorDoor()\n    ],\n    animations: sprite => {\n        const openAnim = sprite.animations.get('open');\n\n        return door => {\n            if (door.behavior.opened) {\n                return openAnim(door.behavior.openedTime);\n            }\n\n            return 'idle';\n        };\n    }\n});\n","import { loadEnemy } from './chars/Enemy';\nimport { loadUnicorn } from './chars/Unicorn';\nimport { loadUfo } from './other/Ufo';\nimport { loadManaPot } from './pickables/ManaPot';\nimport { loadPortal } from './pickables/Portal';\nimport { loadRainbow } from './pickables/Rainbow';\nimport { loadSpeedBooster } from './pickables/SpeedBooster';\nimport { loadBullet } from './weapon/Bullet';\nimport { loadDoor } from './other/Door';\n\nexport function loadEntities() {\n    const entityFactories = {};\n\n    function addFactory(name) {\n        return factory => (entityFactories[name] = factory);\n    }\n\n    return Promise.all([\n        loadUnicorn().then(addFactory('unicorn')),\n        loadEnemy().then(addFactory('enemy')),\n        loadRainbow().then(addFactory('rainbow')),\n        loadSpeedBooster().then(addFactory('speedBooster')),\n        loadPortal().then(addFactory('portal')),\n        loadBullet().then(addFactory('bullet')),\n        loadManaPot().then(addFactory('manaPot')),\n        loadUfo().then(addFactory('ufo')),\n        loadDoor().then(addFactory('door'))\n    ]).then(() => entityFactories);\n}\n","import { Vec2 } from '../math';\n\nexport class Picker {\n    constructor(editor) {\n        this.editor = editor;\n    }\n\n    get tileResolver() {\n        return this.editor.tileResolver;\n    }\n\n    get level() {\n        return this.editor.level;\n    }\n\n    disableTraits(level) {\n        for (const entity of this.level.entities) {\n            entity.physics && entity.removeTrait('physics');\n            entity.solid && entity.removeTrait('solid');\n            entity.run && entity.removeTrait('run');\n        }\n    }\n\n    pickEntity(pos) {\n        if (!this.level) {\n            return;\n        }\n        for (const entity of this.level.entities) {\n            if (entity.bounds.contains(pos)) {\n                return entity;\n            }\n        }\n    }\n\n    pickTile(pos) {\n        if (!this.tileResolver) {\n            return;\n        }\n        const tileIndexes = this.pickTileIndex(pos);        \n        const tile = this.tileResolver.getByIndex(tileIndexes.x, tileIndexes.y);\n        return tile;\n    }\n\n    pickTilePos(pos) {\n        if (!this.tileResolver) {\n            return;\n        }\n        const tileIndexes = this.pickTileIndex(pos);\n        const tilePos = this.tileResolver.getTilePos(tileIndexes.x, tileIndexes.y);\n        return tilePos;\n    }\n\n    pickTileIndex(pos) {\n        if (!this.tileResolver) {\n            return;\n        }\n        const indexX = this.tileResolver.toIndex(pos.x);\n        const indexY = this.tileResolver.toIndex(pos.y);\n\n        return new Vec2(indexX, indexY);\n    }\n}\n","import { EventEmitter } from '../util';\n\n@EventEmitter.decorator\nexport class Selection {\n    constructor(editor) {\n        this.editor = editor;\n\n        this.selectedTile = undefined;\n        this.selectedEntity = undefined;\n    }\n\n    get empty() {\n        return !this.selectedTile && !this.selectedEntity;\n    }\n\n    selectTile(tile) {\n        this.selectedTile = tile;\n        this.selectedEntity = undefined;\n        this.emit('change');\n    }\n\n    selectEntity(entity) {\n        if (this.selectedEntity === entity) {\n            return;\n        }\n\n        this.selectedEntity = entity;\n        this.selectedTile = undefined;\n\n        this.emit('change');\n    }\n\n    getSpec() {\n        if (this.empty) {\n            return;\n        }\n\n        if (this.selectedEntity) {\n            const entities = this.editor.levelSpec.entities;\n            const spec = entities[this.selectedEntity.idx];\n\n            return spec;\n        }\n\n        if (this.selectedTile) {\n            const spec = { skinName: this.selectedTile.skinName };\n            return spec;\n        }\n    }\n\n    clear() {\n        this.selectedEntity = undefined;\n        this.selectedTile = undefined;\n\n        this.emit('change');\n    }\n}\n","import { loadSounds } from './loaders';\nimport { splash } from './Splash';\n\nconst soundsPromise = loadSounds({\n    sounds: [\n        {\n            url: require('../sounds/win.wav'),\n            name: 'win'\n        }\n    ]\n});\n\nexport async function doCongratulations(game) {\n    const sounds = await soundsPromise;\n    sounds.get('win').playOnce();\n\n    const pc = game.playerEnv.playerController;\n\n    await splash('you win! <br> congratulations!', {\n        size: 50,\n        background: 'rgba(0,0,0,0.5)'\n    });\n\n    const html = `\n            score: ${pc.totalScore} <br> \n            Deaths: ${pc.deaths}\n        `;\n    splash(html, { size: 50, background: 'rgba(0,0,0,0.5)', timeout: 100000 });\n}\n","import { Camera } from './camera/Camera';\nimport { CameraController } from './camera/CameraController';\nimport { CameraFocus } from './camera/CameraFocus';\nimport { CameraShake } from './camera/CameraShake';\nimport { LevelManager, LevelEvents } from './LevelManager';\nimport { loadEntities } from './loadEntities';\nimport { createLevelLoader } from './loadLevel';\nimport { createPlayerEnv } from './player/createPlayerEnv';\nimport { Timer } from './Timer';\nimport { splash } from './Splash';\nimport { doCongratulations } from './Congratulations';\n\nexport class Game {\n    constructor(canvasSelector) {\n        this.canvasSelector = canvasSelector;\n        this.context = canvasSelector.getContext('2d');\n\n        this.camera = new Camera();\n        this.timer = new Timer();\n        this.levelManager = new LevelManager(this);\n        this.cameraController = new CameraController(this.camera, [CameraShake, CameraFocus]);\n        this.playerEnv = createPlayerEnv(this);\n\n        this.paused = false;\n\n        this.levelManager.on(LevelEvents.FINISHED, this.onLevelFinished.bind(this));\n        this.levelManager.on(LevelEvents.FAILED, this.onLevelFailed.bind(this));\n\n        this.loadResources();\n    }\n\n    async loadResources() {\n        this.entityFactory = await loadEntities();\n        this.loadLevel = await createLevelLoader(this.entityFactory);\n\n        this.timer.start();                \n        this.onLoad();\n    }\n\n    async onLoad() {\n        this.levelManager.runLevel();\n    }\n\n    onLevelFinished({isLastLevel}) {\n        if(isLastLevel) {\n            this.onGameOver();\n        } else {\n            this.levelManager.nextLevel();            \n        }\n    }\n\n    onLevelFailed() {\n        this.levelManager.restartLevel();        \n    }\n\n    async onGameOver() {\n        this.pause();\n\n        doCongratulations(this);\n    }\n\n    pause() {\n        this.levelManager.level.frozen = true;\n        this.paused = true;\n    }\n\n    resume() {\n        this.levelManager.level.frozen = false;\n        this.paused = false;\n    }\n}\n","import { Camera } from '../camera/Camera';\nimport { CameraController } from '../camera/CameraController';\nimport { CameraFocus } from '../camera/CameraFocus';\nimport { CameraShake } from '../camera/CameraShake';\nimport { LevelManager } from '../LevelManager';\nimport { createLevelLoader } from '../loadLevel';\nimport { createPlayerEnv } from '../player/createPlayerEnv';\nimport { TileResolver } from '../TileCreation';\nimport { Timer } from '../Timer';\nimport { Interaction } from './Interaction';\nimport { loadEntities } from '../loadEntities';\nimport { Mouse } from './Mouse';\nimport { Picker } from './Picker';\nimport { Selection } from './Selection';\nimport { createDebugLayer } from '../layers';\nimport { Game } from '../Game';\n\nexport class Editor extends Game {\n    constructor(canvasSelector) {\n        super(canvasSelector);\n\n        this.mouse = new Mouse(this);\n        this.interaction = new Interaction(this);\n        this.picker = new Picker(this);\n        this.selection = new Selection(this);\n\n        let lastLevel = parseInt(localStorage.getItem('levelIdx'));\n        lastLevel = lastLevel > this.levelManager.levels.length - 1 ? lastLevel - 1 : lastLevel;\n\n        const storedLevelIdx = lastLevel;\n        this.levelIdx = storedLevelIdx && storedLevelIdx > 0 ? storedLevelIdx : 1;\n\n        this.tileResolver = undefined;\n        this.levelManager.showSplash = false;\n\n        this.paused = true;\n\n        window.editor = this;\n    }\n\n    get level() {\n        return this.levelManager.level;\n    }\n\n    get levelSpec() {\n        const { spec } = this.levelManager.levels[this.levelIdx];\n        return spec;\n    }\n\n    addDebugLayer(level) {\n        const debugLayer = createDebugLayer(this);\n        level.comp.addLayer(debugLayer);\n    }\n\n    async startEditing(levelIdx) {\n        this.levelIdx = levelIdx;\n        const level = await this.levelManager.runLevel(this.levelIdx);\n        this.tileResolver = new TileResolver(level.tileGrid);\n\n        const origUpdate = this.timer.update;\n\n        this.timer.update = (...args) => {\n            origUpdate(...args);\n            this.onUpdate && this.onUpdate();\n        }\n\n        this.addDebugLayer(level);\n\n        this.paused && this.pause();        \n    }\n\n    restart() {\n        this.playerEnv.playerController.resetMana();\n        return this.startEditing(this.levelIdx);\n    }\n\n    onLoad() {\n        return this.startEditing(this.levelIdx);\n    }\n\n    onLevelFinished() {\n        this.restart();\n    }\n\n    onLevelFailed() {\n        this.restart();\n    }\n}\n","/** Virtual DOM Node */\nfunction VNode() {}\n\n/** Global options\n *\t@public\n *\t@namespace options {Object}\n */\nvar options = {\n\n\t/** If `true`, `prop` changes trigger synchronous component updates.\n  *\t@name syncComponentUpdates\n  *\t@type Boolean\n  *\t@default true\n  */\n\t//syncComponentUpdates: true,\n\n\t/** Processes all created VNodes.\n  *\t@param {VNode} vnode\tA newly-created VNode to normalize/process\n  */\n\t//vnode(vnode) { }\n\n\t/** Hook invoked after a component is mounted. */\n\t// afterMount(component) { }\n\n\t/** Hook invoked after the DOM is updated with a component's latest render. */\n\t// afterUpdate(component) { }\n\n\t/** Hook invoked immediately before a component is unmounted. */\n\t// beforeUnmount(component) { }\n};\n\nvar stack = [];\n\nvar EMPTY_CHILDREN = [];\n\n/**\n * JSX/hyperscript reviver.\n * @see http://jasonformat.com/wtf-is-jsx\n * Benchmarks: https://esbench.com/bench/57ee8f8e330ab09900a1a1a0\n *\n * Note: this is exported as both `h()` and `createElement()` for compatibility reasons.\n *\n * Creates a VNode (virtual DOM element). A tree of VNodes can be used as a lightweight representation\n * of the structure of a DOM tree. This structure can be realized by recursively comparing it against\n * the current _actual_ DOM structure, and applying only the differences.\n *\n * `h()`/`createElement()` accepts an element name, a list of attributes/props,\n * and optionally children to append to the element.\n *\n * @example The following DOM tree\n *\n * `<div id=\"foo\" name=\"bar\">Hello!</div>`\n *\n * can be constructed using this function as:\n *\n * `h('div', { id: 'foo', name : 'bar' }, 'Hello!');`\n *\n * @param {string} nodeName\tAn element name. Ex: `div`, `a`, `span`, etc.\n * @param {Object} attributes\tAny attributes/props to set on the created element.\n * @param rest\t\t\tAdditional arguments are taken to be children to append. Can be infinitely nested Arrays.\n *\n * @public\n */\nfunction h(nodeName, attributes) {\n\tvar children = EMPTY_CHILDREN,\n\t    lastSimple,\n\t    child,\n\t    simple,\n\t    i;\n\tfor (i = arguments.length; i-- > 2;) {\n\t\tstack.push(arguments[i]);\n\t}\n\tif (attributes && attributes.children != null) {\n\t\tif (!stack.length) stack.push(attributes.children);\n\t\tdelete attributes.children;\n\t}\n\twhile (stack.length) {\n\t\tif ((child = stack.pop()) && child.pop !== undefined) {\n\t\t\tfor (i = child.length; i--;) {\n\t\t\t\tstack.push(child[i]);\n\t\t\t}\n\t\t} else {\n\t\t\tif (typeof child === 'boolean') child = null;\n\n\t\t\tif (simple = typeof nodeName !== 'function') {\n\t\t\t\tif (child == null) child = '';else if (typeof child === 'number') child = String(child);else if (typeof child !== 'string') simple = false;\n\t\t\t}\n\n\t\t\tif (simple && lastSimple) {\n\t\t\t\tchildren[children.length - 1] += child;\n\t\t\t} else if (children === EMPTY_CHILDREN) {\n\t\t\t\tchildren = [child];\n\t\t\t} else {\n\t\t\t\tchildren.push(child);\n\t\t\t}\n\n\t\t\tlastSimple = simple;\n\t\t}\n\t}\n\n\tvar p = new VNode();\n\tp.nodeName = nodeName;\n\tp.children = children;\n\tp.attributes = attributes == null ? undefined : attributes;\n\tp.key = attributes == null ? undefined : attributes.key;\n\n\t// if a \"vnode hook\" is defined, pass every created VNode to it\n\tif (options.vnode !== undefined) options.vnode(p);\n\n\treturn p;\n}\n\n/**\n *  Copy all properties from `props` onto `obj`.\n *  @param {Object} obj\t\tObject onto which properties should be copied.\n *  @param {Object} props\tObject from which to copy properties.\n *  @returns obj\n *  @private\n */\nfunction extend(obj, props) {\n  for (var i in props) {\n    obj[i] = props[i];\n  }return obj;\n}\n\n/**\n * Call a function asynchronously, as soon as possible. Makes\n * use of HTML Promise to schedule the callback if available,\n * otherwise falling back to `setTimeout` (mainly for IE<11).\n *\n * @param {Function} callback\n */\nvar defer = typeof Promise == 'function' ? Promise.resolve().then.bind(Promise.resolve()) : setTimeout;\n\n/**\n * Clones the given VNode, optionally adding attributes/props and replacing its children.\n * @param {VNode} vnode\t\tThe virutal DOM element to clone\n * @param {Object} props\tAttributes/props to add when cloning\n * @param {VNode} rest\t\tAny additional arguments will be used as replacement children.\n */\nfunction cloneElement(vnode, props) {\n  return h(vnode.nodeName, extend(extend({}, vnode.attributes), props), arguments.length > 2 ? [].slice.call(arguments, 2) : vnode.children);\n}\n\n// DOM properties that should NOT have \"px\" added when numeric\nvar IS_NON_DIMENSIONAL = /acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i;\n\n/** Managed queue of dirty components to be re-rendered */\n\nvar items = [];\n\nfunction enqueueRender(component) {\n\tif (!component._dirty && (component._dirty = true) && items.push(component) == 1) {\n\t\t(options.debounceRendering || defer)(rerender);\n\t}\n}\n\nfunction rerender() {\n\tvar p,\n\t    list = items;\n\titems = [];\n\twhile (p = list.pop()) {\n\t\tif (p._dirty) renderComponent(p);\n\t}\n}\n\n/**\n * Check if two nodes are equivalent.\n *\n * @param {Node} node\t\t\tDOM Node to compare\n * @param {VNode} vnode\t\t\tVirtual DOM node to compare\n * @param {boolean} [hyrdating=false]\tIf true, ignores component constructors when comparing.\n * @private\n */\nfunction isSameNodeType(node, vnode, hydrating) {\n  if (typeof vnode === 'string' || typeof vnode === 'number') {\n    return node.splitText !== undefined;\n  }\n  if (typeof vnode.nodeName === 'string') {\n    return !node._componentConstructor && isNamedNode(node, vnode.nodeName);\n  }\n  return hydrating || node._componentConstructor === vnode.nodeName;\n}\n\n/**\n * Check if an Element has a given nodeName, case-insensitively.\n *\n * @param {Element} node\tA DOM Element to inspect the name of.\n * @param {String} nodeName\tUnnormalized name to compare against.\n */\nfunction isNamedNode(node, nodeName) {\n  return node.normalizedNodeName === nodeName || node.nodeName.toLowerCase() === nodeName.toLowerCase();\n}\n\n/**\n * Reconstruct Component-style `props` from a VNode.\n * Ensures default/fallback values from `defaultProps`:\n * Own-properties of `defaultProps` not present in `vnode.attributes` are added.\n *\n * @param {VNode} vnode\n * @returns {Object} props\n */\nfunction getNodeProps(vnode) {\n  var props = extend({}, vnode.attributes);\n  props.children = vnode.children;\n\n  var defaultProps = vnode.nodeName.defaultProps;\n  if (defaultProps !== undefined) {\n    for (var i in defaultProps) {\n      if (props[i] === undefined) {\n        props[i] = defaultProps[i];\n      }\n    }\n  }\n\n  return props;\n}\n\n/** Create an element with the given nodeName.\n *\t@param {String} nodeName\n *\t@param {Boolean} [isSvg=false]\tIf `true`, creates an element within the SVG namespace.\n *\t@returns {Element} node\n */\nfunction createNode(nodeName, isSvg) {\n\tvar node = isSvg ? document.createElementNS('http://www.w3.org/2000/svg', nodeName) : document.createElement(nodeName);\n\tnode.normalizedNodeName = nodeName;\n\treturn node;\n}\n\n/** Remove a child node from its parent if attached.\n *\t@param {Element} node\t\tThe node to remove\n */\nfunction removeNode(node) {\n\tvar parentNode = node.parentNode;\n\tif (parentNode) parentNode.removeChild(node);\n}\n\n/** Set a named attribute on the given Node, with special behavior for some names and event handlers.\n *\tIf `value` is `null`, the attribute/handler will be removed.\n *\t@param {Element} node\tAn element to mutate\n *\t@param {string} name\tThe name/key to set, such as an event or attribute name\n *\t@param {any} old\tThe last value that was set for this name/node pair\n *\t@param {any} value\tAn attribute value, such as a function to be used as an event handler\n *\t@param {Boolean} isSvg\tAre we currently diffing inside an svg?\n *\t@private\n */\nfunction setAccessor(node, name, old, value, isSvg) {\n\tif (name === 'className') name = 'class';\n\n\tif (name === 'key') {\n\t\t// ignore\n\t} else if (name === 'ref') {\n\t\tif (old) old(null);\n\t\tif (value) value(node);\n\t} else if (name === 'class' && !isSvg) {\n\t\tnode.className = value || '';\n\t} else if (name === 'style') {\n\t\tif (!value || typeof value === 'string' || typeof old === 'string') {\n\t\t\tnode.style.cssText = value || '';\n\t\t}\n\t\tif (value && typeof value === 'object') {\n\t\t\tif (typeof old !== 'string') {\n\t\t\t\tfor (var i in old) {\n\t\t\t\t\tif (!(i in value)) node.style[i] = '';\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (var i in value) {\n\t\t\t\tnode.style[i] = typeof value[i] === 'number' && IS_NON_DIMENSIONAL.test(i) === false ? value[i] + 'px' : value[i];\n\t\t\t}\n\t\t}\n\t} else if (name === 'dangerouslySetInnerHTML') {\n\t\tif (value) node.innerHTML = value.__html || '';\n\t} else if (name[0] == 'o' && name[1] == 'n') {\n\t\tvar useCapture = name !== (name = name.replace(/Capture$/, ''));\n\t\tname = name.toLowerCase().substring(2);\n\t\tif (value) {\n\t\t\tif (!old) node.addEventListener(name, eventProxy, useCapture);\n\t\t} else {\n\t\t\tnode.removeEventListener(name, eventProxy, useCapture);\n\t\t}\n\t\t(node._listeners || (node._listeners = {}))[name] = value;\n\t} else if (name !== 'list' && name !== 'type' && !isSvg && name in node) {\n\t\tsetProperty(node, name, value == null ? '' : value);\n\t\tif (value == null || value === false) node.removeAttribute(name);\n\t} else {\n\t\tvar ns = isSvg && name !== (name = name.replace(/^xlink\\:?/, ''));\n\t\tif (value == null || value === false) {\n\t\t\tif (ns) node.removeAttributeNS('http://www.w3.org/1999/xlink', name.toLowerCase());else node.removeAttribute(name);\n\t\t} else if (typeof value !== 'function') {\n\t\t\tif (ns) node.setAttributeNS('http://www.w3.org/1999/xlink', name.toLowerCase(), value);else node.setAttribute(name, value);\n\t\t}\n\t}\n}\n\n/** Attempt to set a DOM property to the given value.\n *\tIE & FF throw for certain property-value combinations.\n */\nfunction setProperty(node, name, value) {\n\ttry {\n\t\tnode[name] = value;\n\t} catch (e) {}\n}\n\n/** Proxy an event to hooked event handlers\n *\t@private\n */\nfunction eventProxy(e) {\n\treturn this._listeners[e.type](options.event && options.event(e) || e);\n}\n\n/** Queue of components that have been mounted and are awaiting componentDidMount */\nvar mounts = [];\n\n/** Diff recursion count, used to track the end of the diff cycle. */\nvar diffLevel = 0;\n\n/** Global flag indicating if the diff is currently within an SVG */\nvar isSvgMode = false;\n\n/** Global flag indicating if the diff is performing hydration */\nvar hydrating = false;\n\n/** Invoke queued componentDidMount lifecycle methods */\nfunction flushMounts() {\n\tvar c;\n\twhile (c = mounts.pop()) {\n\t\tif (options.afterMount) options.afterMount(c);\n\t\tif (c.componentDidMount) c.componentDidMount();\n\t}\n}\n\n/** Apply differences in a given vnode (and it's deep children) to a real DOM Node.\n *\t@param {Element} [dom=null]\t\tA DOM node to mutate into the shape of the `vnode`\n *\t@param {VNode} vnode\t\t\tA VNode (with descendants forming a tree) representing the desired DOM structure\n *\t@returns {Element} dom\t\t\tThe created/mutated element\n *\t@private\n */\nfunction diff(dom, vnode, context, mountAll, parent, componentRoot) {\n\t// diffLevel having been 0 here indicates initial entry into the diff (not a subdiff)\n\tif (!diffLevel++) {\n\t\t// when first starting the diff, check if we're diffing an SVG or within an SVG\n\t\tisSvgMode = parent != null && parent.ownerSVGElement !== undefined;\n\n\t\t// hydration is indicated by the existing element to be diffed not having a prop cache\n\t\thydrating = dom != null && !('__preactattr_' in dom);\n\t}\n\n\tvar ret = idiff(dom, vnode, context, mountAll, componentRoot);\n\n\t// append the element if its a new parent\n\tif (parent && ret.parentNode !== parent) parent.appendChild(ret);\n\n\t// diffLevel being reduced to 0 means we're exiting the diff\n\tif (! --diffLevel) {\n\t\thydrating = false;\n\t\t// invoke queued componentDidMount lifecycle methods\n\t\tif (!componentRoot) flushMounts();\n\t}\n\n\treturn ret;\n}\n\n/** Internals of `diff()`, separated to allow bypassing diffLevel / mount flushing. */\nfunction idiff(dom, vnode, context, mountAll, componentRoot) {\n\tvar out = dom,\n\t    prevSvgMode = isSvgMode;\n\n\t// empty values (null, undefined, booleans) render as empty Text nodes\n\tif (vnode == null || typeof vnode === 'boolean') vnode = '';\n\n\t// Fast case: Strings & Numbers create/update Text nodes.\n\tif (typeof vnode === 'string' || typeof vnode === 'number') {\n\n\t\t// update if it's already a Text node:\n\t\tif (dom && dom.splitText !== undefined && dom.parentNode && (!dom._component || componentRoot)) {\n\t\t\t/* istanbul ignore if */ /* Browser quirk that can't be covered: https://github.com/developit/preact/commit/fd4f21f5c45dfd75151bd27b4c217d8003aa5eb9 */\n\t\t\tif (dom.nodeValue != vnode) {\n\t\t\t\tdom.nodeValue = vnode;\n\t\t\t}\n\t\t} else {\n\t\t\t// it wasn't a Text node: replace it with one and recycle the old Element\n\t\t\tout = document.createTextNode(vnode);\n\t\t\tif (dom) {\n\t\t\t\tif (dom.parentNode) dom.parentNode.replaceChild(out, dom);\n\t\t\t\trecollectNodeTree(dom, true);\n\t\t\t}\n\t\t}\n\n\t\tout['__preactattr_'] = true;\n\n\t\treturn out;\n\t}\n\n\t// If the VNode represents a Component, perform a component diff:\n\tvar vnodeName = vnode.nodeName;\n\tif (typeof vnodeName === 'function') {\n\t\treturn buildComponentFromVNode(dom, vnode, context, mountAll);\n\t}\n\n\t// Tracks entering and exiting SVG namespace when descending through the tree.\n\tisSvgMode = vnodeName === 'svg' ? true : vnodeName === 'foreignObject' ? false : isSvgMode;\n\n\t// If there's no existing element or it's the wrong type, create a new one:\n\tvnodeName = String(vnodeName);\n\tif (!dom || !isNamedNode(dom, vnodeName)) {\n\t\tout = createNode(vnodeName, isSvgMode);\n\n\t\tif (dom) {\n\t\t\t// move children into the replacement node\n\t\t\twhile (dom.firstChild) {\n\t\t\t\tout.appendChild(dom.firstChild);\n\t\t\t} // if the previous Element was mounted into the DOM, replace it inline\n\t\t\tif (dom.parentNode) dom.parentNode.replaceChild(out, dom);\n\n\t\t\t// recycle the old element (skips non-Element node types)\n\t\t\trecollectNodeTree(dom, true);\n\t\t}\n\t}\n\n\tvar fc = out.firstChild,\n\t    props = out['__preactattr_'],\n\t    vchildren = vnode.children;\n\n\tif (props == null) {\n\t\tprops = out['__preactattr_'] = {};\n\t\tfor (var a = out.attributes, i = a.length; i--;) {\n\t\t\tprops[a[i].name] = a[i].value;\n\t\t}\n\t}\n\n\t// Optimization: fast-path for elements containing a single TextNode:\n\tif (!hydrating && vchildren && vchildren.length === 1 && typeof vchildren[0] === 'string' && fc != null && fc.splitText !== undefined && fc.nextSibling == null) {\n\t\tif (fc.nodeValue != vchildren[0]) {\n\t\t\tfc.nodeValue = vchildren[0];\n\t\t}\n\t}\n\t// otherwise, if there are existing or new children, diff them:\n\telse if (vchildren && vchildren.length || fc != null) {\n\t\t\tinnerDiffNode(out, vchildren, context, mountAll, hydrating || props.dangerouslySetInnerHTML != null);\n\t\t}\n\n\t// Apply attributes/props from VNode to the DOM Element:\n\tdiffAttributes(out, vnode.attributes, props);\n\n\t// restore previous SVG mode: (in case we're exiting an SVG namespace)\n\tisSvgMode = prevSvgMode;\n\n\treturn out;\n}\n\n/** Apply child and attribute changes between a VNode and a DOM Node to the DOM.\n *\t@param {Element} dom\t\t\tElement whose children should be compared & mutated\n *\t@param {Array} vchildren\t\tArray of VNodes to compare to `dom.childNodes`\n *\t@param {Object} context\t\t\tImplicitly descendant context object (from most recent `getChildContext()`)\n *\t@param {Boolean} mountAll\n *\t@param {Boolean} isHydrating\tIf `true`, consumes externally created elements similar to hydration\n */\nfunction innerDiffNode(dom, vchildren, context, mountAll, isHydrating) {\n\tvar originalChildren = dom.childNodes,\n\t    children = [],\n\t    keyed = {},\n\t    keyedLen = 0,\n\t    min = 0,\n\t    len = originalChildren.length,\n\t    childrenLen = 0,\n\t    vlen = vchildren ? vchildren.length : 0,\n\t    j,\n\t    c,\n\t    f,\n\t    vchild,\n\t    child;\n\n\t// Build up a map of keyed children and an Array of unkeyed children:\n\tif (len !== 0) {\n\t\tfor (var i = 0; i < len; i++) {\n\t\t\tvar _child = originalChildren[i],\n\t\t\t    props = _child['__preactattr_'],\n\t\t\t    key = vlen && props ? _child._component ? _child._component.__key : props.key : null;\n\t\t\tif (key != null) {\n\t\t\t\tkeyedLen++;\n\t\t\t\tkeyed[key] = _child;\n\t\t\t} else if (props || (_child.splitText !== undefined ? isHydrating ? _child.nodeValue.trim() : true : isHydrating)) {\n\t\t\t\tchildren[childrenLen++] = _child;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (vlen !== 0) {\n\t\tfor (var i = 0; i < vlen; i++) {\n\t\t\tvchild = vchildren[i];\n\t\t\tchild = null;\n\n\t\t\t// attempt to find a node based on key matching\n\t\t\tvar key = vchild.key;\n\t\t\tif (key != null) {\n\t\t\t\tif (keyedLen && keyed[key] !== undefined) {\n\t\t\t\t\tchild = keyed[key];\n\t\t\t\t\tkeyed[key] = undefined;\n\t\t\t\t\tkeyedLen--;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// attempt to pluck a node of the same type from the existing children\n\t\t\telse if (!child && min < childrenLen) {\n\t\t\t\t\tfor (j = min; j < childrenLen; j++) {\n\t\t\t\t\t\tif (children[j] !== undefined && isSameNodeType(c = children[j], vchild, isHydrating)) {\n\t\t\t\t\t\t\tchild = c;\n\t\t\t\t\t\t\tchildren[j] = undefined;\n\t\t\t\t\t\t\tif (j === childrenLen - 1) childrenLen--;\n\t\t\t\t\t\t\tif (j === min) min++;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t// morph the matched/found/created DOM child to match vchild (deep)\n\t\t\tchild = idiff(child, vchild, context, mountAll);\n\n\t\t\tf = originalChildren[i];\n\t\t\tif (child && child !== dom && child !== f) {\n\t\t\t\tif (f == null) {\n\t\t\t\t\tdom.appendChild(child);\n\t\t\t\t} else if (child === f.nextSibling) {\n\t\t\t\t\tremoveNode(f);\n\t\t\t\t} else {\n\t\t\t\t\tdom.insertBefore(child, f);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// remove unused keyed children:\n\tif (keyedLen) {\n\t\tfor (var i in keyed) {\n\t\t\tif (keyed[i] !== undefined) recollectNodeTree(keyed[i], false);\n\t\t}\n\t}\n\n\t// remove orphaned unkeyed children:\n\twhile (min <= childrenLen) {\n\t\tif ((child = children[childrenLen--]) !== undefined) recollectNodeTree(child, false);\n\t}\n}\n\n/** Recursively recycle (or just unmount) a node and its descendants.\n *\t@param {Node} node\t\t\t\t\t\tDOM node to start unmount/removal from\n *\t@param {Boolean} [unmountOnly=false]\tIf `true`, only triggers unmount lifecycle, skips removal\n */\nfunction recollectNodeTree(node, unmountOnly) {\n\tvar component = node._component;\n\tif (component) {\n\t\t// if node is owned by a Component, unmount that component (ends up recursing back here)\n\t\tunmountComponent(component);\n\t} else {\n\t\t// If the node's VNode had a ref function, invoke it with null here.\n\t\t// (this is part of the React spec, and smart for unsetting references)\n\t\tif (node['__preactattr_'] != null && node['__preactattr_'].ref) node['__preactattr_'].ref(null);\n\n\t\tif (unmountOnly === false || node['__preactattr_'] == null) {\n\t\t\tremoveNode(node);\n\t\t}\n\n\t\tremoveChildren(node);\n\t}\n}\n\n/** Recollect/unmount all children.\n *\t- we use .lastChild here because it causes less reflow than .firstChild\n *\t- it's also cheaper than accessing the .childNodes Live NodeList\n */\nfunction removeChildren(node) {\n\tnode = node.lastChild;\n\twhile (node) {\n\t\tvar next = node.previousSibling;\n\t\trecollectNodeTree(node, true);\n\t\tnode = next;\n\t}\n}\n\n/** Apply differences in attributes from a VNode to the given DOM Element.\n *\t@param {Element} dom\t\tElement with attributes to diff `attrs` against\n *\t@param {Object} attrs\t\tThe desired end-state key-value attribute pairs\n *\t@param {Object} old\t\t\tCurrent/previous attributes (from previous VNode or element's prop cache)\n */\nfunction diffAttributes(dom, attrs, old) {\n\tvar name;\n\n\t// remove attributes no longer present on the vnode by setting them to undefined\n\tfor (name in old) {\n\t\tif (!(attrs && attrs[name] != null) && old[name] != null) {\n\t\t\tsetAccessor(dom, name, old[name], old[name] = undefined, isSvgMode);\n\t\t}\n\t}\n\n\t// add new & update changed attributes\n\tfor (name in attrs) {\n\t\tif (name !== 'children' && name !== 'innerHTML' && (!(name in old) || attrs[name] !== (name === 'value' || name === 'checked' ? dom[name] : old[name]))) {\n\t\t\tsetAccessor(dom, name, old[name], old[name] = attrs[name], isSvgMode);\n\t\t}\n\t}\n}\n\n/** Retains a pool of Components for re-use, keyed on component name.\n *\tNote: since component names are not unique or even necessarily available, these are primarily a form of sharding.\n *\t@private\n */\nvar components = {};\n\n/** Reclaim a component for later re-use by the recycler. */\nfunction collectComponent(component) {\n\tvar name = component.constructor.name;\n\t(components[name] || (components[name] = [])).push(component);\n}\n\n/** Create a component. Normalizes differences between PFC's and classful Components. */\nfunction createComponent(Ctor, props, context) {\n\tvar list = components[Ctor.name],\n\t    inst;\n\n\tif (Ctor.prototype && Ctor.prototype.render) {\n\t\tinst = new Ctor(props, context);\n\t\tComponent.call(inst, props, context);\n\t} else {\n\t\tinst = new Component(props, context);\n\t\tinst.constructor = Ctor;\n\t\tinst.render = doRender;\n\t}\n\n\tif (list) {\n\t\tfor (var i = list.length; i--;) {\n\t\t\tif (list[i].constructor === Ctor) {\n\t\t\t\tinst.nextBase = list[i].nextBase;\n\t\t\t\tlist.splice(i, 1);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\treturn inst;\n}\n\n/** The `.render()` method for a PFC backing instance. */\nfunction doRender(props, state, context) {\n\treturn this.constructor(props, context);\n}\n\n/** Set a component's `props` (generally derived from JSX attributes).\n *\t@param {Object} props\n *\t@param {Object} [opts]\n *\t@param {boolean} [opts.renderSync=false]\tIf `true` and {@link options.syncComponentUpdates} is `true`, triggers synchronous rendering.\n *\t@param {boolean} [opts.render=true]\t\t\tIf `false`, no render will be triggered.\n */\nfunction setComponentProps(component, props, opts, context, mountAll) {\n\tif (component._disable) return;\n\tcomponent._disable = true;\n\n\tif (component.__ref = props.ref) delete props.ref;\n\tif (component.__key = props.key) delete props.key;\n\n\tif (!component.base || mountAll) {\n\t\tif (component.componentWillMount) component.componentWillMount();\n\t} else if (component.componentWillReceiveProps) {\n\t\tcomponent.componentWillReceiveProps(props, context);\n\t}\n\n\tif (context && context !== component.context) {\n\t\tif (!component.prevContext) component.prevContext = component.context;\n\t\tcomponent.context = context;\n\t}\n\n\tif (!component.prevProps) component.prevProps = component.props;\n\tcomponent.props = props;\n\n\tcomponent._disable = false;\n\n\tif (opts !== 0) {\n\t\tif (opts === 1 || options.syncComponentUpdates !== false || !component.base) {\n\t\t\trenderComponent(component, 1, mountAll);\n\t\t} else {\n\t\t\tenqueueRender(component);\n\t\t}\n\t}\n\n\tif (component.__ref) component.__ref(component);\n}\n\n/** Render a Component, triggering necessary lifecycle events and taking High-Order Components into account.\n *\t@param {Component} component\n *\t@param {Object} [opts]\n *\t@param {boolean} [opts.build=false]\t\tIf `true`, component will build and store a DOM node if not already associated with one.\n *\t@private\n */\nfunction renderComponent(component, opts, mountAll, isChild) {\n\tif (component._disable) return;\n\n\tvar props = component.props,\n\t    state = component.state,\n\t    context = component.context,\n\t    previousProps = component.prevProps || props,\n\t    previousState = component.prevState || state,\n\t    previousContext = component.prevContext || context,\n\t    isUpdate = component.base,\n\t    nextBase = component.nextBase,\n\t    initialBase = isUpdate || nextBase,\n\t    initialChildComponent = component._component,\n\t    skip = false,\n\t    rendered,\n\t    inst,\n\t    cbase;\n\n\t// if updating\n\tif (isUpdate) {\n\t\tcomponent.props = previousProps;\n\t\tcomponent.state = previousState;\n\t\tcomponent.context = previousContext;\n\t\tif (opts !== 2 && component.shouldComponentUpdate && component.shouldComponentUpdate(props, state, context) === false) {\n\t\t\tskip = true;\n\t\t} else if (component.componentWillUpdate) {\n\t\t\tcomponent.componentWillUpdate(props, state, context);\n\t\t}\n\t\tcomponent.props = props;\n\t\tcomponent.state = state;\n\t\tcomponent.context = context;\n\t}\n\n\tcomponent.prevProps = component.prevState = component.prevContext = component.nextBase = null;\n\tcomponent._dirty = false;\n\n\tif (!skip) {\n\t\trendered = component.render(props, state, context);\n\n\t\t// context to pass to the child, can be updated via (grand-)parent component\n\t\tif (component.getChildContext) {\n\t\t\tcontext = extend(extend({}, context), component.getChildContext());\n\t\t}\n\n\t\tvar childComponent = rendered && rendered.nodeName,\n\t\t    toUnmount,\n\t\t    base;\n\n\t\tif (typeof childComponent === 'function') {\n\t\t\t// set up high order component link\n\n\t\t\tvar childProps = getNodeProps(rendered);\n\t\t\tinst = initialChildComponent;\n\n\t\t\tif (inst && inst.constructor === childComponent && childProps.key == inst.__key) {\n\t\t\t\tsetComponentProps(inst, childProps, 1, context, false);\n\t\t\t} else {\n\t\t\t\ttoUnmount = inst;\n\n\t\t\t\tcomponent._component = inst = createComponent(childComponent, childProps, context);\n\t\t\t\tinst.nextBase = inst.nextBase || nextBase;\n\t\t\t\tinst._parentComponent = component;\n\t\t\t\tsetComponentProps(inst, childProps, 0, context, false);\n\t\t\t\trenderComponent(inst, 1, mountAll, true);\n\t\t\t}\n\n\t\t\tbase = inst.base;\n\t\t} else {\n\t\t\tcbase = initialBase;\n\n\t\t\t// destroy high order component link\n\t\t\ttoUnmount = initialChildComponent;\n\t\t\tif (toUnmount) {\n\t\t\t\tcbase = component._component = null;\n\t\t\t}\n\n\t\t\tif (initialBase || opts === 1) {\n\t\t\t\tif (cbase) cbase._component = null;\n\t\t\t\tbase = diff(cbase, rendered, context, mountAll || !isUpdate, initialBase && initialBase.parentNode, true);\n\t\t\t}\n\t\t}\n\n\t\tif (initialBase && base !== initialBase && inst !== initialChildComponent) {\n\t\t\tvar baseParent = initialBase.parentNode;\n\t\t\tif (baseParent && base !== baseParent) {\n\t\t\t\tbaseParent.replaceChild(base, initialBase);\n\n\t\t\t\tif (!toUnmount) {\n\t\t\t\t\tinitialBase._component = null;\n\t\t\t\t\trecollectNodeTree(initialBase, false);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (toUnmount) {\n\t\t\tunmountComponent(toUnmount);\n\t\t}\n\n\t\tcomponent.base = base;\n\t\tif (base && !isChild) {\n\t\t\tvar componentRef = component,\n\t\t\t    t = component;\n\t\t\twhile (t = t._parentComponent) {\n\t\t\t\t(componentRef = t).base = base;\n\t\t\t}\n\t\t\tbase._component = componentRef;\n\t\t\tbase._componentConstructor = componentRef.constructor;\n\t\t}\n\t}\n\n\tif (!isUpdate || mountAll) {\n\t\tmounts.unshift(component);\n\t} else if (!skip) {\n\t\t// Ensure that pending componentDidMount() hooks of child components\n\t\t// are called before the componentDidUpdate() hook in the parent.\n\t\t// Note: disabled as it causes duplicate hooks, see https://github.com/developit/preact/issues/750\n\t\t// flushMounts();\n\n\t\tif (component.componentDidUpdate) {\n\t\t\tcomponent.componentDidUpdate(previousProps, previousState, previousContext);\n\t\t}\n\t\tif (options.afterUpdate) options.afterUpdate(component);\n\t}\n\n\tif (component._renderCallbacks != null) {\n\t\twhile (component._renderCallbacks.length) {\n\t\t\tcomponent._renderCallbacks.pop().call(component);\n\t\t}\n\t}\n\n\tif (!diffLevel && !isChild) flushMounts();\n}\n\n/** Apply the Component referenced by a VNode to the DOM.\n *\t@param {Element} dom\tThe DOM node to mutate\n *\t@param {VNode} vnode\tA Component-referencing VNode\n *\t@returns {Element} dom\tThe created/mutated element\n *\t@private\n */\nfunction buildComponentFromVNode(dom, vnode, context, mountAll) {\n\tvar c = dom && dom._component,\n\t    originalComponent = c,\n\t    oldDom = dom,\n\t    isDirectOwner = c && dom._componentConstructor === vnode.nodeName,\n\t    isOwner = isDirectOwner,\n\t    props = getNodeProps(vnode);\n\twhile (c && !isOwner && (c = c._parentComponent)) {\n\t\tisOwner = c.constructor === vnode.nodeName;\n\t}\n\n\tif (c && isOwner && (!mountAll || c._component)) {\n\t\tsetComponentProps(c, props, 3, context, mountAll);\n\t\tdom = c.base;\n\t} else {\n\t\tif (originalComponent && !isDirectOwner) {\n\t\t\tunmountComponent(originalComponent);\n\t\t\tdom = oldDom = null;\n\t\t}\n\n\t\tc = createComponent(vnode.nodeName, props, context);\n\t\tif (dom && !c.nextBase) {\n\t\t\tc.nextBase = dom;\n\t\t\t// passing dom/oldDom as nextBase will recycle it if unused, so bypass recycling on L229:\n\t\t\toldDom = null;\n\t\t}\n\t\tsetComponentProps(c, props, 1, context, mountAll);\n\t\tdom = c.base;\n\n\t\tif (oldDom && dom !== oldDom) {\n\t\t\toldDom._component = null;\n\t\t\trecollectNodeTree(oldDom, false);\n\t\t}\n\t}\n\n\treturn dom;\n}\n\n/** Remove a component from the DOM and recycle it.\n *\t@param {Component} component\tThe Component instance to unmount\n *\t@private\n */\nfunction unmountComponent(component) {\n\tif (options.beforeUnmount) options.beforeUnmount(component);\n\n\tvar base = component.base;\n\n\tcomponent._disable = true;\n\n\tif (component.componentWillUnmount) component.componentWillUnmount();\n\n\tcomponent.base = null;\n\n\t// recursively tear down & recollect high-order component children:\n\tvar inner = component._component;\n\tif (inner) {\n\t\tunmountComponent(inner);\n\t} else if (base) {\n\t\tif (base['__preactattr_'] && base['__preactattr_'].ref) base['__preactattr_'].ref(null);\n\n\t\tcomponent.nextBase = base;\n\n\t\tremoveNode(base);\n\t\tcollectComponent(component);\n\n\t\tremoveChildren(base);\n\t}\n\n\tif (component.__ref) component.__ref(null);\n}\n\n/** Base Component class.\n *\tProvides `setState()` and `forceUpdate()`, which trigger rendering.\n *\t@public\n *\n *\t@example\n *\tclass MyFoo extends Component {\n *\t\trender(props, state) {\n *\t\t\treturn <div />;\n *\t\t}\n *\t}\n */\nfunction Component(props, context) {\n\tthis._dirty = true;\n\n\t/** @public\n  *\t@type {object}\n  */\n\tthis.context = context;\n\n\t/** @public\n  *\t@type {object}\n  */\n\tthis.props = props;\n\n\t/** @public\n  *\t@type {object}\n  */\n\tthis.state = this.state || {};\n}\n\nextend(Component.prototype, {\n\n\t/** Returns a `boolean` indicating if the component should re-render when receiving the given `props` and `state`.\n  *\t@param {object} nextProps\n  *\t@param {object} nextState\n  *\t@param {object} nextContext\n  *\t@returns {Boolean} should the component re-render\n  *\t@name shouldComponentUpdate\n  *\t@function\n  */\n\n\t/** Update component state by copying properties from `state` to `this.state`.\n  *\t@param {object} state\t\tA hash of state properties to update with new values\n  *\t@param {function} callback\tA function to be called once component state is updated\n  */\n\tsetState: function setState(state, callback) {\n\t\tvar s = this.state;\n\t\tif (!this.prevState) this.prevState = extend({}, s);\n\t\textend(s, typeof state === 'function' ? state(s, this.props) : state);\n\t\tif (callback) (this._renderCallbacks = this._renderCallbacks || []).push(callback);\n\t\tenqueueRender(this);\n\t},\n\n\n\t/** Immediately perform a synchronous re-render of the component.\n  *\t@param {function} callback\t\tA function to be called after component is re-rendered.\n  *\t@private\n  */\n\tforceUpdate: function forceUpdate(callback) {\n\t\tif (callback) (this._renderCallbacks = this._renderCallbacks || []).push(callback);\n\t\trenderComponent(this, 2);\n\t},\n\n\n\t/** Accepts `props` and `state`, and returns a new Virtual DOM tree to build.\n  *\tVirtual DOM is generally constructed via [JSX](http://jasonformat.com/wtf-is-jsx).\n  *\t@param {object} props\t\tProps (eg: JSX attributes) received from parent element/component\n  *\t@param {object} state\t\tThe component's current state\n  *\t@param {object} context\t\tContext object (if a parent component has provided context)\n  *\t@returns VNode\n  */\n\trender: function render() {}\n});\n\n/** Render JSX into a `parent` Element.\n *\t@param {VNode} vnode\t\tA (JSX) VNode to render\n *\t@param {Element} parent\t\tDOM element to render into\n *\t@param {Element} [merge]\tAttempt to re-use an existing DOM tree rooted at `merge`\n *\t@public\n *\n *\t@example\n *\t// render a div into <body>:\n *\trender(<div id=\"hello\">hello!</div>, document.body);\n *\n *\t@example\n *\t// render a \"Thing\" component into #foo:\n *\tconst Thing = ({ name }) => <span>{ name }</span>;\n *\trender(<Thing name=\"one\" />, document.querySelector('#foo'));\n */\nfunction render(vnode, parent, merge) {\n  return diff(merge, vnode, {}, false, parent, false);\n}\n\nvar preact = {\n\th: h,\n\tcreateElement: h,\n\tcloneElement: cloneElement,\n\tComponent: Component,\n\trender: render,\n\trerender: rerender,\n\toptions: options\n};\n\nexport { h, h as createElement, cloneElement, Component, render, rerender, options };\nexport default preact;\n//# sourceMappingURL=preact.esm.js.map\n","import { Component, render, h } from 'preact';\n\nimport { InteractionMode } from './Interaction';\n\nexport function renderSidebar(selector, editor) {\n    render(<Sidebar editor={editor} />, selector);\n}\n\nclass Sidebar extends Component {\n    componentDidMount() {\n        const { editor } = this.props;\n\n        editor.interaction.on('change', () => this.forceUpdate());\n        editor.selection.on('change', () => this.forceUpdate());\n    }\n\n    render() {\n        const { editor } = this.props;\n        const mode = editor.interaction.mode;\n\n        return (\n            <div>\n                <Controls />\n                <LevelSelector {...this.props} />\n                <Mode {...this.props} />\n                {mode === InteractionMode.SELECT && <SelectionMode {...this.props} />}\n                {mode === InteractionMode.TILE && <TileMode {...this.props} />}\n                {mode === InteractionMode.ENTITY && <EntityMode {...this.props} />}\n                <Save {...this.props} />\n            </div>\n        );\n    }\n}\n\nfunction LevelSelector({ editor }) {\n    const levels = editor.levelManager.levels;\n    const level = levels[editor.levelIdx];\n\n    const onSelect = e => {\n        const levelIdx = parseInt(e.target.dataset.idx);\n        editor.startEditing(levelIdx);\n        editor.pause();\n        this.forceUpdate();\n    };\n\n    return (\n        <div>\n            <div>{level.spec.name}</div>\n            <div style={{ display: 'flex' }}>\n                {levels.map((l, idx) => {\n                    if (idx === 0) {\n                        return;\n                    }\n                    const style = {\n                        cursor: 'default',\n                        padding: '5px 10px',\n                        color: editor.levelIdx === idx ? 'black' : 'white',\n                        backgroundColor: editor.levelIdx === idx ? 'white' : 'black'\n                    };\n                    return (\n                        <div data-idx={idx} onClick={onSelect} style={style}>\n                            {idx}\n                        </div>\n                    );\n                })}\n            </div>\n        </div>\n    );\n}\n\nclass Save extends Component {\n    async save() {\n        this.success = await this.props.editor.interaction.saveToFile();\n        this.forceUpdate();\n\n        setTimeout(() => {\n            this.success = undefined;\n            this.forceUpdate();\n        }, 1000);\n    }\n\n    render() {\n        const btnStyle = {\n            cursor: 'pointer',\n            marginRight: 10,\n            fontSize: 50\n        };\n\n        return (\n            <div style={{ marginTop: 50, textAlign: 'center' }}>\n                <div style={btnStyle} onClick={this.save.bind(this)}>\n                    SAVE\n                </div>\n                <div>{this.success !== undefined && (this.success ? 'ok' : 'fail')}</div>\n            </div>\n        );\n    }\n}\n\nfunction Controls() {\n    return (\n        <div style={{ display: 'flex', justifyContent: 'space-between' }}>\n            <div>Controls:</div>\n            <div>\n                <div>T - pause/resume</div>\n                <div>R - restart</div>\n                <div>C-s - save</div>\n                <div style={{ 'margin-top': '5px' }}>Q - select mode</div>\n                <div>W - tile mode</div>\n                <div>E - entity mode</div>\n            </div>\n        </div>\n    );\n}\n\nfunction Mode({ editor: { interaction } }) {\n    const modeStyle = selected => ({\n        padding: '0px 5px',\n        backgroundColor: selected ? 'white' : 'transparent',\n        color: selected ? 'black' : 'white',\n        cursor: 'default'\n    });\n\n    const onClick = mode => () => {\n        interaction.setMode(mode);\n    };\n\n    const modeLabels = {\n        [InteractionMode.SELECT]: 'SELECT',\n        [InteractionMode.TILE]: 'TILE',\n        [InteractionMode.ENTITY]: 'ENTITY'\n    };\n\n    function ModeItem({ mode }) {\n        const label = modeLabels[mode];\n        return (\n            <div onClick={onClick(mode)} style={modeStyle(interaction.mode === mode)}>\n                {label}\n            </div>\n        );\n    }\n\n    return (\n        <div\n            style={{\n                display: 'flex',\n                'margin-top': '15px',\n                'justify-content': 'space-between'\n            }}\n        >\n            <div>mode: </div>\n            <div style={{ display: 'flex' }}>\n                <ModeItem mode={InteractionMode.SELECT} />\n                <ModeItem mode={InteractionMode.TILE} />\n                <ModeItem mode={InteractionMode.ENTITY} />\n            </div>\n        </div>\n    );\n}\n\nfunction SelectionMode({ editor: { selection, interaction } }) {\n    if (selection.empty) {\n        return;\n    }\n\n    const tile = selection.selectedTile;\n    const entity = selection.selectedEntity;\n    const spec = selection.getSpec();\n\n    const type = tile ? 'tile' : 'entity';\n    const pos = tile\n        ? `[${tile.indexX}, ${tile.indexY}], [${tile.x1}, ${tile.y1}]`\n        : `[${entity.pos.x}, ${entity.pos.y}]`;\n\n    return (\n        <div\n            style={{ display: 'flex', 'margin-top': '15px', 'flex-direction': 'column' }}\n        >\n            <div style={{ display: 'flex' }}>\n                <div style={{ marginRight: '10px' }}>Selection:</div>\n                <span>\n                    {type} {pos}\n                </span>\n            </div>\n            <div style={{ display: 'flex', marginTop: 10 }}>\n                <Spec spec={{ ...spec }} />\n            </div>\n        </div>\n    );\n}\n\nfunction Spec({ spec }) {\n    const keys = Object.keys(spec);\n\n    const rows = keys.map(key => {\n        const value = spec[key];\n        return [<div>{key}: </div>, <div>{value}</div>];\n    });\n\n    const table = (\n        <div style={{ display: 'grid', 'grid-template-columns': 'repeat(2, 1fr)' }}>\n            {rows}\n        </div>\n    );\n\n    return <div>{table}</div>;\n}\n\nfunction TileMode({ editor }) {\n    const interaction = editor.interaction;\n    const tileSkinNames = editor.levelSpec.tileSprite.frames.map(f => f.name);\n\n    function onSelect(e) {\n        const value = e.target.value;\n        interaction.setCreateTileSkin(value);\n    }\n\n    if (!interaction.createTileSkin) {\n        interaction.setCreateTileSkin(tileSkinNames[0]);\n    }\n\n    return (\n        <div style={{ display: 'flex', marginTop: '15px', 'flex-direction': 'column' }}>\n            <select onChange={onSelect} style={{ 'min-height': '150px' }} size=\"3\">\n                {tileSkinNames.map((name, idx) => (\n                    <option\n                        selected={name === interaction.setCreateTileSkin}\n                        value={name}\n                    >\n                        {name}\n                    </option>\n                ))}\n            </select>\n        </div>\n    );\n}\n\nfunction EntityMode({ editor: { entityFactory, interaction } }) {\n    const nameSkinCombs = Object.keys(entityFactory).reduce((acc, name) => {\n        const skins = entityFactory[name].availableSkins;\n        skins.forEach(skin => acc.push({ name, skin }));\n        return acc;\n    }, []);\n\n    function onSelect(e) {\n        const idx = e.target.value;\n        const { skin, name } = nameSkinCombs[idx];\n\n        interaction.setCreateEntityName(name);\n        interaction.setCreateEntitySkinName(skin);\n    }\n\n    function isSelected(name, skin) {\n        return (\n            interaction.createEntityName === name &&\n            interaction.createEntitySkinName === skin\n        );\n    }\n\n    if (!interaction.createEntityName) {\n        const { skin, name } = nameSkinCombs[0];\n\n        interaction.setCreateEntityName(name);\n        interaction.setCreateEntitySkinName(skin);\n    }\n\n    return (\n        <div style={{ display: 'flex', marginTop: '15px', 'flex-direction': 'column' }}>\n            <select onChange={onSelect} style={{ 'min-height': '150px' }} size=\"3\">\n                {nameSkinCombs.map(({ name, skin }, idx) => (\n                    <option selected={isSelected(name, skin)} value={idx}>\n                        {name} {skin !== 'default' && `[${skin}]`}\n                    </option>\n                ))}\n            </select>\n        </div>\n    );\n}\n","import { Editor } from './Editor';\nimport { renderSidebar } from './Sidebar';\n\nconst canvas = document.getElementById('screen');\nconst editor = new Editor(canvas);\n\nconst sidebarSelector = document.querySelector('.sidebar');\nrenderSidebar(sidebarSelector, editor);"]}