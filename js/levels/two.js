import { splashText } from '../Splash';
import { Striker } from '../Traits';
import { defineLevel } from './defineLevel';
import { clamp } from '../math';

const spec = {
    name: 'magic',
    spawn: [96, 64],
    background: {
        images: {
            sky: require('../../img/backgrounds/clouds.png'),
            back: require('../../img/backgrounds/mountains.png'),
            front: require('../../img/backgrounds/forest.png')
        },
        gradient: camPos => {
            return [
                ['#256bcc', 0],
                ['#2278c6', clamp(0.4 - camPos.y * 0.0001, 0, 0.8)],
                ['#00c7a4', 0.8]
            ];
        }
    },
    sounds: [
        {
            url: require('../../sounds/hooked-on-a-feeling.mp3'),
            name: 'music'
        }
    ],
    tileSprite: {
        imageURL: require('../../img/tiles/y5lxj.png'),
        tileW: 60,
        tileH: 60,
        frames: [
            {
                name: 'grass',
                rect: [60 * 0, 0, 60, 60]
            },
            {
                name: 'stone',
                rect: [60 * 1, 0, 60, 60]
            },
            {
                name: 'dirt',
                rect: [60 * 2, 0, 60, 60]
            },
            {
                name: 'default',
                rect: [60 * 3, 0, 60, 60]
            },

            {
                name: 'stone2',
                rect: [60 * 0, 60, 60, 60]
            },
            {
                name: 'wood',
                rect: [60 * 1, 60, 60, 60]
            },
            {
                name: 'sand',
                rect: [60 * 2, 60, 60, 60]
            }
        ]
    },
    tiles: [
        ['default', 1, 7],
        ['default', 2, 7],
        ['default', 3, 7],
        ['default', 4, 7],
        ['default', 5, 7],
        ['default', 6, 7],
        ['default', 7, 7],
        ['default', 8, 7],
        ['default', 9, 7],
        ['default', 10, 7],
        ['default', 11, 7],
        ['default', 12, 7],
        ['default', 13, 7],
        ['default', 14, 7],
        ['default', 15, 7],
        ['default', 16, 7],
        ['wood', 17, 6],
        ['default', 17, 7],
        ['wood', 18, 5],
        ['wood', 18, 6],
        ['default', 18, 7],
        ['wood', 24, 5],
        ['wood', 24, 6],
        ['wood', 24, 7],
        ['wood', 25, 6],
        ['wood', 25, 7],
        ['wood', 26, 7],
        ['wood', 27, 7],
        ['wood', 28, 7],
        ['wood', 29, 7],
        ['wood', 30, 7],
        ['wood', 31, 7],
        ['wood', 32, 7],
        ['wood', 33, 7],
        ['wood', 34, 7],
        ['wood', 35, 7],
        ['wood', 36, 7],
        ['wood', 37, 7],
        ['wood', 38, 7],
        ['wood', 39, 7],
        ['wood', 46, 7],
        ['wood', 47, 7],
        ['wood', 48, 7],
        ['wood', 49, 7],
        ['wood', 50, 7],
        ['wood', 51, 7],
        ['wood', 52, 7],
        ['wood', 53, 6],
        ['wood', 53, 7],
        ['wood', 54, 6],
        ['wood', 55, 6],
        ['wood', 56, 6],
        ['wood', 57, 6],
        ['wood', 58, 6],
        ['wood', 59, 6],
        ['wood', 60, 5],
        ['wood', 60, 6],
        ['wood', 61, 5],
        ['wood', 62, 5],
        ['wood', 63, 5],
        ['wood', 64, 5],
        ['wood', 65, 5],
        ['wood', 66, 4],
        ['wood', 66, 5],
        ['wood', 67, 4],
        ['wood', 68, 4],
        ['wood', 69, 4],
        ['wood', 70, 4],
        ['wood', 71, 4],
        ['wood', 72, 4],
        ['wood', 73, 4],
        ['wood', 74, 4],
        ['wood', 75, 4],
        ['wood', 76, 4],
        ['wood', 77, 4],
        ['wood', 78, 4],
        ['wood', 79, 4],
        ['wood', 80, -10],
        ['wood', 80, -9],
        ['wood', 80, -8],
        ['wood', 80, -7],
        ['wood', 80, -6],
        ['wood', 80, -5],
        ['wood', 80, -4],
        ['wood', 80, -3],
        ['wood', 80, -2],
        ['wood', 80, 4],
        ['wood', 81, 4],
        ['wood', 82, -10],
        ['wood', 82, -9],
        ['wood', 82, -8],
        ['wood', 82, -7],
        ['wood', 82, -6],
        ['wood', 82, -5],
        ['wood', 82, -4],
        ['wood', 82, -3],
        ['wood', 82, -2],
        ['wood', 82, 4],
        ['default', 83, -3],
        ['wood', 83, -2],
        ['wood', 83, 4],
        ['default', 84, -3],
        ['wood', 84, -2],
        ['wood', 84, 4],
        ['wood', 84, 5],
        ['wood', 84, 6],
        ['wood', 84, 7],
        ['wood', 84, 8],
        ['wood', 84, 9],
        ['default', 85, -3],
        ['wood', 85, -2],
        ['wood', 85, -1],
        ['default', 85, 5],
        ['dirt', 85, 6],
        ['dirt', 85, 7],
        ['stone', 85, 8],
        ['stone', 85, 9],
        ['default', 86, -2],
        ['default', 86, -1],
        ['wood', 86, 0],
        ['default', 86, 6],
        ['dirt', 86, 7],
        ['stone', 86, 8],
        ['stone', 86, 9],
        ['default', 87, -1],
        ['wood', 87, 0],
        ['default', 87, 6],
        ['dirt', 87, 7],
        ['stone', 87, 8],
        ['stone', 87, 9],
        ['default', 88, 0],
        ['wood', 88, 1],
        ['default', 88, 6],
        ['dirt', 88, 7],
        ['stone', 88, 8],
        ['stone', 88, 9],
        ['default', 89, 0],
        ['wood', 89, 1],
        ['wood', 89, 2],
        ['default', 89, 6],
        ['dirt', 89, 7],
        ['stone', 89, 8],
        ['stone', 89, 9],
        ['default', 90, 1],
        ['wood', 90, 2],
        ['default', 90, 6],
        ['dirt', 90, 7],
        ['stone', 90, 8],
        ['stone', 90, 9],
        ['default', 91, 1],
        ['wood', 91, 2],
        ['default', 91, 6],
        ['dirt', 91, 7],
        ['stone', 91, 8],
        ['stone', 91, 9],
        ['default', 92, 6],
        ['dirt', 92, 7],
        ['stone', 92, 8],
        ['stone', 92, 9],
        ['default', 93, 6],
        ['dirt', 93, 7],
        ['stone', 93, 8],
        ['stone', 93, 9],
        ['dirt', 94, 7],
        ['stone2', 94, 8],
        ['stone', 94, 9],
        ['stone2', 95, 8],
        ['stone2', 95, 9],
        ['stone2', 96, 9],
        ['stone2', 97, 9],
        ['stone2', 98, 9],
        ['stone2', 99, 9],
        ['stone2', 100, 9],
        ['stone2', 101, 9],
        ['stone2', 102, 9],
        ['wood', 103, 5],
        ['stone2', 103, 9],
        ['stone2', 104, 9],
        ['stone2', 105, 9],
        ['stone2', 106, 9],
        ['stone2', 107, 9],
        ['stone2', 108, 9],
        ['stone2', 109, 9],
        ['stone2', 110, 9],
        ['default', 118, 5],
        ['default', 119, 5],
        ['default', 120, 5],
        ['default', 121, 5],
        ['default', 122, 5],
        ['default', 129, 8],
        ['default', 130, 8],
        ['default', 131, 8],
        ['stone2', 132, 2],
        ['default', 132, 8],
        ['stone2', 133, 2],
        ['default', 133, 8],
        ['stone2', 134, 2],
        ['default', 134, 8],
        ['stone2', 135, 1],
        ['stone2', 135, 2],
        ['default', 135, 8],
        ['default', 136, 8],
        ['default', 137, 8],
        ['default', 186, 2]
    ],
    entities: [
        { name: 'manaPot', pos: [1266.0000186093064, 15] },
        { name: 'enemy', skinName: 'cactus', pos: [2341.4832911129342, 346.5] },
        { name: 'manaPot', pos: [2811, 347] },
        { name: 'manaPot', pos: [2888, 346] },
        { name: 'manaPot', pos: [2968.408459114388, 346] },
        { name: 'manaPot', pos: [3051.408459114388, 348] },
        { name: 'manaPot', pos: [3239.9999999999914, 290] },
        { name: 'manaPot', pos: [3318.9999999999914, 290] },
        { name: 'manaPot', pos: [3392.9999999999914, 289] },
        { name: 'manaPot', pos: [3469.9999999999914, 288] },
        { name: 'manaPot', pos: [3634.050762163021, 235] },
        { name: 'manaPot', pos: [3699.050762163021, 233] },
        { name: 'manaPot', pos: [3756.050762163021, 235] },
        { name: 'manaPot', pos: [3819.050762163021, 236] },
        { name: 'speedBooster', pos: [3966.498282284062, 179.5] },
        { name: 'enemy', skinName: 'cactus', pos: [4858, -96.5] },
        { name: 'enemy', skinName: 'cactus', pos: [4858.074896158258, 158.5] },
        { name: 'enemy', skinName: 'cactus', pos: [4859, -792.5] },
        { name: 'enemy', skinName: 'cactus', pos: [4859, -722.5] },
        { name: 'enemy', skinName: 'cactus', pos: [4859, 77.5] },
        { name: 'enemy', skinName: 'cactus', pos: [4859, -151.5] },
        { name: 'enemy', skinName: 'cactus', pos: [4859, -501.5] },
        { name: 'enemy', pos: [4859.597505721113, -613.5], skinName: 'cactus' },
        { name: 'enemy', skinName: 'cactus', pos: [4860, -16.5] },
        { name: 'enemy', skinName: 'cactus', pos: [4860, -654.5] },
        { name: 'enemy', skinName: 'cactus', pos: [4860, -858.5] },
        { name: 'enemy', skinName: 'cactus', pos: [4860.074896158258, -366] },
        { name: 'enemy', skinName: 'cactus', pos: [4861.074896158258, -208.5] },
        { name: 'enemy', skinName: 'cactus', pos: [4861.074896158258, -295] },
        { name: 'enemy', skinName: 'cactus', pos: [4862, -564.5] },
        { name: 'enemy', skinName: 'cactus', pos: [4862.074896158258, -431] },
        { name: 'speedBooster', pos: [4962.498282284062, 9.5] },
        { name: 'rainbow', pos: [5182.685545762244, 259.5] },
        { name: 'enemy', skinName: 'cactus', pos: [5618.503676392036, 289] },
        { name: 'enemy', skinName: 'cactus', pos: [5640.333333333396, 341] },
        { name: 'enemy', skinName: 'cactus', pos: [5700.333333333396, 402] },
        { name: 'enemy', skinName: 'cactus', pos: [5760.333333333396, 461] },
        { name: 'enemy', skinName: 'cactus', pos: [5815.333333333396, 467] },
        { name: 'enemy', skinName: 'cactus', pos: [5875.333333333396, 468] },
        { name: 'enemy', skinName: 'cactus', pos: [5939.958719207056, 467] },
        {
            name: 'speedBooster',
            pos: [6101.448375081813, 486.5],
            skinName: 'default'
        },
        { name: 'enemy', skinName: 'cactus', pos: [6163.341166635407, 226] },
        { name: 'manaPot', pos: [7168.899479945025, 236], skinName: 'default' },
        {
            name: 'enemy',
            pos: [7908.328624282737, 45],
            skinName: 'cactus',
            id: 'target-1'
        },
        { name: 'portal', pos: [8056.328624282737, 53], skinName: 'default' },
        {
            name: 'door',
            pos: [8154.666972841413, 312.5],
            skinName: 'default',
            id: 'door-1'
        }
    ]
};

export default defineLevel(spec, {
    onStart: (game, level) => {
        // level.sounds.get('music').playOnce();
    },
    afterUpdate: (game, level) => {
        const door1 = level.namedEntities.get('door-1');
        const target1 = level.namedEntities.get('target-1');

        if (!door1.behavior.opened && target1.killable.dead) {
            door1.behavior.open();
        }
    }
});
